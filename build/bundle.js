!function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){var e={exports:{}};return t(e,e.exports),e.exports
/* @preserve
	 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
	 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
	 */}var e=t((function(t,e){!function(t){var e="1.7.1";function n(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function r(t){return t._leaflet_id=t._leaflet_id||++s,t._leaflet_id}function a(t,e,n){var i,o,s,r;return r=function(){i=!1,o&&(s.apply(n,o),o=!1)},s=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(r,e),i=!0)},s}function l(t,e,n){var i=e[1],o=e[0],s=i-o;return t===i&&n?t:((t-o)%s+s)%s+o}function c(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var $=window.requestAnimationFrame||w("RequestAnimationFrame")||x,k=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function T(t,e,n){if(!n||$!==x)return $.call(window,o(t,e));t.call(e)}function I(t){t&&k.call(window,t)}var P={extend:n,create:i,bind:o,lastId:s,stamp:r,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:$,cancelFn:k,requestAnimFrame:T,cancelAnimFrame:I};function S(){}function C(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}S.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,s=i(o);for(var r in s.constructor=e,e.prototype=s,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(e[r]=this[r]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(C(t.includes),n.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=n(i(s.options),t.options)),n(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},e},S.include=function(t){return n(this.prototype,t),this},S.mergeOptions=function(t){return n(this.prototype.options,t),this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._off(t[o],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},s=i,r=0,a=s.length;r<a;r++)if(s[r].fn===e&&s[r].ctx===n)return;s.push(o)},_off:function(t,e,n){var i,o,s;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(o=0,s=i.length;o<s;o++){var r=i[o];if(r.ctx===n&&r.fn===e)return r.fn=c,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,s=i.length;o<s;o++)i[o].fn=c;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var l=s[r];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var s=o((function(){this.off(t,e,n).off(t,s,n)}),this);return this.on(t,e,n).on(t,s,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var M=S.extend(E);function O(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var A=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof O?t:_(t)?new O(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,n)}function R(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function N(t,e){return!t||t instanceof R?t:new R(t,e)}function z(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function j(t,e){return t instanceof z?t:new z(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function Z(t,e,n){return t instanceof B?t:_(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=A(this.x),this.y=A(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},R.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof O?D(t):N(t))instanceof R?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,o=t.max,s=o.x>=e.x&&i.x<=n.x,r=o.y>=e.y&&i.y<=n.y;return s&&r},overlaps:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,o=t.max,s=o.x>e.x&&i.x<n.x,r=o.y>e.y&&i.y<n.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},z.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof z))return t?this.extend(Z(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new z(new B(e.lat-i,e.lng-o),new B(n.lat+i,n.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?Z(t):j(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof z?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&i.lat<=n.lat,r=o.lng>=e.lng&&i.lng<=n.lng;return s&&r},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&i.lat<n.lat,r=o.lng>e.lng&&i.lng<n.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=Z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return H.distance(this,Z(t))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var U,F={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new R(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();return new z(new B(s.lat-i,s.lng-o),new B(r.lat-i,r.lng-o))}},H=n({},F,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,s=Math.sin((e.lat-t.lat)*n/2),r=Math.sin((e.lng-t.lng)*n/2),a=s*s+Math.cos(i)*Math.cos(o)*r*r,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),W=6378137,V={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new O(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(U=W*Math.PI,new R([-U,-U],[U,U]))};function q(t,e,n,i){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function K(t,e,n,i){return new q(t,e,n,i)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var G=n({},H,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return K(t,.5,-t,.5)}()}),J=n({},G,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var n,i,o,s,r,a,l="";for(n=0,o=t.length;n<o;n++){for(i=0,s=(r=t[n]).length;i<s;i++)l+=(i?"L":"M")+(a=r[i]).x+" "+a.y;l+=e?Ct?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),it=Mt("webkit"),ot=Mt("android"),st=Mt("android 2")||Mt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=ot&&Mt("Google")&&rt<537&&!("AudioNode"in window),lt=!!window.opera,ct=!nt&&Mt("chrome"),ut=Mt("gecko")&&!it&&!lt&&!tt,ht=!ct&&Mt("safari"),dt=Mt("phantom"),pt="OTransition"in Q,ft=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in Q,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,_t="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(mt||gt||_t)&&!pt&&!dt,yt="undefined"!=typeof orientation||Mt("mobile"),wt=yt&&it,bt=yt&&gt,xt=!window.PointerEvent&&window.MSPointerEvent,$t=!(!window.PointerEvent&&!xt),kt=!window.L_NO_TOUCH&&($t||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=yt&&lt,It=yt&&ut,Pt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),St=!!document.createElement("canvas").getContext,Ct=!(!document.createElementNS||!Y("svg").createSVGRect),Et=!Ct&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Mt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ot={ie:tt,ielt9:et,edge:nt,webkit:it,android:ot,android23:st,androidStock:at,opera:lt,chrome:ct,gecko:ut,safari:ht,phantom:dt,opera12:pt,win:ft,ie3d:mt,webkit3d:gt,gecko3d:_t,any3d:vt,mobile:yt,mobileWebkit:wt,mobileWebkit3d:bt,msPointer:xt,pointer:$t,touch:kt,mobileOpera:Tt,mobileGecko:It,retina:Pt,passiveEvents:Lt,canvas:St,svg:Ct,vml:Et},At=xt?"MSPointerDown":"pointerdown",Dt=xt?"MSPointerMove":"pointermove",Rt=xt?"MSPointerUp":"pointerup",Nt=xt?"MSPointerCancel":"pointercancel",zt={},jt=!1;function Bt(t,e,n,i){return"touchstart"===e?Ut(t,n,i):"touchmove"===e?qt(t,n,i):"touchend"===e&&Kt(t,n,i),this}function Zt(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(At,i,!1):"touchmove"===e?t.removeEventListener(Dt,i,!1):"touchend"===e&&(t.removeEventListener(Rt,i,!1),t.removeEventListener(Nt,i,!1)),this}function Ut(t,e,n){var i=o((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&He(t),Vt(t,e)}));t["_leaflet_touchstart"+n]=i,t.addEventListener(At,i,!1),jt||(document.addEventListener(At,Ft,!0),document.addEventListener(Dt,Ht,!0),document.addEventListener(Rt,Wt,!0),document.addEventListener(Nt,Wt,!0),jt=!0)}function Ft(t){zt[t.pointerId]=t}function Ht(t){zt[t.pointerId]&&(zt[t.pointerId]=t)}function Wt(t){delete zt[t.pointerId]}function Vt(t,e){for(var n in t.touches=[],zt)t.touches.push(zt[n]);t.changedTouches=[t],e(t)}function qt(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Vt(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Dt,i,!1)}function Kt(t,e,n){var i=function(t){Vt(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Rt,i,!1),t.addEventListener(Nt,i,!1)}var Gt=xt?"MSPointerDown":$t?"pointerdown":"touchstart",Jt=xt?"MSPointerUp":$t?"pointerup":"touchend",Yt="_leaflet_";function Xt(t,e,n){var i,o,s=!1,r=250;function a(t){if($t){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);o=t.touches?t.touches[0]:t,s=n>0&&n<=r,i=e}function l(t){if(s&&!o.cancelBubble){if($t){if("mouse"===t.pointerType)return;var n,r,a={};for(r in o)n=o[r],a[r]=n&&n.bind?n.bind(o):n;o=a}o.type="dblclick",o.button=0,e(o),i=null}}return t[Yt+Gt+n]=a,t[Yt+Jt+n]=l,t[Yt+"dblclick"+n]=e,t.addEventListener(Gt,a,!!Lt&&{passive:!1}),t.addEventListener(Jt,l,!!Lt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Qt(t,e){var n=t[Yt+Gt+e],i=t[Yt+Jt+e],o=t[Yt+"dblclick"+e];return t.removeEventListener(Gt,n,!!Lt&&{passive:!1}),t.removeEventListener(Jt,i,!!Lt&&{passive:!1}),t.removeEventListener("dblclick",o,!1),this}var te,ee,ne,ie,oe,se=xe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),re=xe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ae="webkitTransition"===re||"OTransition"===re?re+"End":"transitionend";function le(t){return"string"==typeof t?document.getElementById(t):t}function ce(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ue(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function he(t){var e=t.parentNode;e&&e.removeChild(t)}function de(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function fe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function me(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ye(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ge(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!me(t,e)){var s=ye(t);ve(t,(s?s+" ":"")+e)}}function _e(t,e){void 0!==t.classList?t.classList.remove(e):ve(t,h((" "+ye(t)+" ").replace(" "+e+" "," ")))}function ve(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ye(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function we(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&be(t,e)}function be(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function xe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function $e(t,e,n){var i=e||new O(0,0);t.style[se]=(mt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function ke(t,e){t._leaflet_pos=e,vt?$e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Te(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document)te=function(){Ae(window,"selectstart",He)},ee=function(){Re(window,"selectstart",He)};else{var Ie=xe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);te=function(){if(Ie){var t=document.documentElement.style;ne=t[Ie],t[Ie]="none"}},ee=function(){Ie&&(document.documentElement.style[Ie]=ne,ne=void 0)}}function Pe(){Ae(window,"dragstart",He)}function Le(){Re(window,"dragstart",He)}function Se(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ce(),ie=t,oe=t.style.outline,t.style.outline="none",Ae(window,"keydown",Ce))}function Ce(){ie&&(ie.style.outline=oe,ie=void 0,oe=void 0,Re(window,"keydown",Ce))}function Ee(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Me(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Oe={TRANSFORM:se,TRANSITION:re,TRANSITION_END:ae,get:le,getStyle:ce,create:ue,remove:he,empty:de,toFront:pe,toBack:fe,hasClass:me,addClass:ge,removeClass:_e,setClass:ve,getClass:ye,setOpacity:we,testProp:xe,setTransform:$e,setPosition:ke,getPosition:Te,disableTextSelection:te,enableTextSelection:ee,disableImageDrag:Pe,enableImageDrag:Le,preventOutline:Se,restoreOutline:Ce,getSizedParentNode:Ee,getScale:Me};function Ae(t,e,n,i){if("object"==typeof e)for(var o in e)je(t,o,e[o],n);else for(var s=0,r=(e=d(e)).length;s<r;s++)je(t,e[s],n,i);return this}var De="_leaflet_events";function Re(t,e,n,i){if("object"==typeof e)for(var o in e)Be(t,o,e[o],n);else if(e)for(var s=0,r=(e=d(e)).length;s<r;s++)Be(t,e[s],n,i);else{for(var a in t[De])Be(t,a,t[De][a]);delete t[De]}return this}function Ne(){if($t)return!(nt||ht)}var ze={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function je(t,e,n,i){var o=e+r(n)+(i?"_"+r(i):"");if(t[De]&&t[De][o])return this;var s=function(e){return n.call(i||t,e||window.event)},a=s;$t&&0===e.indexOf("touch")?Bt(t,e,s,o):kt&&"dblclick"===e&&!Ne()?Xt(t,s,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(ze[e]||e,s,!!Lt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Xe(t,e)&&a(e)},t.addEventListener(ze[e],s,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[De]=t[De]||{},t[De][o]=s}function Be(t,e,n,i){var o=e+r(n)+(i?"_"+r(i):""),s=t[De]&&t[De][o];if(!s)return this;$t&&0===e.indexOf("touch")?Zt(t,e,o):kt&&"dblclick"===e&&!Ne()?Qt(t,o):"removeEventListener"in t?t.removeEventListener(ze[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[De][o]=null}function Ze(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ye(t),this}function Ue(t){return je(t,"wheel",Ze),this}function Fe(t){return Ae(t,"mousedown touchstart dblclick",Ze),je(t,"click",Je),this}function He(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function We(t){return He(t),Ze(t),this}function Ve(t,e){if(!e)return new O(t.clientX,t.clientY);var n=Me(e),i=n.boundingClientRect;return new O((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var qe=ft&&ct?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function Ke(t){return nt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/qe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ge={};function Je(t){Ge[t.type]=!0}function Ye(t){var e=Ge[t.type];return Ge[t.type]=!1,e}function Xe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Qe={on:Ae,off:Re,stopPropagation:Ze,disableScrollPropagation:Ue,disableClickPropagation:Fe,preventDefault:He,stop:We,getMousePosition:Ve,getWheelDelta:Ke,fakeStop:Je,skipped:Ye,isExternalTarget:Xe,addListener:Ae,removeListener:Re},tn=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Te(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ke(this._el,n),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),en=M.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(Z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=re&&vt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(Z(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof O?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var s=i.subtract(n).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ge(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),o=this.project(t),s=this.getSize(),r=this._zoom;t=Z(t),e=void 0===e?r:e;var a=Math.max(s.x,s.y),l=a*this.getZoomScale(r,e),c=o.distanceTo(i)||1,u=1.42,h=u*u;function d(t){var e=(l*l-a*a+(t?-1:1)*h*h*c*c)/(2*(t?l:a)*h*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/f(t)}var g=d(0);function _(t){return a*(f(g)/f(g+u*t))}function v(t){return a*(f(g)*m(g+u*t)-p(g))/h}function y(t){return 1-Math.pow(1-t,1.5)}var w=Date.now(),b=(d(1)-g)/u,x=n.duration?1e3*n.duration:1e3*b*.8;function $(){var n=(Date.now()-w)/x,s=y(n)*b;n<=1?(this._flyToFrame=T($,this),this._move(this.unproject(i.add(o.subtract(i).multiplyBy(v(s)/c)),r),this.getScaleZoom(a/_(s),r),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),$.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,j(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),c=N([a.min.add(n),a.max.subtract(i)]);if(!c.contains(r)){this._enforcingBounds=!0;var u=s.subtract(r),h=D(r.x+u.x,r.y+u.y);(r.x<c.min.x||r.x>c.max.x)&&(h.x=s.x-u.x,u.x>0?h.x+=l.x-n.x:h.x-=l.x-i.x),(r.y<c.min.y||r.y>c.max.y)&&(h.y=s.y-u.y,u.y>0?h.y+=l.y-n.y:h.y-=l.y-i.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=e.divideBy(2).round(),r=i.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),i=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var o=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(o,i.maxZoom):o)}var s={latlng:e,bounds:n,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),he(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)he(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ue("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new z(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=D(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),c=N(this.project(a,i),this.project(r,i)).getSize(),u=vt?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),u&&(i=Math.round(i/(u/100))*(u/100),i=e?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(o,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(Z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(Z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(Z(t),Z(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(t)))},mouseEventToContainerPoint:function(t){return Ve(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=le(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ae(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,ge(t,"leaflet-container"+(kt?" leaflet-touch":"")+(Pt?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(ht?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ce(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ke(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(t.markerPane,"leaflet-zoom-hide"),ge(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ke(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ke(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[r(this._container)]=this;var e=t?Re:Ae;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=T((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[r(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!Xe(s,t))break;if(i.push(n),o)break}if(s===this._container)break;s=s.parentNode}return i.length||a||o||!Xe(s,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ye(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Se(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var s=i[0];"contextmenu"===e&&s.listens(e,!0)&&He(t);var r={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(e,r,!0),r.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Te(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return N([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),s=new R(i.subtract(o),i.add(o)),r=this._getBoundsOffset(s,n,e);return r.round().equals([0,0])?t:this.unproject(i.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new R(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=N(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),s=i.max.subtract(t.max);return new O(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=vt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=se,n=this._proxy.style[e];$e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){he(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();$e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(T((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),T((function(){this._moveEnd(!0)}),this))}});function nn(t,e){return new en(t,e)}var on=S.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return ge(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(he(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),sn=function(t){return new on(t)};en.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ue("div",e+"control-container",this._container);function i(i,o){var s=e+i+" "+e+o;t[i+o]=ue("div",s,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)he(this._controlCorners[t]);he(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rn=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return on.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):_e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ue("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Fe(e),Ue(e);var i=this._section=ue("section",t+"-list");n&&(this._map.on("click",this.collapse,this),ot||Ae(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ue("a",t+"-toggle",e);o.href="#",o.title="Layers",kt?(Ae(o,"click",We),Ae(o,"click",this.expand,this)):Ae(o,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ue("div",t+"-base",i),this._separator=ue("div",t+"-separator",i),this._overlaysList=ue("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(o((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;de(this._baseLayersList),de(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+r(this),i),this._layerControlInputs.push(e),e.layerId=r(t.layer),Ae(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");return n.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],o=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||o.push(e);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),an=function(t,e,n){return new rn(t,e,n)},ln=on.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ue("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var s=ue("a",n,i);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Fe(s),Ae(s,"click",We),Ae(s,"click",o,this),Ae(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";_e(this._zoomInButton,e),_e(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ge(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ge(this._zoomInButton,e)}});en.mergeOptions({zoomControl:!0}),en.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new ln,this.addControl(this.zoomControl))}));var cn=function(t){return new ln(t)},un=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ue("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ue("div",e,n)),t.imperial&&(this._iScale=ue("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(t){return new un(t)},dn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ue("div","leaflet-control-attribution"),Fe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});en.mergeOptions({attributionControl:!0}),en.addInitHook((function(){this.options.attributionControl&&(new dn).addTo(this)}));var pn=function(t){return new dn(t)};on.Layers=rn,on.Zoom=ln,on.Scale=un,on.Attribution=dn,sn.layers=an,sn.zoom=cn,sn.scale=hn,sn.attribution=pn;var fn=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(t,e){return t.addHandler(e,this),this};var mn,gn={Events:E},_n=kt?"touchstart mousedown":"mousedown",vn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},yn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},wn=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ae(this._dragStartTarget,_n,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wn._dragging===this&&this.finishDrag(),Re(this._dragStartTarget,_n,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!me(this._element,"leaflet-zoom-anim")&&!(wn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(wn._dragging=this,this._preventOutline&&Se(this._element),Pe(),te(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ee(this._element);this._startPoint=new O(e.clientX,e.clientY),this._parentScale=Me(n),Ae(document,yn[t.type],this._onMove,this),Ae(document,vn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new O(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,He(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Te(this._element).subtract(n),ge(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,I(this._animRequest),this._lastEvent=t,this._animRequest=T(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ke(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in _e(document.body,"leaflet-dragging"),this._lastTarget&&(_e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),yn)Re(document,yn[t],this._onMove,this),Re(document,vn[t],this._onUp,this);Le(),ee(),this._moved&&this._moving&&(I(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,wn._dragging=!1}});function bn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=kn(t=In(t,n),n)}function xn(t,e,n){return Math.sqrt(En(t,e,n,!0))}function $n(t,e,n){return En(t,e,n)}function kn(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Tn(t,i,e,0,n-1);var o,s=[];for(o=0;o<n;o++)i[o]&&s.push(t[o]);return s}function Tn(t,e,n,i,o){var s,r,a,l=0;for(r=i+1;r<=o-1;r++)(a=En(t[r],t[i],t[o],!0))>l&&(s=r,l=a);l>n&&(e[s]=1,Tn(t,e,n,i,s),Tn(t,e,n,s,o))}function In(t,e){for(var n=[t[0]],i=1,o=0,s=t.length;i<s;i++)Cn(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<s-1&&n.push(t[s-1]),n}function Pn(t,e,n,i,o){var s,r,a,l=i?mn:Sn(t,n),c=Sn(e,n);for(mn=c;;){if(!(l|c))return[t,e];if(l&c)return!1;a=Sn(r=Ln(t,e,s=l||c,n,o),n),s===l?(t=r,l=a):(e=r,c=a)}}function Ln(t,e,n,i,o){var s,r,a=e.x-t.x,l=e.y-t.y,c=i.min,u=i.max;return 8&n?(s=t.x+a*(u.y-t.y)/l,r=u.y):4&n?(s=t.x+a*(c.y-t.y)/l,r=c.y):2&n?(s=u.x,r=t.y+l*(u.x-t.x)/a):1&n&&(s=c.x,r=t.y+l*(c.x-t.x)/a),new O(s,r,o)}function Sn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Cn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function En(t,e,n,i){var o,s=e.x,r=e.y,a=n.x-s,l=n.y-r,c=a*a+l*l;return c>0&&((o=((t.x-s)*a+(t.y-r)*l)/c)>1?(s=n.x,r=n.y):o>0&&(s+=a*o,r+=l*o)),a=t.x-s,l=t.y-r,i?a*a+l*l:new O(s,r)}function Mn(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function On(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(t)}var An={simplify:bn,pointToSegmentDistance:xn,closestPointOnSegment:$n,clipSegment:Pn,_getEdgeIntersection:Ln,_getBitCode:Sn,_sqClosestPointOnSegment:En,isFlat:Mn,_flat:On};function Dn(t,e,n){var i,o,s,r,a,l,c,u,h,d=[1,4,2,8];for(o=0,c=t.length;o<c;o++)t[o]._code=Sn(t[o],e);for(r=0;r<4;r++){for(u=d[r],i=[],o=0,s=(c=t.length)-1;o<c;s=o++)a=t[o],l=t[s],a._code&u?l._code&u||((h=Ln(l,a,u,e,n))._code=Sn(h,e),i.push(h)):(l._code&u&&((h=Ln(l,a,u,e,n))._code=Sn(h,e),i.push(h)),i.push(a));t=i}return t}var Rn={clipPolygon:Dn},Nn={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new R([-180,-90],[180,90])},zn={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=s*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-r)/(1+r),s/2);return i=-n*Math.log(Math.max(a,1e-10)),new O(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(r),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=c=Math.PI/2-2*Math.atan(r*e)-a;return new B(a*n,t.x*n/i)}},jn={LonLat:Nn,Mercator:zn,SphericalMercator:V},Bn=n({},H,{code:"EPSG:3395",projection:zn,transformation:function(){var t=.5/(Math.PI*zn.R);return K(t,.5,-t,.5)}()}),Zn=n({},H,{code:"EPSG:4326",projection:Nn,transformation:K(1/180,1,-1/180,.5)}),Un=n({},F,{projection:Nn,transformation:K(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});F.Earth=H,F.EPSG3395=Bn,F.EPSG3857=G,F.EPSG900913=J,F.EPSG4326=Zn,F.Simple=Un;var Fn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});en.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=r(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&r(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?_(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hn=Fn.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),Wn=function(t,e){return new Hn(t,e)},Vn=Hn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Hn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Hn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new z;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),qn=function(t,e){return new Vn(t,e)},Kn=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=D(i),s=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Pt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Gn(t){return new Kn(t)}var Jn=Kn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Jn.imagePath||(Jn.imagePath=this._detectIconPath()),(this.options.imagePath||Jn.imagePath)+Kn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ue("div","leaflet-default-icon-path",document.body),e=ce(t,"background-image")||ce(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Yn=fn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new wn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=Te(e._icon),r=n.getPixelBounds(),a=n.getPixelOrigin(),l=N(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!l.contains(s)){var c=D((Math.max(l.max.x,s.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),ke(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=T(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=Te(e._icon),o=e._map.layerPointToLatLng(i);n&&ke(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Xn=Fn.extend({options:{icon:new Jn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=Z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ge(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(ge(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),he(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&he(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ke(this._icon,t),this._shadow&&ke(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&we(this._icon,t),this._shadow&&we(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qn(t,e){return new Xn(t,e)}var ti=Fn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),ei=ti.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=Z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ti.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new R(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ni(t,e){return new ei(t,e)}var ii=ei.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),p(this,e),this._latlng=Z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ti.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===H.distance){var o=Math.PI/180,s=this._mRadius/H.R/o,r=n.project([e+s,t]),a=n.project([e-s,t]),l=r.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(c*o))/(Math.cos(e*o)*Math.cos(c*o)))/o;(isNaN(u)||0===u)&&(u=s/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,t-u]).x,this._radiusY=l.y-r.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function oi(t,e,n){return new ii(t,e,n)}var si=ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,s=En,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],c=1,u=l.length;c<u;c++){var h=s(t,e=l[c-1],n=l[c],!0);h<i&&(i=h,o=s(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,s,r,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<l-1;t++)if(o=a[t],s=a[t+1],(i+=n=o.distanceTo(s))>e)return r=(i-e)/n,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=Z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new z,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Mn(t),i=0,o=t.length;i<o;i++)n?(e[i]=Z(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,o,s=t[0]instanceof B,r=t.length;if(s){for(o=[],i=0;i<r;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<r;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,s,r,a,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(n=0,s=(a=this._rings[e]).length;n<s-1;n++)(r=Pn(a[n],a[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(r[0]),r[1]===a[n+1]&&n!==s-2||(l[i].push(r[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=bn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,s,r,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,o=(r=(a=this._parts[n]).length)-1;i<r;o=i++)if((e||0!==i)&&xn(t,a[o],a[i])<=l)return!0;return!1}});function ri(t,e){return new si(t,e)}si._flat=On;var ai=si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,s,r,a,l,c=this._rings[0],u=c.length;if(!u)return null;for(s=r=a=0,t=0,e=u-1;t<u;e=t++)n=c[t],i=c[e],o=n.y*i.x-i.y*n.x,r+=(n.x+i.x)*o,a+=(n.y+i.y)*o,s+=3*o;return l=0===s?c[0]:[r/s,a/s],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=si.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){si.prototype._setLatLngs.call(this,t),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new O(e,e);if(t=new R(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,s=this._rings.length;o<s;o++)(i=Dn(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,s,r,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(l=(e=this._parts[o]).length)-1;s<l;r=s++)n=e[s],i=e[r],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||si.prototype._containsPoint.call(this,t,!0)}});function li(t,e){return new ai(t,e)}var ci=Vn.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=_(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=ui(t,s);return r?(r.feature=_i(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function ui(t,e){var n,i,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||di;if(!a&&!r)return null;switch(r.type){case"Point":return hi(c,t,n=u(a),e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)n=u(a[o]),l.push(hi(c,t,n,e));return new Vn(l);case"LineString":case"MultiLineString":return i=pi(a,"LineString"===r.type?0:1,u),new si(i,e);case"Polygon":case"MultiPolygon":return i=pi(a,"Polygon"===r.type?1:2,u),new ai(i,e);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var h=ui({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Vn(l);default:throw new Error("Invalid GeoJSON object.")}}function hi(t,e,n,i){return t?t(e,n):new Xn(n,i&&i.markersInheritOptions&&i)}function di(t){return new B(t[1],t[0],t[2])}function pi(t,e,n){for(var i,o=[],s=0,r=t.length;s<r;s++)i=e?pi(t[s],e-1,n):(n||di)(t[s]),o.push(i);return o}function fi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function mi(t,e,n,i){for(var o=[],s=0,r=t.length;s<r;s++)o.push(e?mi(t[s],e-1,n,i):fi(t[s],i));return!e&&n&&o.push(o[0]),o}function gi(t,e){return t.feature?n({},t.feature,{geometry:e}):_i(e)}function _i(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var vi={toGeoJSON:function(t){return gi(this,{type:"Point",coordinates:fi(this.getLatLng(),t)})}};function yi(t,e){return new ci(t,e)}Xn.include(vi),ii.include(vi),ei.include(vi),si.include({toGeoJSON:function(t){var e=!Mn(this._latlngs);return gi(this,{type:(e?"Multi":"")+"LineString",coordinates:mi(this._latlngs,e?1:0,!1,t)})}}),ai.include({toGeoJSON:function(t){var e=!Mn(this._latlngs),n=e&&!Mn(this._latlngs[0]),i=mi(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),gi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Hn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),gi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var s=_i(o);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}})),n?gi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var wi=yi,bi=Fn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){he(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pe(this._image),this},bringToBack:function(){return this._map&&fe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ue("img");ge(e,"leaflet-image-layer"),this._zoomAnimated&&ge(e,"leaflet-zoom-animated"),this.options.className&&ge(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;$e(this._image,n,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ke(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),xi=function(t,e,n){return new bi(t,e,n)},$i=bi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ue("video");if(ge(e,"leaflet-image-layer"),this._zoomAnimated&&ge(e,"leaflet-zoom-animated"),this.options.className&&ge(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=o(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var r=0;r<this._url.length;r++){var a=ue("source");a.src=this._url[r],e.appendChild(a)}}}});function ki(t,e,n){return new $i(t,e,n)}var Ti=bi.extend({_initImage:function(){var t=this._image=this._url;ge(t,"leaflet-image-layer"),this._zoomAnimated&&ge(t,"leaflet-zoom-animated"),this.options.className&&ge(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function Ii(t,e,n){return new Ti(t,e,n)}var Pi=Fn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&we(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(o(he,void 0,this._container),200)):he(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pe(this._container),this},bringToBack:function(){return this._map&&fe(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Fn||(n=e,e=t),e instanceof Vn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?ke(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Li=Pi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Pi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ti||this._source.on("preclick",Ze))},onRemove:function(t){Pi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ti||this._source.off("preclick",Ze))},getEvents:function(){var t=Pi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ue("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ue("div",t+"-content-wrapper",e);if(this._contentNode=ue("div",t+"-content",n),Fe(e),Ue(this._contentNode),Ae(e,"contextmenu",Ze),this._tipContainer=ue("div",t+"-tip-container",e),this._tip=ue("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ue("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Ae(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",ge(t,s)):_e(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ke(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ce(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new O(this._containerLeft,-n-this._containerBottom);o._add(Te(this._container));var s=t.layerPointToContainerPoint(o),r=D(this.options.autoPanPadding),a=D(this.options.autoPanPaddingTopLeft||r),l=D(this.options.autoPanPaddingBottomRight||r),c=t.getSize(),u=0,h=0;s.x+i+l.x>c.x&&(u=s.x+i-c.x+l.x),s.x-u-a.x<0&&(u=s.x-a.x),s.y+n+l.y>c.y&&(h=s.y+n-c.y+l.y),s.y-h-a.y<0&&(h=s.y-a.y),(u||h)&&t.fire("autopanstart").panBy([u,h])}},_onCloseButtonClick:function(t){this._close(),We(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Si=function(t,e){return new Li(t,e)};en.mergeOptions({closePopupOnClick:!0}),en.include({openPopup:function(t,e,n){return t instanceof Li||(t=new Li(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Fn.include({bindPopup:function(t,e){return t instanceof Li?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Li(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(We(t),e instanceof ti?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Ci=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Pi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Pi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Pi.prototype.getEvents.call(this);return kt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ue("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,o=this._container,s=i.latLngToContainerPoint(i.getCenter()),r=i.layerPointToContainerPoint(t),a=this.options.direction,l=o.offsetWidth,c=o.offsetHeight,u=D(this.options.offset),h=this._getAnchor();"top"===a?(e=l/2,n=c):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=c/2):"right"===a?(e=0,n=c/2):"left"===a?(e=l,n=c/2):r.x<s.x?(a="right",e=0,n=c/2):(a="left",e=l+2*(u.x+h.x),n=c/2),t=t.subtract(D(e,n,!0)).add(u).add(h),_e(o,"leaflet-tooltip-right"),_e(o,"leaflet-tooltip-left"),_e(o,"leaflet-tooltip-top"),_e(o,"leaflet-tooltip-bottom"),ge(o,"leaflet-tooltip-"+a),ke(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&we(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ei=function(t,e){return new Ci(t,e)};en.include({openTooltip:function(t,e,n){return t instanceof Ci||(t=new Ci(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Fn.include({bindTooltip:function(t,e){return t instanceof Ci?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Ci(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),kt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ge(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(_e(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Mi=Kn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(de(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=D(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Oi(t){return new Mi(t)}Kn.Default=Jn;var Ai=Fn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),he(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,s=n.length;o<s;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){we(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);we(o.el,s),s<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(I(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(he(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)he(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),s=Math.floor(e/2),r=n-1,a=new O(+o,+s);a.z=+r;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),r>i&&this._retainParent(o,s,r,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var s=2*e;s<2*e+2;s++){var r=new O(o,s);r.z=n+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,s,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var s=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?$e(t.el,o,i):ke(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*i);return new R(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),s=o.getCenter(),r=[],a=this.options.keepBuffer,l=new R(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new O(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=o.min.y;h<=o.max.y;h++)for(var d=o.min.x;d<=o.max.x;d++){var p=new O(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:r.push(p)}}if(r.sort((function(t,e){return t.distanceTo(s)-e.distanceTo(s)})),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n);return[e.unproject(i,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new z(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new O(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(he(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ge(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,et&&this.options.opacity<1&&we(t,this.options.opacity),ot&&!st&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&T(o(this._tileReady,this,t,null,s)),ke(s,n),this._tiles[i]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(we(n.el,0),I(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ge(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Di(t){return new Ai(t)}var Ri=Ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&Pt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),ot||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ae(n,"load",o(this._tileOnLoad,this,e,n)),Ae(n,"error",o(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Pt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){et?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=y,he(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",y),Ai.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return Ai.prototype._tileReady.call(this,t,e,n)}});function Ni(t,e){return new Ri(t,e)}var zi=Ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);var s=(e=p(this,e)).detectRetina&&Pt?2:1,r=this.getTileSize();i.width=r.x*s,i.height=r.y*s,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=N(n.project(e[0]),n.project(e[1])),o=i.min,s=i.max,r=(this._wmsVersion>=1.3&&this._crs===Zn?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=Ri.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function ji(t,e){return new zi(t,e)}Ri.WMS=zi,Ni.wms=ji;var Bi=Fn.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=Te(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=this._map.project(t,e).subtract(s),a=o.multiplyBy(-n).add(i).add(o).subtract(r);vt?$e(this._container,a,n):ke(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zi=Bi.extend({getEvents:function(){var t=Bi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ae(t,"mousemove",this._onMouseMove,this),Ae(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,he(this._container),Re(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Pt?2:1;ke(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Pt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[r(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[r(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,s,r=t._parts,a=r.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,o=r[n].length;i<o;i++)s=r[n][i],l[i?"lineTo":"moveTo"](s.x,s.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(Je(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(_e(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(ge(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(o((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Ui(t){return St?new Zi(t):null}var Fi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Hi={_initContainer:function(){this._container=ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Fi("shape");ge(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Fi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;he(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=Fi("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=_(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=Fi("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){fe(t._container)}},Wi=Et?Fi:Y,Vi=Bi.extend({getEvents:function(){var t=Bi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Wi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){he(this._container),Re(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ke(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Wi("path");t.options.className&&ge(e,t.options.className),t.options.interactive&&ge(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){he(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){fe(t._path)}});function qi(t){return Ct||Et?new Vi(t):null}Et&&Vi.include(Hi),en.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Ui(t)||qi(t)}});var Ki=ai.extend({initialize:function(t,e){ai.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Gi(t,e){return new Ki(t,e)}Vi.create=Wi,Vi.pointsToPath=X,ci.geometryToLayer=ui,ci.coordsToLatLng=di,ci.coordsToLatLngs=pi,ci.latLngToCoords=fi,ci.latLngsToCoords=mi,ci.getFeature=gi,ci.asFeature=_i,en.mergeOptions({boxZoom:!0});var Ji=fn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Re(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){he(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),te(),Pe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ae(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ue("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),n=e.getSize();ke(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(he(this._box),_e(this._container,"leaflet-crosshair")),ee(),Le(),Re(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});en.addInitHook("addHandler","boxZoom",Ji),en.mergeOptions({doubleClickZoom:!0});var Yi=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});en.addInitHook("addHandler","doubleClickZoom",Yi),en.mergeOptions({dragging:!0,inertia:!st,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xi=fn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new wn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_e(this._map._container,"leaflet-grab"),_e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,s=(i+e+n)%t-e-n,r=Math.abs(o+n)<Math.abs(s+n)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=n.easeLinearity,a=o.multiplyBy(r/s),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),h=c/(n.inertiaDeceleration*r),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),T((function(){e.panBy(d,{duration:h,easeLinearity:r,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});en.addInitHook("addHandler","dragging",Xi),en.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qi=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ae(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Re(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Re(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}We(t)}}});en.addInitHook("addHandler","keyboard",Qi),en.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var to=fn.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Re(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ke(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),i),We(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,s=n?Math.ceil(o/n)*n:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}});en.addInitHook("addHandler","scrollWheelZoom",to),en.mergeOptions({tap:!0,tapTolerance:15});var eo=fn.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Re(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(He(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ge(n,"leaflet-active"),this._holdTimeout=setTimeout(o((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ae(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Re(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&_e(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!kt||$t&&!ht||en.addInitHook("addHandler","tap",eo),en.mergeOptions({touchZoom:kt&&!st,bounceAtZoomLimits:!0});var no=fn.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),Re(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend",this._onTouchEnd,this),He(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var a=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=T(a,this,!0),He(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,I(this._animRequest),Re(document,"touchmove",this._onTouchMove,this),Re(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});en.addInitHook("addHandler","touchZoom",no),en.BoxZoom=Ji,en.DoubleClickZoom=Yi,en.Drag=Xi,en.Keyboard=Qi,en.ScrollWheelZoom=to,en.Tap=eo,en.TouchZoom=no,t.version=e,t.Control=on,t.control=sn,t.Browser=Ot,t.Evented=M,t.Mixin=gn,t.Util=P,t.Class=S,t.Handler=fn,t.extend=n,t.bind=o,t.stamp=r,t.setOptions=p,t.DomEvent=Qe,t.DomUtil=Oe,t.PosAnimation=tn,t.Draggable=wn,t.LineUtil=An,t.PolyUtil=Rn,t.Point=O,t.point=D,t.Bounds=R,t.bounds=N,t.Transformation=q,t.transformation=K,t.Projection=jn,t.LatLng=B,t.latLng=Z,t.LatLngBounds=z,t.latLngBounds=j,t.CRS=F,t.GeoJSON=ci,t.geoJSON=yi,t.geoJson=wi,t.Layer=Fn,t.LayerGroup=Hn,t.layerGroup=Wn,t.FeatureGroup=Vn,t.featureGroup=qn,t.ImageOverlay=bi,t.imageOverlay=xi,t.VideoOverlay=$i,t.videoOverlay=ki,t.SVGOverlay=Ti,t.svgOverlay=Ii,t.DivOverlay=Pi,t.Popup=Li,t.popup=Si,t.Tooltip=Ci,t.tooltip=Ei,t.Icon=Kn,t.icon=Gn,t.DivIcon=Mi,t.divIcon=Oi,t.Marker=Xn,t.marker=Qn,t.TileLayer=Ri,t.tileLayer=Ni,t.GridLayer=Ai,t.gridLayer=Di,t.SVG=Vi,t.svg=qi,t.Renderer=Bi,t.Canvas=Zi,t.canvas=Ui,t.Path=ti,t.CircleMarker=ei,t.circleMarker=ni,t.Circle=ii,t.circle=oi,t.Polyline=si,t.polyline=ri,t.Polygon=ai,t.polygon=li,t.Rectangle=Ki,t.rectangle=Gi,t.Map=en,t.map=nn;var io=window.L;t.noConflict=function(){return window.L=io,this},window.L=t}(e)}));function n(){}const i=t=>t;function o(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function r(){return Object.create(null)}function a(t){t.forEach(s)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let u;function h(t,e){return u||(u=document.createElement("a")),u.href=e,t===u.href}function d(t,...e){if(null==t)return n;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function p(t){let e;return d(t,(t=>e=t))(),e}function f(t,e,n){t.$$.on_destroy.push(d(e,n))}function m(t,e,n,i){if(t){const o=g(t,e,n,i);return t[0](o)}}function g(t,e,n,i){return t[1]&&i?o(n.ctx.slice(),t[1](i(e))):n.ctx}function _(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}function v(t,e,n,i,o,s){if(o){const r=g(e,n,i,s);t.p(r,o)}}function y(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function w(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function b(t,e){const n={};e=new Set(e);for(const i in t)e.has(i)||"$"===i[0]||(n[i]=t[i]);return n}function x(t){return null==t?"":t}function $(t){return t&&l(t.destroy)?t.destroy:n}const k="undefined"!=typeof window;let T=k?()=>window.performance.now():()=>Date.now(),I=k?t=>requestAnimationFrame(t):n;const P=new Set;function S(t){P.forEach((e=>{e.c(t)||(P.delete(e),e.f())})),0!==P.size&&I(S)}function C(t){let e;return 0===P.size&&I(S),{promise:new Promise((n=>{P.add(e={c:t,f:n})})),abort(){P.delete(e)}}}function E(t,e){t.appendChild(e)}function M(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function O(t){const e=N("style");return function(t,e){E(t.head||t,e)}(M(t),e),e}function A(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode.removeChild(t)}function R(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function j(t){return document.createTextNode(t)}function B(){return j(" ")}function Z(){return j("")}function U(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function F(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function H(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:"__value"===i?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:F(t,i,e[i])}function W(t){return""===t?null:+t}function V(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function q(t,e){t.value=null==e?"":e}function K(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function G(t,e){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}t.selectedIndex=-1}function J(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Y(t,e,n){t.classList[n?"add":"remove"](e)}function X(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}const Q=new Set;let tt,et=0;function nt(t,e,n,i,o,s,r,a=0){const l=16.666/i;let c="{\n";for(let t=0;t<=1;t+=l){const i=e+(n-e)*s(t);c+=100*t+`%{${r(i,1-i)}}\n`}const u=c+`100% {${r(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,d=M(t);Q.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=O(t).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[h]||(f[h]=!0,p.insertRule(`@keyframes ${h} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${h} ${i}ms linear ${o}ms 1 both`,et+=1,h}function it(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-i.length;o&&(t.style.animation=i.join(", "),et-=o,et||I((()=>{et||(Q.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),Q.clear())})))}function ot(t,e,o,s){if(!e)return n;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return n;const{delay:a=0,duration:l=300,easing:c=i,start:u=T()+a,end:h=u+l,tick:d=n,css:p}=o(t,{from:e,to:r},s);let f,m=!0,g=!1;function _(){p&&it(t,f),m=!1}return C((t=>{if(!g&&t>=u&&(g=!0),g&&t>=h&&(d(1,0),_()),!m)return!1;if(g){const e=0+1*c((t-u)/l);d(e,1-e)}return!0})),p&&(f=nt(t,0,1,l,a,c,p)),a||(g=!0),d(0,1),_}function st(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:i}=e,o=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,rt(t,o)}}function rt(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),o="none"===i.transform?"":i.transform;t.style.transform=`${o} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}function at(t){tt=t}function lt(){if(!tt)throw new Error("Function called outside component initialization");return tt}function ct(t){lt().$$.on_mount.push(t)}function ut(t){lt().$$.on_destroy.push(t)}function ht(){const t=lt();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const o=X(e,n);i.slice().forEach((e=>{e.call(t,o)}))}}}function dt(t,e){lt().$$.context.set(t,e)}function pt(t){return lt().$$.context.get(t)}function ft(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const mt=[],gt=[],_t=[],vt=[],yt=Promise.resolve();let wt=!1;function bt(){wt||(wt=!0,yt.then(It))}function xt(){return bt(),yt}function $t(t){_t.push(t)}let kt=!1;const Tt=new Set;function It(){if(!kt){kt=!0;do{for(let t=0;t<mt.length;t+=1){const e=mt[t];at(e),Pt(e.$$)}for(at(null),mt.length=0;gt.length;)gt.pop()();for(let t=0;t<_t.length;t+=1){const e=_t[t];Tt.has(e)||(Tt.add(e),e())}_t.length=0}while(mt.length);for(;vt.length;)vt.pop()();wt=!1,kt=!1,Tt.clear()}}function Pt(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach($t)}}let Lt;function St(){return Lt||(Lt=Promise.resolve(),Lt.then((()=>{Lt=null}))),Lt}function Ct(t,e,n){t.dispatchEvent(X(`${e?"intro":"outro"}${n}`))}const Et=new Set;let Mt;function Ot(){Mt={r:0,c:[],p:Mt}}function At(){Mt.r||a(Mt.c),Mt=Mt.p}function Dt(t,e){t&&t.i&&(Et.delete(t),t.i(e))}function Rt(t,e,n,i){if(t&&t.o){if(Et.has(t))return;Et.add(t),Mt.c.push((()=>{Et.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const Nt={duration:0};function zt(t,e,o){let s,r,a=e(t,o),c=!1,u=0;function h(){s&&it(t,s)}function d(){const{delay:e=0,duration:o=300,easing:l=i,tick:d=n,css:p}=a||Nt;p&&(s=nt(t,0,1,o,e,l,p,u++)),d(0,1);const f=T()+e,m=f+o;r&&r.abort(),c=!0,$t((()=>Ct(t,!0,"start"))),r=C((e=>{if(c){if(e>=m)return d(1,0),Ct(t,!0,"end"),h(),c=!1;if(e>=f){const t=l((e-f)/o);d(t,1-t)}}return c}))}let p=!1;return{start(){p||(p=!0,it(t),l(a)?(a=a(),St().then(d)):d())},invalidate(){p=!1},end(){c&&(h(),c=!1)}}}function jt(t,e,o){let s,r=e(t,o),c=!0;const u=Mt;function h(){const{delay:e=0,duration:o=300,easing:l=i,tick:h=n,css:d}=r||Nt;d&&(s=nt(t,1,0,o,e,l,d));const p=T()+e,f=p+o;$t((()=>Ct(t,!1,"start"))),C((e=>{if(c){if(e>=f)return h(0,1),Ct(t,!1,"end"),--u.r||a(u.c),!1;if(e>=p){const t=l((e-p)/o);h(1-t,t)}}return c}))}return u.r+=1,l(r)?St().then((()=>{r=r(),h()})):h(),{end(e){e&&r.tick&&r.tick(1,0),c&&(s&&it(t,s),c=!1)}}}const Bt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Zt(t,e){t.d(1),e.delete(t.key)}function Ut(t,e){Rt(t,1,1,(()=>{e.delete(t.key)}))}function Ft(t,e){t.f(),Zt(t,e)}function Ht(t,e){t.f(),Ut(t,e)}function Wt(t,e,n,i,o,s,r,a,l,c,u,h){let d=t.length,p=s.length,f=d;const m={};for(;f--;)m[t[f].key]=f;const g=[],_=new Map,v=new Map;for(f=p;f--;){const t=h(o,s,f),a=n(t);let l=r.get(a);l?i&&l.p(t,e):(l=c(a,t),l.c()),_.set(a,g[f]=l),a in m&&v.set(a,Math.abs(f-m[a]))}const y=new Set,w=new Set;function b(t){Dt(t,1),t.m(a,u),r.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],i=e.key,o=n.key;e===n?(u=e.first,d--,p--):_.has(o)?!r.has(i)||y.has(i)?b(e):w.has(o)?d--:v.get(i)>v.get(o)?(w.add(i),b(e)):(y.add(o),d--):(l(n,r),d--)}for(;d--;){const e=t[d];_.has(e.key)||l(e,r)}for(;p;)b(g[p-1]);return g}function Vt(t,e){const n={},i={},o={$$scope:1};let s=t.length;for(;s--;){const r=t[s],a=e[s];if(a){for(const t in r)t in a||(i[t]=1);for(const t in a)o[t]||(n[t]=a[t],o[t]=1);t[s]=a}else for(const t in r)o[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function qt(t){return"object"==typeof t&&null!==t?t:{}}function Kt(t){t&&t.c()}function Gt(t,e,n,i){const{fragment:o,on_mount:r,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,n),i||$t((()=>{const e=r.map(s).filter(l);c?c.push(...e):a(e),t.$$.on_mount=[]})),u.forEach($t)}function Jt(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Yt(t,e,i,o,s,l,c,u=[-1]){const h=tt;at(t);const d=t.$$={fragment:null,ctx:null,props:l,update:n,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:e.context||[]),callbacks:r(),dirty:u,skip_bound:!1,root:e.target||h.$$.root};c&&c(d.root);let p=!1;if(d.ctx=i?i(t,e.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return d.ctx&&s(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),p&&function(t,e){-1===t.$$.dirty[0]&&(mt.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],d.update(),p=!0,a(d.before_update),d.fragment=!!o&&o(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(D)}else d.fragment&&d.fragment.c();e.intro&&Dt(t.$$.fragment),Gt(t,e.target,e.anchor,e.customElement),It()}at(h)}class Xt{$destroy(){Jt(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Qt(t){if(!t)throw Error("Parameter args is required");if(!t.component==!t.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(t.component&&(t.asyncComponent=()=>Promise.resolve(t.component)),"function"!=typeof t.asyncComponent)throw Error("Parameter asyncComponent must be a function");if(t.conditions){Array.isArray(t.conditions)||(t.conditions=[t.conditions]);for(let e=0;e<t.conditions.length;e++)if(!t.conditions[e]||"function"!=typeof t.conditions[e])throw Error("Invalid parameter conditions["+e+"]")}t.loadingComponent&&(t.asyncComponent.loading=t.loadingComponent,t.asyncComponent.loadingParams=t.loadingParams||void 0);return{component:t.asyncComponent,userData:t.userData,conditions:t.conditions&&t.conditions.length?t.conditions:void 0,props:t.props&&Object.keys(t.props).length?t.props:{},_sveltesparouter:!0}}const te=[];function ee(t,e){return{subscribe:ne(t,e).subscribe}}function ne(t,e=n){let i;const o=new Set;function s(e){if(c(t,e)&&(t=e,i)){const e=!te.length;for(const e of o)e[1](),te.push(e,t);if(e){for(let t=0;t<te.length;t+=2)te[t][0](te[t+1]);te.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,a=n){const l=[r,a];return o.add(l),1===o.size&&(i=e(s)||n),r(t),()=>{o.delete(l),0===o.size&&(i(),i=null)}}}}function ie(t,e,i){const o=!Array.isArray(t),s=o?[t]:t,r=e.length<2;return ee(i,(t=>{let i=!1;const c=[];let u=0,h=n;const p=()=>{if(u)return;h();const i=e(o?c[0]:c,t);r?t(i):h=l(i)?i:n},f=s.map(((t,e)=>d(t,(t=>{c[e]=t,u&=~(1<<e),i&&p()}),(()=>{u|=1<<e}))));return i=!0,p(),function(){a(f),h()}}))}function oe(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,i,o,s,r=[],a="",l=t.split("/");for(l[0]||l.shift();o=l.shift();)"*"===(n=o[0])?(r.push("wild"),a+="/(.*)"):":"===n?(i=o.indexOf("?",1),s=o.indexOf(".",1),r.push(o.substring(1,~i?i:~s?s:o.length)),a+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~i?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:r,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}function se(t){let e,n,i;const s=[t[2]];var r=t[0];function a(t){let e={};for(let t=0;t<s.length;t+=1)e=o(e,s[t]);return{props:e}}return r&&(e=new r(a()),e.$on("routeEvent",t[7])),{c(){e&&Kt(e.$$.fragment),n=Z()},m(t,o){e&&Gt(e,t,o),A(t,n,o),i=!0},p(t,i){const o=4&i?Vt(s,[qt(t[2])]):{};if(r!==(r=t[0])){if(e){Ot();const t=e;Rt(t.$$.fragment,1,0,(()=>{Jt(t,1)})),At()}r?(e=new r(a()),e.$on("routeEvent",t[7]),Kt(e.$$.fragment),Dt(e.$$.fragment,1),Gt(e,n.parentNode,n)):e=null}else r&&e.$set(o)},i(t){i||(e&&Dt(e.$$.fragment,t),i=!0)},o(t){e&&Rt(e.$$.fragment,t),i=!1},d(t){t&&D(n),e&&Jt(e,t)}}}function re(t){let e,n,i;const s=[{params:t[1]},t[2]];var r=t[0];function a(t){let e={};for(let t=0;t<s.length;t+=1)e=o(e,s[t]);return{props:e}}return r&&(e=new r(a()),e.$on("routeEvent",t[6])),{c(){e&&Kt(e.$$.fragment),n=Z()},m(t,o){e&&Gt(e,t,o),A(t,n,o),i=!0},p(t,i){const o=6&i?Vt(s,[2&i&&{params:t[1]},4&i&&qt(t[2])]):{};if(r!==(r=t[0])){if(e){Ot();const t=e;Rt(t.$$.fragment,1,0,(()=>{Jt(t,1)})),At()}r?(e=new r(a()),e.$on("routeEvent",t[6]),Kt(e.$$.fragment),Dt(e.$$.fragment,1),Gt(e,n.parentNode,n)):e=null}else r&&e.$set(o)},i(t){i||(e&&Dt(e.$$.fragment,t),i=!0)},o(t){e&&Rt(e.$$.fragment,t),i=!1},d(t){t&&D(n),e&&Jt(e,t)}}}function ae(t){let e,n,i,o;const s=[re,se],r=[];function a(t,e){return t[1]?0:1}return e=a(t),n=r[e]=s[e](t),{c(){n.c(),i=Z()},m(t,n){r[e].m(t,n),A(t,i,n),o=!0},p(t,[o]){let l=e;e=a(t),e===l?r[e].p(t,o):(Ot(),Rt(r[l],1,1,(()=>{r[l]=null})),At(),n=r[e],n?n.p(t,o):(n=r[e]=s[e](t),n.c()),Dt(n,1),n.m(i.parentNode,i))},i(t){o||(Dt(n),o=!0)},o(t){Rt(n),o=!1},d(t){r[e].d(t),t&&D(i)}}}function le(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let i="";return n>-1&&(i=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:i}}const ce=ee(null,(function(t){t(le());const e=()=>{t(le())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));ie(ce,(t=>t.location)),ie(ce,(t=>t.querystring));const ue=ne(void 0);async function he(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");await xt();const e=("#"==t.charAt(0)?"":"#")+t;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch(t){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function de(t,e,n){let{routes:i={}}=e,{prefix:o=""}=e,{restoreScrollState:s=!1}=e;class r{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:i}=oe(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=i}match(t){if(o)if("string"==typeof o){if(!t.startsWith(o))return null;t=t.substr(o.length)||"/"}else if(o instanceof RegExp){const e=t.match(o);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let i=0;for(;i<this._keys.length;){try{n[this._keys[i]]=decodeURIComponent(e[i+1]||"")||null}catch(t){n[this._keys[i]]=null}i++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const a=[];i instanceof Map?i.forEach(((t,e)=>{a.push(new r(e,t))})):Object.keys(i).forEach((t=>{a.push(new r(t,i[t]))}));let l=null,c=null,u={};const h=ht();async function d(t,e){await xt(),h(t,e)}let p=null,f=null;var m;s&&(f=t=>{p=t.state&&t.state.__svelte_spa_router_scrollY?t.state:null},window.addEventListener("popstate",f),m=()=>{p?window.scrollTo(p.__svelte_spa_router_scrollX,p.__svelte_spa_router_scrollY):window.scrollTo(0,0)},lt().$$.after_update.push(m));let g=null,_=null;const v=ce.subscribe((async t=>{g=t;let e=0;for(;e<a.length;){const i=a[e].match(t.location);if(!i){e++;continue}const o={route:a[e].path,location:t.location,querystring:t.querystring,userData:a[e].userData,params:i&&"object"==typeof i&&Object.keys(i).length?i:null};if(!await a[e].checkConditions(o))return n(0,l=null),_=null,void d("conditionsFailed",o);d("routeLoading",Object.assign({},o));const s=a[e].component;if(_!=s){s.loading?(n(0,l=s.loading),_=s,n(1,c=s.loadingParams),n(2,u={}),d("routeLoaded",Object.assign({},o,{component:l,name:l.name,params:c}))):(n(0,l=null),_=null);const e=await s();if(t!=g)return;n(0,l=e&&e.default||e),_=s}return i&&"object"==typeof i&&Object.keys(i).length?n(1,c=i):n(1,c=null),n(2,u=a[e].props),void d("routeLoaded",Object.assign({},o,{component:l,name:l.name,params:c})).then((()=>{ue.set(c)}))}n(0,l=null),_=null,ue.set(void 0)}));return ut((()=>{v(),f&&window.removeEventListener("popstate",f)})),t.$$set=t=>{"routes"in t&&n(3,i=t.routes),"prefix"in t&&n(4,o=t.prefix),"restoreScrollState"in t&&n(5,s=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=s?"manual":"auto")},[l,c,u,i,o,s,function(e){ft.call(this,t,e)},function(e){ft.call(this,t,e)}]}class pe extends Xt{constructor(t){super(),Yt(this,t,de,ae,c,{routes:3,prefix:4,restoreScrollState:5})}}function fe(t){const e=t-1;return e*e*e+1}function me(t,{delay:e=0,duration:n=400,easing:o=i}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:t=>"opacity: "+t*s}}function ge(t,{delay:e=0,duration:n=400,easing:i=fe,x:o=0,y:s=0,opacity:r=0}={}){const a=getComputedStyle(t),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-r);return{delay:e,duration:n,easing:i,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*o}px, ${(1-t)*s}px);\n\t\t\topacity: ${l-u*e}`}}const _e=function(t=[]){const e=ne(t),{set:n,update:i,subscribe:o}=e;let s={duration:3e3,placement:"bottom-right",type:"info",theme:"dark"};function r(t){const{duration:n=3e3,placement:o="bottom-right",type:r="info",theme:a="dark",...l}={...s,...t},c=Date.now(),u={...l,uid:c,placement:o,type:r,theme:a,duration:n,remove:()=>{i((t=>t.filter((t=>t.uid!==c))))},update:t=>{delete t.uid;const n=p(e)?.findIndex((t=>t?.uid===c));n>-1&&i((e=>[...e.slice(0,n),{...e[n],...t},...e.slice(n+1)]))}};return i((t=>[...t,u])),n>0&&setTimeout((()=>{u.remove(),"function"==typeof u.onRemove&&u.onRemove()}),n),u}return{subscribe:o,add:r,success:ve("success",r),info:ve("info",r),error:ve("error",r),warning:ve("warning",r),clearAll:function(){n([])},clearLast:function(){i((t=>t.slice(0,t.length-1)))},getById:function(t){return p(e)?.find((e=>e?.uid===t))},setDefaults:function(t){s={...s,...t}}}}([]);function ve(t,e){return function(){if("object"==typeof arguments[0]){return e({...arguments[0],type:t})}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){return e({...arguments[2]||{},type:t,title:arguments[0],description:arguments[1]})}if("string"==typeof arguments[0]){return e({...arguments[1]||{},type:t,description:arguments[0]})}}}function ye(t,{from:e,to:n},i={}){const o=getComputedStyle(t),s="none"===o.transform?"":o.transform,[r,a]=o.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*r/n.width-(n.left+r),u=e.top+e.height*a/n.height-(n.top+a),{delay:h=0,duration:d=(t=>120*Math.sqrt(t)),easing:p=fe}=i;return{delay:h,duration:l(d)?d(Math.sqrt(c*c+u*u)):d,easing:p,css:(t,i)=>{const o=i*c,r=i*u,a=t+i*e.width/n.width,l=t+i*e.height/n.height;return`transform: ${s} translate(${o}px, ${r}px) scale(${a}, ${l});`}}}function we(t,e,n){const i=t.slice();return i[1]=e[n],i}function be(t,e,n){const i=t.slice();return i[14]=e[n],i}const xe=t=>({data:4&t}),$e=t=>({data:t[14]});function ke(t){let e;const n=t[10].default,i=m(n,t,t[9],$e);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||516&o)&&v(i,n,t,t[9],e?_(n,t[9],o,xe):y(t[9]),$e)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function Te(t){let e,n,i;var o=t[14].component;function s(t){return{props:{data:t[14]}}}return o&&(e=new o(s(t))),{c(){e&&Kt(e.$$.fragment),n=Z()},m(t,o){e&&Gt(e,t,o),A(t,n,o),i=!0},p(t,i){const r={};if(4&i&&(r.data=t[14]),o!==(o=t[14].component)){if(e){Ot();const t=e;Rt(t.$$.fragment,1,0,(()=>{Jt(t,1)})),At()}o?(e=new o(s(t)),Kt(e.$$.fragment),Dt(e.$$.fragment,1),Gt(e,n.parentNode,n)):e=null}else o&&e.$set(r)},i(t){i||(e&&Dt(e.$$.fragment,t),i=!0)},o(t){e&&Rt(e.$$.fragment,t),i=!1},d(t){t&&D(n),e&&Jt(e,t)}}}function Ie(t,e){let i,o,s,r,a,l,c,u,h=n;const d=[Te,ke],p=[];function f(t,e){return t[14].component?0:1}return o=f(e),s=p[o]=d[o](e),{key:t,first:null,c(){i=N("li"),s.c(),r=B(),F(i,"class","svelte-1rg6zyw"),this.first=i},m(t,e){A(t,i,e),p[o].m(i,null),E(i,r),u=!0},p(t,n){let a=o;o=f(e=t),o===a?p[o].p(e,n):(Ot(),Rt(p[a],1,1,(()=>{p[a]=null})),At(),s=p[o],s?s.p(e,n):(s=p[o]=d[o](e),s.c()),Dt(s,1),s.m(i,r))},r(){c=i.getBoundingClientRect()},f(){st(i),h(),rt(i,c)},a(){h(),h=ot(i,c,ye,{})},i(t){u||(Dt(s),$t((()=>{l&&l.end(1),a=zt(i,me,{duration:500}),a.start()})),u=!0)},o(t){Rt(s),a&&a.invalidate(),l=jt(i,ge,{y:e[4][e[14].placement],duration:1e3}),u=!1},d(t){t&&D(i),p[o].d(),t&&l&&l.end()}}}function Pe(t){let e,n,i,o,s,r=[],a=new Map;function l(...e){return t[11](t[1],...e)}let c=t[2].filter(l).reverse();const u=t=>t[14].uid;for(let e=0;e<c.length;e+=1){let n=be(t,c,e),i=u(n);a.set(i,r[e]=Ie(i,n))}return{c(){e=N("div"),n=N("ul");for(let t=0;t<r.length;t+=1)r[t].c();i=B(),F(n,"class","svelte-1rg6zyw"),F(e,"class",o="toast-container "+t[1]+" svelte-1rg6zyw"),K(e,"width",t[0])},m(t,o){A(t,e,o),E(e,n);for(let t=0;t<r.length;t+=1)r[t].m(n,null);E(e,i),s=!0},p(i,o){if(t=i,540&o){c=t[2].filter(l).reverse(),Ot();for(let t=0;t<r.length;t+=1)r[t].r();r=Wt(r,o,u,1,t,c,a,n,Ht,Ie,null,be);for(let t=0;t<r.length;t+=1)r[t].a();At()}(!s||1&o)&&K(e,"width",t[0])},i(t){if(!s){for(let t=0;t<c.length;t+=1)Dt(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)Rt(r[t]);s=!1},d(t){t&&D(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Le(t){let e,n,i=t[3],o=[];for(let e=0;e<i.length;e+=1)o[e]=Pe(we(t,i,e));const s=t=>Rt(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=Z()},m(t,i){for(let e=0;e<o.length;e+=1)o[e].m(t,i);A(t,e,i),n=!0},p(t,[n]){if(541&n){let r;for(i=t[3],r=0;r<i.length;r+=1){const s=we(t,i,r);o[r]?(o[r].p(s,n),Dt(o[r],1)):(o[r]=Pe(s),o[r].c(),Dt(o[r],1),o[r].m(e.parentNode,e))}for(Ot(),r=i.length;r<o.length;r+=1)s(r);At()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)Dt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)Rt(o[t]);n=!1},d(t){R(o,t),t&&D(e)}}}function Se(t,e,n){let i;f(t,_e,(t=>n(2,i=t)));let{$$slots:o={},$$scope:s}=e,{theme:r="dark"}=e,{placement:a="bottom-right"}=e,{type:l="info"}=e,{showProgress:c=!1}=e,{duration:u=3e3}=e,{width:h="320px"}=e;ct((()=>{_e.setDefaults({placement:a,showProgress:c,theme:r,duration:u,type:l})}));return t.$$set=t=>{"theme"in t&&n(5,r=t.theme),"placement"in t&&n(1,a=t.placement),"type"in t&&n(6,l=t.type),"showProgress"in t&&n(7,c=t.showProgress),"duration"in t&&n(8,u=t.duration),"width"in t&&n(0,h=t.width),"$$scope"in t&&n(9,s=t.$$scope)},[h,a,i,["bottom-right","bottom-left","top-right","top-left","top-center","bottom-center","center-center"],{"bottom-right":400,"top-right":-400,"bottom-left":400,"top-left":-400,"bottom-center":400,"top-center":-400,"center-center":-800},r,l,c,u,s,o,(t,e)=>e.placement===t]}class Ce extends Xt{constructor(t){super(),Yt(this,t,Se,Le,c,{theme:5,placement:1,type:6,showProgress:7,duration:8,width:0})}}function Ee(t){return"[object Date]"===Object.prototype.toString.call(t)}function Me(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>Me(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(Ee(t)&&Ee(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),i={};return n.forEach((n=>{i[n]=Me(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=i[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}const Oe=t=>({}),Ae=t=>({}),De=t=>({}),Re=t=>({}),Ne=t=>({}),ze=t=>({});function je(t){let e,n,i;return{c(){e=z("svg"),n=z("path"),i=z("path"),F(n,"d","M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1\ts1,0.4,1,1S10.6,16,10,16z"),F(i,"d","M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1s1,0.4,1,1S10.6,16,10,16z"),F(i,"data-icon-path","inner-path"),F(i,"opacity","0"),F(e,"class","st-toast-icon svelte-is9c7e"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"width","20"),F(e,"height","20"),F(e,"viewBox","0 0 20 20"),F(e,"aria-hidden","true")},m(t,o){A(t,e,o),E(e,n),E(e,i)},d(t){t&&D(e)}}}function Be(t){let e,n,i;return{c(){e=z("svg"),n=z("path"),i=z("path"),F(n,"d","M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"),F(i,"d","M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"),F(i,"data-icon-path","inner-path"),F(i,"opacity","0"),F(e,"class","st-toast-icon svelte-is9c7e"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"width","20"),F(e,"height","20"),F(e,"viewBox","0 0 20 20"),F(e,"aria-hidden","true")},m(t,o){A(t,e,o),E(e,n),E(e,i)},d(t){t&&D(e)}}}function Ze(t){let e,n;return{c(){e=z("svg"),n=z("path"),F(n,"d","M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,16,7Zm4,17.12H12V21.88h2.88V15.12H13V12.88h4.13v9H20Z"),F(e,"class","st-toast-icon svelte-is9c7e"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"width","20"),F(e,"height","20"),F(e,"viewBox","0 0 32 32"),F(e,"aria-hidden","true")},m(t,i){A(t,e,i),E(e,n)},d(t){t&&D(e)}}}function Ue(t){let e,n,i;return{c(){e=z("svg"),n=z("path"),i=z("path"),F(n,"d","M10,1c-4.9,0-9,4.1-9,9s4.1,9,9,9s9-4,9-9S15,1,10,1z M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"),F(i,"fill","none"),F(i,"d","M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"),F(i,"data-icon-path","inner-path"),F(i,"opacity","0"),F(e,"class","st-toast-icon svelte-is9c7e"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"width","20"),F(e,"height","20"),F(e,"viewBox","0 0 20 20"),F(e,"aria-hidden","true")},m(t,o){A(t,e,o),E(e,n),E(e,i)},d(t){t&&D(e)}}}function Fe(t){let e,n,i=t[1].title+"";return{c(){e=N("h3"),n=j(i),F(e,"class","st-toast-title svelte-is9c7e")},m(t,i){A(t,e,i),E(e,n)},p(t,e){2&e&&i!==(i=t[1].title+"")&&V(n,i)},d(t){t&&D(e)}}}function He(t){let e;return{c(){e=N("progress"),K(e,"height",t[1].duration>0?"4px":0),e.value=t[2],F(e,"class","svelte-is9c7e")},m(t,n){A(t,e,n)},p(t,n){2&n&&K(e,"height",t[1].duration>0?"4px":0),4&n&&(e.value=t[2])},d(t){t&&D(e)}}}function We(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,g,w,b=t[1].description+"";const x=t[7].icon,$=m(x,t,t[6],ze),k=$||function(t){let e;function n(t,e){return"success"===t[1].type?Ue:"info"===t[1].type?Ze:"error"===t[1].type?Be:je}let i=n(t),o=i(t);return{c(){o.c(),e=Z()},m(t,n){o.m(t,n),A(t,e,n)},p(t,s){i!==(i=n(t))&&(o.d(1),o=i(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&D(e)}}}(t);let T=t[1].title&&Fe(t);const I=t[7].extra,P=m(I,t,t[6],Re),L=t[7]["close-icon"],S=m(L,t,t[6],Ae),C=S||function(t){let e,n;return{c(){e=z("svg"),n=z("path"),F(n,"d","M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"class","bx--toast-notification__close-icon svelte-is9c7e"),F(e,"width","20"),F(e,"height","20"),F(e,"viewBox","0 0 32 32"),F(e,"aria-hidden","true")},m(t,i){A(t,e,i),E(e,n)},d(t){t&&D(e)}}}();let M=t[1].showProgress&&He(t);return{c(){e=N("div"),k&&k.c(),n=B(),i=N("div"),T&&T.c(),o=B(),s=N("p"),r=j(b),l=B(),c=N("div"),P&&P.c(),u=B(),h=N("button"),C&&C.c(),d=B(),M&&M.c(),F(s,"class","st-toast-description svelte-is9c7e"),F(c,"class","st-toast-extra"),F(i,"class","st-toast-details svelte-is9c7e"),F(h,"class","st-toast-close-btn svelte-is9c7e"),F(h,"type","button"),F(h,"aria-label","close"),F(e,"class",p="st-toast flat "+(t[1].theme||t[0])+" "+(t[1].type||"info")+" svelte-is9c7e"),F(e,"role","alert"),F(e,"aria-live","assertive"),F(e,"aria-atomic","true")},m(a,p){A(a,e,p),k&&k.m(e,null),E(e,n),E(e,i),T&&T.m(i,null),E(i,o),E(i,s),E(s,r),E(i,l),E(i,c),P&&P.m(c,null),E(e,u),E(e,h),C&&C.m(h,null),E(e,d),M&&M.m(e,null),f=!0,g||(w=[U(h,"click",t[4]),U(e,"click",t[5])],g=!0)},p(t,[n]){$?$.p&&(!f||64&n)&&v($,x,t,t[6],f?_(x,t[6],n,Ne):y(t[6]),ze):k&&k.p&&(!f||2&n)&&k.p(t,f?n:-1),t[1].title?T?T.p(t,n):(T=Fe(t),T.c(),T.m(i,o)):T&&(T.d(1),T=null),(!f||2&n)&&b!==(b=t[1].description+"")&&V(r,b),P&&P.p&&(!f||64&n)&&v(P,I,t,t[6],f?_(I,t[6],n,De):y(t[6]),Re),S&&S.p&&(!f||64&n)&&v(S,L,t,t[6],f?_(L,t[6],n,Oe):y(t[6]),Ae),t[1].showProgress?M?M.p(t,n):(M=He(t),M.c(),M.m(e,null)):M&&(M.d(1),M=null),(!f||3&n&&p!==(p="st-toast flat "+(t[1].theme||t[0])+" "+(t[1].type||"info")+" svelte-is9c7e"))&&F(e,"class",p)},i(t){f||(Dt(k,t),Dt(P,t),Dt(C,t),f=!0)},o(t){Rt(k,t),Rt(P,t),Rt(C,t),f=!1},d(t){t&&D(e),k&&k.d(t),T&&T.d(),P&&P.d(t),C&&C.d(t),M&&M.d(),g=!1,a(w)}}}function Ve(t,e,n){let s,{$$slots:r={},$$scope:a}=e,{theme:l="light"}=e,{data:c={}}=e;const u=function(t,e={}){const n=ne(t);let s,r=t;function a(a,l){if(null==t)return n.set(t=a),Promise.resolve();r=a;let c=s,u=!1,{delay:h=0,duration:d=400,easing:p=i,interpolate:f=Me}=o(o({},e),l);if(0===d)return c&&(c.abort(),c=null),n.set(t=r),Promise.resolve();const m=T()+h;let g;return s=C((e=>{if(e<m)return!0;u||(g=f(t,a),"function"==typeof d&&(d=d(t,a)),u=!0),c&&(c.abort(),c=null);const i=e-m;return i>d?(n.set(t=a),!1):(n.set(t=g(p(i/d))),!0)})),s.promise}return{set:a,update:(e,n)=>a(e(r,t),n),subscribe:n.subscribe}}(1,{duration:c.duration,easing:i});f(t,u,(t=>n(2,s=t))),ct((()=>{u.set(0,{duration:c.duration})}));return t.$$set=t=>{"theme"in t&&n(0,l=t.theme),"data"in t&&n(1,c=t.data),"$$scope"in t&&n(6,a=t.$$scope)},[l,c,s,u,t=>{t.stopPropagation(),c.remove(),"function"==typeof c.onRemove&&c.onRemove()},()=>{"function"==typeof c.onClick&&c.onClick()},a,r]}class qe extends Xt{constructor(t){super(),Yt(this,t,Ve,We,c,{theme:0,data:1})}}function Ke(t){let e="";if("string"==typeof t||"number"==typeof t)e+=t;else if("object"==typeof t)if(Array.isArray(t))e=t.map(Ke).filter(Boolean).join(" ");else for(let n in t)t[n]&&(e&&(e+=" "),e+=n);return e}function Ge(...t){return t.map(Ke).filter(Boolean).join(" ")}function Je(t){if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),o=Number.parseFloat(n);return i||o?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0}function Ye(t){t.style.height=`${t.getBoundingClientRect().height}px`,t.classList.add("collapsing"),t.classList.remove("collapse","show");return{duration:Je(t),tick:e=>{e>0?t.style.height="":0===e&&(t.classList.remove("collapsing"),t.classList.add("collapse"))}}}function Xe(t){t.classList.add("collapsing"),t.classList.remove("collapse","show"),t.style.height=0;return{duration:Je(t),tick:e=>{e<1?t.style.height=`${t.scrollHeight}px`:(t.classList.remove("collapsing"),t.classList.add("collapse","show"),t.style.height="")}}}const Qe=["touchstart","click"];function tn(t){let e,n,i,s,r,c,u;const h=t[15].default,d=m(h,t,t[14],null);let p=[{style:n=t[1]?void 0:"overflow: hidden;"},t[8],{class:t[7]}],f={};for(let t=0;t<p.length;t+=1)f=o(f,p[t]);return{c(){e=N("div"),d&&d.c(),H(e,f)},m(n,i){A(n,e,i),d&&d.m(e,null),r=!0,c||(u=[U(e,"introstart",t[16]),U(e,"introend",t[17]),U(e,"outrostart",t[18]),U(e,"outroend",t[19]),U(e,"introstart",(function(){l(t[2])&&t[2].apply(this,arguments)})),U(e,"introend",(function(){l(t[3])&&t[3].apply(this,arguments)})),U(e,"outrostart",(function(){l(t[4])&&t[4].apply(this,arguments)})),U(e,"outroend",(function(){l(t[5])&&t[5].apply(this,arguments)}))],c=!0)},p(i,o){t=i,d&&d.p&&(!r||16384&o)&&v(d,h,t,t[14],r?_(h,t[14],o,null):y(t[14]),null),H(e,f=Vt(p,[(!r||2&o&&n!==(n=t[1]?void 0:"overflow: hidden;"))&&{style:n},256&o&&t[8],(!r||128&o)&&{class:t[7]}]))},i(t){r||(Dt(d,t),$t((()=>{s&&s.end(1),i=zt(e,Xe,{}),i.start()})),r=!0)},o(t){Rt(d,t),i&&i.invalidate(),s=jt(e,Ye,{}),r=!1},d(t){t&&D(e),d&&d.d(t),t&&s&&s.end(),c=!1,a(u)}}}function en(t){let e,n,i,o;$t(t[20]);let s=t[0]&&tn(t);return{c(){s&&s.c(),e=Z()},m(r,a){s&&s.m(r,a),A(r,e,a),n=!0,i||(o=U(window,"resize",t[20]),i=!0)},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&Dt(s,1)):(s=tn(t),s.c(),Dt(s,1),s.m(e.parentNode,e)):s&&(Ot(),Rt(s,1,1,(()=>{s=null})),At())},i(t){n||(Dt(s),n=!0)},o(t){Rt(s),n=!1},d(t){s&&s.d(t),t&&D(e),i=!1,o()}}}function nn(t,e,n){let i;const s=["isOpen","class","navbar","onEntering","onEntered","onExiting","onExited","expand","toggler"];let r=b(e,s),{$$slots:a={},$$scope:l}=e;const c=ht();let{isOpen:u=!1}=e,{class:h=""}=e,{navbar:d=!1}=e,{onEntering:p=(()=>c("opening"))}=e,{onEntered:f=(()=>c("open"))}=e,{onExiting:m=(()=>c("closing"))}=e,{onExited:g=(()=>c("close"))}=e,{expand:_=!1}=e,{toggler:v=null}=e;ct((()=>((t,e)=>{let n;if("string"==typeof t&&"undefined"!=typeof window&&document&&document.createElement){let i=document.querySelectorAll(t);if(i.length||(i=document.querySelectorAll(`#${t}`)),!i.length)throw new Error(`The target '${t}' could not be identified in the dom, tip: check spelling`);Qe.forEach((t=>{i.forEach((n=>{n.addEventListener(t,e)}))})),n=()=>{Qe.forEach((t=>{i.forEach((n=>{n.removeEventListener(t,e)}))}))}}return()=>{"function"==typeof n&&(n(),n=void 0)}})(v,(t=>{n(0,u=!u),t.preventDefault()}))));let y=0,x=!1;const $={};function k(){c("update",u)}return $.xs=0,$.sm=576,$.md=768,$.lg=992,$.xl=1200,t.$$set=t=>{e=o(o({},e),w(t)),n(8,r=b(e,s)),"isOpen"in t&&n(0,u=t.isOpen),"class"in t&&n(9,h=t.class),"navbar"in t&&n(1,d=t.navbar),"onEntering"in t&&n(2,p=t.onEntering),"onEntered"in t&&n(3,f=t.onEntered),"onExiting"in t&&n(4,m=t.onExiting),"onExited"in t&&n(5,g=t.onExited),"expand"in t&&n(10,_=t.expand),"toggler"in t&&n(11,v=t.toggler),"$$scope"in t&&n(14,l=t.$$scope)},t.$$.update=()=>{514&t.$$.dirty&&n(7,i=Ge(h,d&&"navbar-collapse")),13379&t.$$.dirty&&d&&_&&(y>=$[_]&&!u?(n(0,u=!0),n(12,x=!0),k()):y<$[_]&&x&&(n(0,u=!1),n(12,x=!1),k()))},[u,d,p,f,m,g,y,i,r,h,_,v,x,$,l,a,function(e){ft.call(this,t,e)},function(e){ft.call(this,t,e)},function(e){ft.call(this,t,e)},function(e){ft.call(this,t,e)},function(){n(6,y=window.innerWidth)}]}class on extends Xt{constructor(t){super(),Yt(this,t,nn,en,c,{isOpen:0,class:9,navbar:1,onEntering:2,onEntered:3,onExiting:4,onExited:5,expand:10,toggler:11})}}function sn(t){let e,n,i,s,r;const a=t[18].default,l=m(a,t,t[17],null),c=l||function(t){let e,n,i,o;const s=[ln,an],r=[];function a(t,e){return t[1]?0:1}return e=a(t),n=r[e]=s[e](t),{c(){n.c(),i=Z()},m(t,n){r[e].m(t,n),A(t,i,n),o=!0},p(t,o){let l=e;e=a(t),e===l?r[e].p(t,o):(Ot(),Rt(r[l],1,1,(()=>{r[l]=null})),At(),n=r[e],n?n.p(t,o):(n=r[e]=s[e](t),n.c()),Dt(n,1),n.m(i.parentNode,i))},i(t){o||(Dt(n),o=!0)},o(t){Rt(n),o=!1},d(t){r[e].d(t),t&&D(i)}}}(t);let u=[t[9],{class:t[7]},{disabled:t[2]},{value:t[5]},{"aria-label":n=t[8]||t[6]},{style:t[4]}],h={};for(let t=0;t<u.length;t+=1)h=o(h,u[t]);return{c(){e=N("button"),c&&c.c(),H(e,h)},m(n,o){A(n,e,o),c&&c.m(e,null),e.autofocus&&e.focus(),t[22](e),i=!0,s||(r=U(e,"click",t[20]),s=!0)},p(t,o){l?l.p&&(!i||131072&o)&&v(l,a,t,t[17],i?_(a,t[17],o,null):y(t[17]),null):c&&c.p&&(!i||131074&o)&&c.p(t,i?o:-1),H(e,h=Vt(u,[512&o&&t[9],(!i||128&o)&&{class:t[7]},(!i||4&o)&&{disabled:t[2]},(!i||32&o)&&{value:t[5]},(!i||320&o&&n!==(n=t[8]||t[6]))&&{"aria-label":n},(!i||16&o)&&{style:t[4]}]))},i(t){i||(Dt(c,t),i=!0)},o(t){Rt(c,t),i=!1},d(n){n&&D(e),c&&c.d(n),t[22](null),s=!1,r()}}}function rn(t){let e,n,i,s,r,a,l;const c=[un,cn],u=[];function h(t,e){return t[1]?0:1}n=h(t),i=u[n]=c[n](t);let d=[t[9],{class:t[7]},{disabled:t[2]},{href:t[3]},{"aria-label":s=t[8]||t[6]},{style:t[4]}],p={};for(let t=0;t<d.length;t+=1)p=o(p,d[t]);return{c(){e=N("a"),i.c(),H(e,p)},m(i,o){A(i,e,o),u[n].m(e,null),t[21](e),r=!0,a||(l=U(e,"click",t[19]),a=!0)},p(t,o){let a=n;n=h(t),n===a?u[n].p(t,o):(Ot(),Rt(u[a],1,1,(()=>{u[a]=null})),At(),i=u[n],i?i.p(t,o):(i=u[n]=c[n](t),i.c()),Dt(i,1),i.m(e,null)),H(e,p=Vt(d,[512&o&&t[9],(!r||128&o)&&{class:t[7]},(!r||4&o)&&{disabled:t[2]},(!r||8&o)&&{href:t[3]},(!r||320&o&&s!==(s=t[8]||t[6]))&&{"aria-label":s},(!r||16&o)&&{style:t[4]}]))},i(t){r||(Dt(i),r=!0)},o(t){Rt(i),r=!1},d(i){i&&D(e),u[n].d(),t[21](null),a=!1,l()}}}function an(t){let e;const n=t[18].default,i=m(n,t,t[17],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||131072&o)&&v(i,n,t,t[17],e?_(n,t[17],o,null):y(t[17]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function ln(t){let e;return{c(){e=j(t[1])},m(t,n){A(t,e,n)},p(t,n){2&n&&V(e,t[1])},i:n,o:n,d(t){t&&D(e)}}}function cn(t){let e;const n=t[18].default,i=m(n,t,t[17],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||131072&o)&&v(i,n,t,t[17],e?_(n,t[17],o,null):y(t[17]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function un(t){let e;return{c(){e=j(t[1])},m(t,n){A(t,e,n)},p(t,n){2&n&&V(e,t[1])},i:n,o:n,d(t){t&&D(e)}}}function hn(t){let e,n,i,o;const s=[rn,sn],r=[];function a(t,e){return t[3]?0:1}return e=a(t),n=r[e]=s[e](t),{c(){n.c(),i=Z()},m(t,n){r[e].m(t,n),A(t,i,n),o=!0},p(t,[o]){let l=e;e=a(t),e===l?r[e].p(t,o):(Ot(),Rt(r[l],1,1,(()=>{r[l]=null})),At(),n=r[e],n?n.p(t,o):(n=r[e]=s[e](t),n.c()),Dt(n,1),n.m(i.parentNode,i))},i(t){o||(Dt(n),o=!0)},o(t){Rt(n),o=!1},d(t){r[e].d(t),t&&D(i)}}}function dn(t,e,n){let i,s,r;const a=["class","active","block","children","close","color","disabled","href","inner","outline","size","style","value"];let l=b(e,a),{$$slots:c={},$$scope:u}=e,{class:h=""}=e,{active:d=!1}=e,{block:p=!1}=e,{children:f}=e,{close:m=!1}=e,{color:g="secondary"}=e,{disabled:_=!1}=e,{href:v=""}=e,{inner:y}=e,{outline:x=!1}=e,{size:$=null}=e,{style:k=""}=e,{value:T=""}=e;return t.$$set=t=>{n(23,e=o(o({},e),w(t))),n(9,l=b(e,a)),"class"in t&&n(10,h=t.class),"active"in t&&n(11,d=t.active),"block"in t&&n(12,p=t.block),"children"in t&&n(1,f=t.children),"close"in t&&n(13,m=t.close),"color"in t&&n(14,g=t.color),"disabled"in t&&n(2,_=t.disabled),"href"in t&&n(3,v=t.href),"inner"in t&&n(0,y=t.inner),"outline"in t&&n(15,x=t.outline),"size"in t&&n(16,$=t.size),"style"in t&&n(4,k=t.style),"value"in t&&n(5,T=t.value),"$$scope"in t&&n(17,u=t.$$scope)},t.$$.update=()=>{n(8,i=e["aria-label"]),130048&t.$$.dirty&&n(7,s=Ge(h,m?"btn-close":"btn",m||`btn${x?"-outline":""}-${g}`,!!$&&`btn-${$}`,!!p&&"d-block w-100",{active:d})),8192&t.$$.dirty&&n(6,r=m?"Close":null)},e=w(e),[y,f,_,v,k,T,r,s,i,l,h,d,p,m,g,x,$,u,c,function(e){ft.call(this,t,e)},function(e){ft.call(this,t,e)},function(t){gt[t?"unshift":"push"]((()=>{y=t,n(0,y)}))},function(t){gt[t?"unshift":"push"]((()=>{y=t,n(0,y)}))}]}class pn extends Xt{constructor(t){super(),Yt(this,t,dn,hn,c,{class:10,active:11,block:12,children:1,close:13,color:14,disabled:2,href:3,inner:0,outline:15,size:16,style:4,value:5})}}function fn(t){let e,n;const i=t[10].default,s=m(i,t,t[9],null);let r=[t[1],{class:t[0]}],a={};for(let t=0;t<r.length;t+=1)a=o(a,r[t]);return{c(){e=N("div"),s&&s.c(),H(e,a)},m(t,i){A(t,e,i),s&&s.m(e,null),n=!0},p(t,[o]){s&&s.p&&(!n||512&o)&&v(s,i,t,t[9],n?_(i,t[9],o,null):y(t[9]),null),H(e,a=Vt(r,[2&o&&t[1],(!n||1&o)&&{class:t[0]}]))},i(t){n||(Dt(s,t),n=!0)},o(t){Rt(s,t),n=!1},d(t){t&&D(e),s&&s.d(t)}}}function mn(t,e,n){let i;const s=["class","sm","md","lg","xl","xxl","fluid"];let r=b(e,s),{$$slots:a={},$$scope:l}=e,{class:c=""}=e,{sm:u}=e,{md:h}=e,{lg:d}=e,{xl:p}=e,{xxl:f}=e,{fluid:m=!1}=e;return t.$$set=t=>{e=o(o({},e),w(t)),n(1,r=b(e,s)),"class"in t&&n(2,c=t.class),"sm"in t&&n(3,u=t.sm),"md"in t&&n(4,h=t.md),"lg"in t&&n(5,d=t.lg),"xl"in t&&n(6,p=t.xl),"xxl"in t&&n(7,f=t.xxl),"fluid"in t&&n(8,m=t.fluid),"$$scope"in t&&n(9,l=t.$$scope)},t.$$.update=()=>{508&t.$$.dirty&&n(0,i=Ge(c,{"container-sm":u,"container-md":h,"container-lg":d,"container-xl":p,"container-xxl":f,"container-fluid":m,container:!(u||h||d||p||f||m)}))},[i,r,c,u,h,d,p,f,m,l,a]}class gn extends Xt{constructor(t){super(),Yt(this,t,mn,fn,c,{class:2,sm:3,md:4,lg:5,xl:6,xxl:7,fluid:8})}}function _n(t){let e,n;const i=t[12].default,s=m(i,t,t[11],null);let r=[t[1],{class:t[0]}],a={};for(let t=0;t<r.length;t+=1)a=o(a,r[t]);return{c(){e=N("ul"),s&&s.c(),H(e,a)},m(t,i){A(t,e,i),s&&s.m(e,null),n=!0},p(t,[o]){s&&s.p&&(!n||2048&o)&&v(s,i,t,t[11],n?_(i,t[11],o,null):y(t[11]),null),H(e,a=Vt(r,[2&o&&t[1],(!n||1&o)&&{class:t[0]}]))},i(t){n||(Dt(s,t),n=!0)},o(t){Rt(s,t),n=!1},d(t){t&&D(e),s&&s.d(t)}}}function vn(t,e,n){let i;const s=["class","tabs","pills","vertical","horizontal","justified","fill","navbar","card"];let r=b(e,s),{$$slots:a={},$$scope:l}=e,{class:c=""}=e,{tabs:u=!1}=e,{pills:h=!1}=e,{vertical:d=!1}=e,{horizontal:p=""}=e,{justified:f=!1}=e,{fill:m=!1}=e,{navbar:g=!1}=e,{card:_=!1}=e;return t.$$set=t=>{e=o(o({},e),w(t)),n(1,r=b(e,s)),"class"in t&&n(2,c=t.class),"tabs"in t&&n(3,u=t.tabs),"pills"in t&&n(4,h=t.pills),"vertical"in t&&n(5,d=t.vertical),"horizontal"in t&&n(6,p=t.horizontal),"justified"in t&&n(7,f=t.justified),"fill"in t&&n(8,m=t.fill),"navbar"in t&&n(9,g=t.navbar),"card"in t&&n(10,_=t.card),"$$scope"in t&&n(11,l=t.$$scope)},t.$$.update=()=>{2044&t.$$.dirty&&n(0,i=Ge(c,g?"navbar-nav":"nav",!!p&&`justify-content-${p}`,function(t){return!1!==t&&(!0===t||"xs"===t?"flex-column":`flex-${t}-column`)}(d),{"nav-tabs":u,"card-header-tabs":_&&u,"nav-pills":h,"card-header-pills":_&&h,"nav-justified":f,"nav-fill":m}))},[i,r,c,u,h,d,p,f,m,g,_,l,a]}class yn extends Xt{constructor(t){super(),Yt(this,t,vn,_n,c,{class:2,tabs:3,pills:4,vertical:5,horizontal:6,justified:7,fill:8,navbar:9,card:10})}}function wn(t){let e;const n=t[10].default,i=m(n,t,t[11],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||2048&o)&&v(i,n,t,t[11],e?_(n,t[11],o,null):y(t[11]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function bn(t){let e,n;return e=new gn({props:{fluid:"fluid"===t[0],$$slots:{default:[xn]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.fluid="fluid"===t[0]),2048&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function xn(t){let e;const n=t[10].default,i=m(n,t,t[11],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||2048&o)&&v(i,n,t,t[11],e?_(n,t[11],o,null):y(t[11]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function $n(t){let e,n,i,s;const r=[bn,wn],a=[];function l(t,e){return t[0]?0:1}n=l(t),i=a[n]=r[n](t);let c=[t[2],{class:t[1]}],u={};for(let t=0;t<c.length;t+=1)u=o(u,c[t]);return{c(){e=N("nav"),i.c(),H(e,u)},m(t,i){A(t,e,i),a[n].m(e,null),s=!0},p(t,[o]){let h=n;n=l(t),n===h?a[n].p(t,o):(Ot(),Rt(a[h],1,1,(()=>{a[h]=null})),At(),i=a[n],i?i.p(t,o):(i=a[n]=r[n](t),i.c()),Dt(i,1),i.m(e,null)),H(e,u=Vt(c,[4&o&&t[2],(!s||2&o)&&{class:t[1]}]))},i(t){s||(Dt(i),s=!0)},o(t){Rt(i),s=!1},d(t){t&&D(e),a[n].d()}}}function kn(t,e,n){let i;const s=["class","container","color","dark","expand","fixed","light","sticky"];let r=b(e,s),{$$slots:a={},$$scope:l}=e,{class:c=""}=e,{container:u="fluid"}=e,{color:h=""}=e,{dark:d=!1}=e,{expand:p=""}=e,{fixed:f=""}=e,{light:m=!1}=e,{sticky:g=""}=e;return t.$$set=t=>{e=o(o({},e),w(t)),n(2,r=b(e,s)),"class"in t&&n(3,c=t.class),"container"in t&&n(0,u=t.container),"color"in t&&n(4,h=t.color),"dark"in t&&n(5,d=t.dark),"expand"in t&&n(6,p=t.expand),"fixed"in t&&n(7,f=t.fixed),"light"in t&&n(8,m=t.light),"sticky"in t&&n(9,g=t.sticky),"$$scope"in t&&n(11,l=t.$$scope)},t.$$.update=()=>{1016&t.$$.dirty&&n(1,i=Ge(c,"navbar",function(t){return!1!==t&&(!0===t||"xs"===t?"navbar-expand":`navbar-expand-${t}`)}(p),{"navbar-light":m,"navbar-dark":d,[`bg-${h}`]:h,[`fixed-${f}`]:f,[`sticky-${g}`]:g}))},[u,i,r,c,h,d,p,f,m,g,a,l]}class Tn extends Xt{constructor(t){super(),Yt(this,t,kn,$n,c,{class:3,container:0,color:4,dark:5,expand:6,fixed:7,light:8,sticky:9})}}function In(t){let e,n;const i=t[5].default,s=m(i,t,t[4],null);let r=[t[1],{class:t[0]}],a={};for(let t=0;t<r.length;t+=1)a=o(a,r[t]);return{c(){e=N("li"),s&&s.c(),H(e,a)},m(t,i){A(t,e,i),s&&s.m(e,null),n=!0},p(t,[o]){s&&s.p&&(!n||16&o)&&v(s,i,t,t[4],n?_(i,t[4],o,null):y(t[4]),null),H(e,a=Vt(r,[2&o&&t[1],(!n||1&o)&&{class:t[0]}]))},i(t){n||(Dt(s,t),n=!0)},o(t){Rt(s,t),n=!1},d(t){t&&D(e),s&&s.d(t)}}}function Pn(t,e,n){let i;const s=["class","active"];let r=b(e,s),{$$slots:a={},$$scope:l}=e,{class:c=""}=e,{active:u=!1}=e;return t.$$set=t=>{e=o(o({},e),w(t)),n(1,r=b(e,s)),"class"in t&&n(2,c=t.class),"active"in t&&n(3,u=t.active),"$$scope"in t&&n(4,l=t.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&n(0,i=Ge(c,"nav-item",!!u&&"active"))},[i,r,c,u,l,a]}class Ln extends Xt{constructor(t){super(),Yt(this,t,Pn,In,c,{class:2,active:3})}}function Sn(t){let e,n,i,s;const r=t[8].default,l=m(r,t,t[7],null);let c=[t[3],{href:t[0]},{class:t[1]}],u={};for(let t=0;t<c.length;t+=1)u=o(u,c[t]);return{c(){e=N("a"),l&&l.c(),H(e,u)},m(o,r){A(o,e,r),l&&l.m(e,null),n=!0,i||(s=[U(e,"click",t[9]),U(e,"click",t[2])],i=!0)},p(t,[i]){l&&l.p&&(!n||128&i)&&v(l,r,t,t[7],n?_(r,t[7],i,null):y(t[7]),null),H(e,u=Vt(c,[8&i&&t[3],(!n||1&i)&&{href:t[0]},(!n||2&i)&&{class:t[1]}]))},i(t){n||(Dt(l,t),n=!0)},o(t){Rt(l,t),n=!1},d(t){t&&D(e),l&&l.d(t),i=!1,a(s)}}}function Cn(t,e,n){let i;const s=["class","disabled","active","href"];let r=b(e,s),{$$slots:a={},$$scope:l}=e,{class:c=""}=e,{disabled:u=!1}=e,{active:h=!1}=e,{href:d="#"}=e;return t.$$set=t=>{e=o(o({},e),w(t)),n(3,r=b(e,s)),"class"in t&&n(4,c=t.class),"disabled"in t&&n(5,u=t.disabled),"active"in t&&n(6,h=t.active),"href"in t&&n(0,d=t.href),"$$scope"in t&&n(7,l=t.$$scope)},t.$$.update=()=>{112&t.$$.dirty&&n(1,i=Ge(c,"nav-link",{disabled:u,active:h}))},[d,i,function(t){if(u)return t.preventDefault(),void t.stopImmediatePropagation();"#"===d&&t.preventDefault()},r,c,u,h,l,a,function(e){ft.call(this,t,e)}]}class En extends Xt{constructor(t){super(),Yt(this,t,Cn,Sn,c,{class:4,disabled:5,active:6,href:0})}}function Mn(t){let e;const n=t[3].default,i=m(n,t,t[5],null),o=i||function(t){let e;return{c(){e=N("span"),F(e,"class","navbar-toggler-icon")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}();return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||32&o)&&v(i,n,t,t[5],e?_(n,t[5],o,null):y(t[5]),null)},i(t){e||(Dt(o,t),e=!0)},o(t){Rt(o,t),e=!1},d(t){o&&o.d(t)}}}function On(t){let e,n;const i=[t[1],{class:t[0]}];let s={$$slots:{default:[Mn]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)s=o(s,i[t]);return e=new pn({props:s}),e.$on("click",t[4]),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,[n]){const o=3&n?Vt(i,[2&n&&qt(t[1]),1&n&&{class:t[0]}]):{};32&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function An(t,e,n){let i;const s=["class"];let r=b(e,s),{$$slots:a={},$$scope:l}=e,{class:c=""}=e;return t.$$set=t=>{e=o(o({},e),w(t)),n(1,r=b(e,s)),"class"in t&&n(2,c=t.class),"$$scope"in t&&n(5,l=t.$$scope)},t.$$.update=()=>{4&t.$$.dirty&&n(0,i=Ge(c,"navbar-toggler"))},[i,r,c,a,function(e){ft.call(this,t,e)},l]}class Dn extends Xt{constructor(t){super(),Yt(this,t,An,On,c,{class:2})}}function Rn(t){let e;return{c(){e=N("div"),e.innerHTML='<div class="row"><div class="col"><h1>Help</h1> \n      <div class="content-area"><div class="card mb-2"><div class="card-header">Wasabee IITC Plugin</div> \n          <div class="card-body"><div>Stable Release:\n              <a href="https://cdn2.wasabee.rocks/iitcplugin/prod/wasabee.user.js">https://cdn2.wasabee.rocks/iitcplugin/prod/wasabee.user.js</a> \n              <span class="dim small">This is the supported version that has been tested</span></div> \n            <div>Development Build:\n              <a href="https://cdn2.wasabee.rocks/iitcplugin/latest/dev/wasabee.user.js">https://cdn2.wasabee.rocks/iitcplugin/latest/dev/wasabee.user.js</a> \n              <span class="dim small">This is the current work-in-progress version which may contain\n                bugs</span></div> \n            <div>IITC-Android Install Instructions:\n              <a href="https://enl.rocks/-NaqC">https://enl.rocks/-NaqC</a> \n              <span class="dim small">Instructions for installing on IITC-Android</span></div></div></div> \n\n        <div class="card mb-2"><div class="card-header">Videos and How-Tos</div> \n          <div class="card-body"><div><a href="https://www.youtube.com/playlist?list=PLyku9nmtwrADKQM9_EZk7NYbZXVOrBhXa">YouTube Playlist</a></div></div></div> \n\n        <div class="card mb-2"><div class="card-header">Chats</div> \n          <div class="card-body"><div><a href="https://enl.rocks/-dEHQ">Main Chat</a></div></div></div></div></div></div>',F(e,"class","container")},m(t,n){A(t,e,n)},p:n,i:n,o:n,d(t){t&&D(e)}}}class Nn extends Xt{constructor(t){super(),Yt(this,t,null,Rn,c,{})}}let zn=null;const jn="wasabee-server";let Bn=localStorage[jn]||"https://am.wasabee.rocks";const Zn="wasabee-servers",Un=[{name:"Americas Server",url:"https://am.wasabee.rocks"},{name:"EU Server",url:"https://eu.wasabee.rocks"},{name:"Asia/Pacific Server",url:"https://ap.wasabee.rocks"}];try{const t=JSON.parse(localStorage.getItem(Zn));for(const e of t)Un.find((t=>t.url===e.url))||Un.push(e)}catch(t){console.error(t)}const Fn=new URLSearchParams(window.location.search).get("server");function Hn(){return Un}function Wn(t){zn=t,zn._updateList=new Map}function Vn(){return zn}function qn(t){Bn=t,localStorage[jn]=t}function Kn(){return Bn}Fn&&(Un.find((t=>t.url===Fn))||Un.push({name:Fn,url:Fn}),qn(Fn)),localStorage[Zn]=JSON.stringify(Un),window.history.pushState({},document.title,window.location.pathname+window.location.hash);const Gn=new Map;class Jn{constructor(t){var e;("shareWD"in t||"squad"in t)&&(e=t,t=Object.assign(Object.assign({},e),{shareWDKeys:e.ShareWD,loadWDKeys:e.LoadWD,shareLocation:e.state,comment:e.squad})),this.id=t.id,this.name=t.name,this.intelname="unset"!==t.intelname?t.intelname:"",this.intelfaction=t.intelfaction,this.communityname=t.communityname||"",this.pic=t.pic?t.pic:null,this.lat=t.lat?t.lat:0,this.lng=t.lng?t.lng:0,this.date=t.date?t.date:null,this.enlid=t.enlid?t.enlid:null,this.vname=t.vname,this.Vverified=!!t.Vverified,this.level=t.level?Number(t.level):0,this.blacklisted=!!t.blacklisted,this.rocksname=t.rocksname,this.rocks=!!t.rocks,this.communityname?this.name=this.communityname:this.Vverified?this.name=this.vname||this.name:this.rocks?this.name=this.rocksname||this.name:this.intelname?this.name=this.intelname+" [!]":this.name=this.name||"[unknown name]",t.shareWDKeys&&(this.shareWDKeys=t.shareWDKeys),t.loadWDKeys&&(this.loadWDKeys=t.loadWDKeys),t.shareLocation&&(this.shareLocation=t.shareLocation),t.comment&&(this.comment=t.comment),this.fetched=t.fetched?t.fetched:Date.now(),Gn.set(this.id,this)}get latLng(){return this.lat||this.lng?new L.LatLng(this.lat,this.lng):null}static get(t){return Gn.has(t)?Gn.get(t):null}}class Yn extends Jn{constructor(t){if(t.id=t.GoogleID||t.id,super(t),this.querytoken=t.querytoken,this.pic=t.pic,this.intelfaction=t.intelfaction,this.lockey=t.lockey,this.querytoken=t.lockey,this.vapi=t.vapi,t.Telegram&&(this.Telegram={ID:t.Telegram.ID,Verified:t.Telegram.Verified,Authtoken:t.Telegram.Authtoken}),this.Teams=Array(),null!==t.Teams)for(const e of t.Teams)e.ShareWD="On"==e.ShareWD||!0===e.ShareWD,e.LoadWD="On"==e.LoadWD||!0===e.LoadWD,e.State="On"==e.State||!0===e.State,this.Teams.push(e);if(this.Ops=Array(),t.Ops&&t.Ops.length>0)for(const e of t.Ops)this.Ops.push(e)}toJSON(){return this}store(){localStorage.me=JSON.stringify(this)}static remove(){delete localStorage.me}static get(){const t=localStorage.me;return null==t?null:new Yn(JSON.parse(t))}static purge(){const t=Yn.get();if(t){for(const e of t.Ops)delete localStorage[e.ID];Yn.remove()}}getTeam(t){for(const e of this.Teams)if(e.ID==t)return e;return null}}class Xn{constructor(t){this.ID=t.ID,this.zone=t.zone?Number(t.zone):1,this.order=t.order?Number(t.order):0,this.assignedTo=t.assignedTo?t.assignedTo:null,this.completedID=t.completedID?t.completedID:null,this.comment=t.comment?t.comment:"",this.state=t.state,this.dependsOn=t.dependsOn||[]}toServer(){return this.toJSON()}toJSON(){return{ID:this.ID,zone:Number(this.zone),order:Number(this.order),completedID:this.completedID,assignedTo:this.assignedTo,state:this._state,dependsOn:this.dependsOn,comment:this.comment}}get state(){return this._state}set state(t){switch(t){case"assigned":case"acknowledged":if(!this.assignedTo||""==this.assignedTo){this._state="pending";break}this._state=t;break;case"completed":this.complete();break;default:this.assignedTo=null,this._state="pending"}}setOrder(t){this.order=+t||0}assign(t){t!==this.assignedTo&&(this._state=t?"pending":"assigned"),this.assignedTo=t||null}complete(t){this.completedID&&!t||(this.completedID=t||this.assignedTo),this._state="completed"}get completed(){return"completed"==this._state}set completed(t){t?this.complete():(delete this.completedID,this.state="assigned")}}class Qn extends Xn{constructor(t){"throwOrderPos"in t&&(t.order=t.throwOrderPos,t.state="pending",t.completedID=t.completed?t.assignedTo:null,t.completedID?t.state="completed":t.assignedTo&&(t.state="assigned"),t.comment||(t.comment=t.description)),super(t),this.fromPortalId=t.fromPortalId,this.toPortalId=t.toPortalId,this.color=t.color?t.color:"main"}toJSON(){return Object.assign(super.toJSON(),{fromPortalId:this.fromPortalId,toPortalId:this.toPortalId,color:this.color})}toServer(){return Object.assign(this.toJSON(),{throwOrderPos:Number(this.order),completed:!!this.completedID,description:this.comment})}setOrder(t){this.order=+t||0}get portalId(){return this.fromPortalId}getLatLngs(t){const e=Array(),n=t.getPortal(this.fromPortalId);if(!n||!n.lat)return console.log("unable to get source portal"),null;e.push(n.latLng);const i=t.getPortal(this.toPortalId);return i&&i.lat?(e.push(i.latLng),e):(console.log("unable to get destination portal"),null)}setColor(t,e){this.color=t,this.color==e.color&&(this.color="main")}getColor(t){let e=this.color;return"main"==e&&(e=t.color),e}length(t){const e=this.getLatLngs(t);return L.latLng(e[0]).distanceTo(e[1])}}class ti{constructor(t){this.id=t.id,t.name.includes(t.id)&&(t.name=t.id),this.name=t.name,this.lat=(+t.lat).toFixed(6),this.lng=(+t.lng).toFixed(6),this.comment=t.comment?t.comment:"",this.hardness=t.hardness?t.hardness:"",this._latLng=new L.LatLng(parseFloat(this.lat),parseFloat(this.lng))}toJSON(){return{id:this.id,name:this.name,lat:this.lat,lng:this.lng,comment:this.comment,hardness:this.hardness}}get latLng(){return this._latLng}}const ei={MARKER_TYPE_CAPTURE:"CapturePortalMarker",MARKER_TYPE_DECAY:"LetDecayPortalAlert",MARKER_TYPE_EXCLUDE:"ExcludeMarker",MARKER_TYPE_DESTROY:"DestroyPortalAlert",MARKER_TYPE_FARM:"FarmPortalMarker",MARKER_TYPE_GOTO:"GotoPortalMarker",MARKER_TYPE_KEY:"GetKeyPortalMarker",MARKER_TYPE_LINK:"CreateLinkAlert",MARKER_TYPE_MEETAGENT:"MeetAgentPortalMarker",MARKER_TYPE_OTHER:"OtherPortalAlert",MARKER_TYPE_RECHARGE:"RechargePortalAlert",MARKER_TYPE_UPGRADE:"UpgradePortalAlert",MARKER_TYPE_VIRUS:"UseVirusPortalAlert"},ni={CapturePortalMarker:"capture",LetDecayPortalAlert:"decay",ExcludeMarker:"exclude",DestroyPortalAlert:"destroy",FarmPortalMarker:"farm",GotoPortalMarker:"goto",GetKeyPortalMarker:"key",CreateLinkAlert:"link",MeetAgentPortalMarker:"meetagent",OtherPortalAlert:"other",RechargePortalAlert:"recharge",UpgradePortalAlert:"upgrade",UseVirusPortalAlert:"virus"},ii=new Set(Object.values(ei));class oi extends Xn{constructor(t){super(t),this.portalId=t.portalId,this.type=t.type}static get markerTypes(){return ii}static get constants(){return ei}toJSON(){return Object.assign(super.toJSON(),{portalId:this.portalId,type:this.type})}get friendlyType(){return ni[this.type]}get icon(){var t=this.state;return"completed"==t&&(t="done"),"acknowledged"==t&&(t="acknowledge"),"https://cdn2.wasabee.rocks/img/markers/wasabee_markers_"+ni[this.type]+"_"+t+".svg"}}class si{constructor(t){if(this.id=Number(t.id),this.name=t.name,this.color=t.color?t.color:"#00ff00",this.points=[],t.points)for(const e of t.points)this.points.push(new ri(e))}toJSON(){return{id:Number(this.id),name:`${this.name}`,color:this.color,points:this.points}}contains(t){this.points.sort(((t,e)=>t.position-e.position));let e=!1;const n=t.lat,i=t.lng;for(let t=0,o=this.points.length-1;t<this.points.length;o=t++){const s=this.points[t].lat,r=this.points[t].lng,a=this.points[o].lat,l=this.points[o].lng;r>i!=l>i&&n<(a-s)*(i-r)/(l-r)+s&&(e=!e)}return e}}class ri{constructor(t){this.position=Number(t.position),this.lat=Number(t.lat),this.lng=Number(t.lng)}}class ai{constructor(t){if(this._dirtyCoordsTable=!1,this._batchmode=!1,!t||!t.ID||!t.creator)throw Error("Invalid op data");this.ID=t.ID,this.creator=t.creator,this.name=t.name||"[unnamed op]",this.anchors=t.anchors||[],this.color=t.color||"red",this.comment=t.comment||"",this.teamlist=t.teamlist||[],this.fetched=t.fetched||new Date,this.keysonhand=t.keysonhand||[],this.referencetime=t.referencetime||null,this.lasteditid=t.lasteditid,this.links=this.convertLinksToObjs(t.links),this.markers=this.convertMarkersToObjs(t.markers),this.zones=this.convertZonesToObjs(t.zones);const e=this.convertPortalsToObjs(t.opportals);if(this._idToOpportals=new Map,this._coordsToOpportals=new Map,e)for(const t of e)this._idToOpportals.set(t.id,t);this.buildCoordsLookupTable()}static load(t){try{const e=localStorage[t];if(null==e)return null;const n=new ai(JSON.parse(e));if(null==n)throw new Error("corrupted operation");return n}catch(t){console.error(t)}return null}static async delete(t){delete localStorage[t]}store(){localStorage[this.ID]=JSON.stringify(this)}toServer(){return{ID:this.ID,name:this.name,creator:this.creator,opportals:Array.from(this._idToOpportals.values()),anchors:this.anchors,links:this.links.map((t=>t.toServer())),markers:this.markers.map((t=>t.toServer())),color:this.color,comment:this.comment,teamlist:this.teamlist,fetched:this.fetched,keysonhand:this.keysonhand,zones:this.zones}}toJSON(){return{ID:this.ID,name:this.name,creator:this.creator,opportals:Array.from(this._idToOpportals.values()),anchors:this.anchors,links:this.links,markers:this.markers,color:this.color,comment:this.comment,teamlist:this.teamlist,fetched:this.fetched,lasteditid:this.lasteditid,keysonhand:this.keysonhand,zones:this.zones}}get opportals(){return Array.from(this._idToOpportals.values())}set opportals(t){}buildCoordsLookupTable(){this._coordsToOpportals.clear(),this._dirtyCoordsTable=!1;for(const t of this._idToOpportals.values()){const e=t.lat+"/"+t.lng;this._coordsToOpportals.get(e)||this._coordsToOpportals.set(e,t)}if(this._dirtyCoordsTable){console.debug("operation: removing duplicates");const t=new Array,e=new Map;for(const[n,i]of this._idToOpportals){const o=i.lat+"/"+i.lng,s=this._idToOpportals.get(this._coordsToOpportals.get(o).id);e.set(n,s.id),n!=s.id&&t.push(n)}for(const t of this.links)t.fromPortalId=e.get(t.fromPortalId),t.toPortalId=e.get(t.toPortalId);for(const t of this.markers)t.portalId=e.get(t.portalId);this.anchors=this.anchors.map((t=>e.get(t)));for(const e of t)this._idToOpportals.delete(e)}this._dirtyCoordsTable=!1}reverseLink(t,e){const n=[];for(const i of this.links)i.fromPortalId==t&&i.toPortalId==e&&(i.fromPortalId=e,i.toPortalId=t),n.push(i);this.links=n}convertLinksToObjs(t){const e=new Array;if(!t||0==t.length)return e;for(const n of t)e.push(new Qn(n));return e}convertMarkersToObjs(t){const e=new Array;if(!t||0==t.length)return e;if(t)for(const n of t)e.push(new oi(n));return e}convertPortalsToObjs(t){const e=Array();if(!t||0==t.length)return e;for(const n of t)if(n instanceof ti)e.push(n);else{const t=new ti(n);e.push(t)}return e}convertZonesToObjs(t){if(!t||0==t.length)return[{id:1,name:"Primary",color:"purple"},{id:2,name:"Secondary",color:"yellow"}].map((t=>new si(t)));const e=Array();for(const n of t)if(n instanceof si)e.push(n);else{const t=new si(n);e.push(t)}return e}getPortal(t){return this._idToOpportals.get(t)}get mbr(){if(0==this._idToOpportals.size)return null;const t=[],e=[];for(const n of this.anchors){const i=this.getPortal(n);t.push(i.lat),e.push(i.lng)}for(const n of this.markers){const i=this.getPortal(n.portalId);t.push(i.lat),e.push(i.lng)}if(!t.length)return null;const n=Math.min.apply(null,t),i=Math.max.apply(null,t),o=Math.min.apply(null,e),s=Math.max.apply(null,e),r=L.latLng(n,o),a=L.latLng(i,s);return L.latLngBounds(r,a)}keyOnHand(t,e,n,i){"string"==typeof n&&(n=Number.parseInt(n,10));for(const o of this.keysonhand)if("string"==typeof o.onhand&&(o.onhand=Number.parseInt(o.onhand,10)),o.portalId==t&&o.gid==e)return o.onhand=n,void(o.capsule=i);const o={portalId:t,gid:e,onhand:n,capsule:i};this.keysonhand.push(o)}keysOnHandForPortal(t){let e=0;for(const n of this.keysonhand)n.portalId==t&&(e+=n.onhand);return e}keysOnHandForPortalPerAgent(t){const e={};for(const n of this.keysonhand)n.portalId==t&&(n.gid in e||(e[n.gid]=0),e[n.gid]+=n.onhand);return e}keysRequiredForPortal(t){let e=0;for(const n of this.links)n.toPortalId==t&&e++;return e}keysRequiredForPortalPerAgent(t){const e={};for(const n of this.links){const i=n.assignedTo||"[unassigned]";n.toPortalId==t&&(i in e||(e[i]=0),e[i]++)}return e}keysRequiredPerPortalPerZone(){const t=[];for(const e of this.links){const n=t.find((t=>t.to==e.toPortalId&&t.zone==e.zone));n?n.count+=1:t.push({to:e.toPortalId,zone:e.zone,count:1})}return t}zoneName(t){if(0==(t=+t))return"All";for(const e of this.zones)if(e.id==t)return e.name;return t}setZone(t,e){t.zone=Number(e)}removeZone(t){if(1!=t){for(const e of this.markers)e.zone==t&&(e.zone=1);for(const e of this.links)e.zone==t&&(e.zone=1);this.zones=this.zones.filter((e=>e.id!=t))}else console.log("cannot remove zone 1")}removeZonePoints(t){for(const e of this.zones)e.id==t&&(e.points=[])}renameZone(t,e){for(const n of this.zones)if(n.id==t){n.name=e;break}}addZone(){const t=new Set;for(const e of this.zones)t.add(e.id);const e=Math.max(...t)+1;return this.zones.push(new si({id:e,name:e})),e}mayWrite(t){if(t.id===this.creator)return!0;const e=this.teamlist.filter((t=>"write"===t.role)).map((t=>t.teamid));return t.Teams.some((t=>e.includes(t.ID)))}}class li{constructor(t){this.code=t.code,this.text=t.text,this.error=t.error}toString(){return this.code,this.error?this.text+": "+this.error:this.text}}const ci=new Map;class ui{constructor(t){this.fetched=t.fetched?t.fetched:Date.now(),this.id=t.id,this.name=t.name,this.rc=t.rc,this.rk=t.rk,this.jlt=t.jlt,this.vt=t.vt?t.vt+"":null,this.vr=t.vr?t.vr+"":"0",this.agents=t.agents.map((t=>new Jn(t))),ci.set(this.id,this)}static get(t){const e=ci.get(t);return e||null}}async function hi(t){try{return await t}catch(t){return t instanceof li&&_e.error(t.toString(),{duration:0}),Promise.reject(t)}}function di(t){return _e.info(t)}function pi(t){return _e.warning(t)}function fi(t){const e=_e.getById(t);e&&e.remove&&e.remove()}const mi=new Map;function gi(t,e){_i().has(e)?t.remove():(mi.has(e)||mi.set(e,[]),mi.get(e).push(t.uid))}function _i(){return Vn()._updateList}function vi(){return Pi("/static/wasabee-webui-config.json")}function yi(t){return Ci(`/api/v1/team/${t}`)}async function wi(t){let e="Sat, 29 Oct 1994 19:43:31 GMT";const n=ai.load(t);null!=n&&n.fetched&&(e=n.fetched);try{const i=await Ii({url:`/api/v1/draw/${t}`,method:"GET",headers:n?n.lasteditid?{"If-None-Match":n.lasteditid}:{"If-Modified-Since":e}:null});return new ai(i)}catch(e){if(!(e instanceof li))return console.error(e),Promise.reject(new li({code:-1,text:`Unexpected error: ${e}`}));switch(e.code){case 304:return n;case 403:case 410:ai.delete(t);default:return Promise.reject(e)}}}async function bi(t){const e=JSON.stringify(t.toServer());try{const n=await Ii({url:`/api/v1/draw/${t.ID}`,method:"PUT",body:e,headers:t.lasteditid?{"Content-Type":"application/json;charset=UTF-8","If-Match":t.lasteditid}:{"Content-Type":"application/json;charset=UTF-8"}});return t.lasteditid=n.updateID,t.fetched=(new Date).toUTCString(),n}catch(e){return e instanceof li?(410===e.code&&ai.delete(t.ID),Promise.reject(e)):(console.error(e),Promise.reject(new li({code:-1,text:`Unexpected error: ${e}`})))}}function xi(t,e){return Pi(`/api/v1/draw/${t}/link/${e}`)}function $i(t,e){return Pi(`/api/v1/draw/${t}/marker/${e}`)}function ki(t,e,n){let i="link";e instanceof oi&&(i="marker");let o="incomplete";return n&&(o="complete"),Pi(`/api/v1/draw/${t.ID}/${i}/${e.ID}/${o}`)}function Ti(t,e,n,i){const o=new FormData;return o.append("count",`${n}`),o.append("capsule",i),Li(`/api/v1/draw/${t}/portal/${e}/keyonhand`,o)}async function Ii(t){const e={method:t.method,mode:"cors",cache:"default",credentials:"include",redirect:"manual",referrerPolicy:"origin",headers:{}};t.body&&(e.body=t.body),t.headers&&(e.headers=t.headers);const n=Ai();n&&(e.headers.Authorization=`Bearer ${n}`,e.credentials="omit");try{const n=await fetch(Kn()+t.url,e),i=await n.text();let o;if(!t.raw){if(!i&&!t.retried&&n.ok)return console.warn(`server answers is empty on[${t.url}], retry once, just in case `),Ii(Object.assign(Object.assign({},t),{retried:!0}));try{o=JSON.parse(i)}catch(t){if(n.ok)return Promise.reject(new li({code:-1,text:"unexpected server answer"}))}}switch(n.status){case 200:return!t.raw&&o.updateID&&(_i().set(o.updateID,Date.now()),function(t){const e=mi.get(t);e&&(e.forEach(fi),mi.delete(t))}(o.updateID)),Promise.resolve(t.raw?i:o);case 302:case 401:Yn.purge();default:return Promise.reject(new li({code:n.status,text:n.statusText,error:o?o.error:null}))}}catch(t){return console.error(t),Promise.reject(new li({code:-1,text:"Network error"}))}}function Pi(t){return Ii({method:"GET",url:t})}function Li(t,e,n){return Ii({url:t,method:"POST",body:e,headers:n?{"Content-Type":n}:null})}function Si(t,e){return Ii({url:t,method:"PUT",body:e})}function Ci(t,e){return Ii({url:t,method:"DELETE",body:e})}function Ei(t){return new Promise(((e,n)=>{window.gapi.auth2.authorize(t,(t=>{if(t.error)return n(`error: ${t.error}: ${t.error_subtype||t.details}`);console.log(t),e(t.access_token)}))}))}const Mi="wasabee-bearer";let Oi=localStorage[Mi];function Ai(){return Oi}function Di(t){Oi=t,t?localStorage[Mi]=t:delete localStorage[Mi]}async function Ri(t,e){const n={client_id:"269534461245-rpgijdorh2v0tdalis1s95fkebok73cl.apps.googleusercontent.com",scope:"email profile openid",response_type:"id_token permission",prompt:e?"select_account":"none"};let i;try{i=await Ei(n)}catch(t){console.warn("fail to login to google",t)}if(!i&&"select_account"!=n.prompt){n.prompt="select_account";try{i=await Ei(n)}catch(t){console.warn("fail to login to google",t)}}if(i){qn(t);try{const t=await(o=i,Li("/aptok",JSON.stringify({accessToken:o}),"application/json;charset=UTF-8"));return t.jwt&&Di(t.jwt),t}catch(t){Di()}}var o;return null}function Ni(t,e,n){const i=t.slice();return i[10]=e[n],i}function zi(t){let e;return{c(){e=j("Github")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function ji(t){let e;return{c(){e=j("Telegram")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Bi(t){let e;return{c(){e=j("Youtube")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Zi(t){let e,n,i,o,s,r;return e=new En({props:{href:"https://github.com/wasabee-project/Wasabee-IITC",$$slots:{default:[zi]},$$scope:{ctx:t}}}),n=new En({props:{href:"https://enl.rocks/-dEHQ",$$slots:{default:[ji]},$$scope:{ctx:t}}}),i=new En({props:{href:"https://www.youtube.com/playlist?list=PLyku9nmtwrADKQM9_EZk7NYbZXVOrBhXa",$$slots:{default:[Bi]},$$scope:{ctx:t}}}),s=new En({props:{class:"nav-brand"}}),{c(){Kt(e.$$.fragment),Kt(n.$$.fragment),Kt(i.$$.fragment),o=B(),Kt(s.$$.fragment)},m(t,a){Gt(e,t,a),Gt(n,t,a),Gt(i,t,a),A(t,o,a),Gt(s,t,a),r=!0},p(t,o){const s={};8192&o&&(s.$$scope={dirty:o,ctx:t}),e.$set(s);const r={};8192&o&&(r.$$scope={dirty:o,ctx:t}),n.$set(r);const a={};8192&o&&(a.$$scope={dirty:o,ctx:t}),i.$set(a)},i(t){r||(Dt(e.$$.fragment,t),Dt(n.$$.fragment,t),Dt(i.$$.fragment,t),Dt(s.$$.fragment,t),r=!0)},o(t){Rt(e.$$.fragment,t),Rt(n.$$.fragment,t),Rt(i.$$.fragment,t),Rt(s.$$.fragment,t),r=!1},d(t){Jt(e,t),Jt(n,t),Jt(i,t),t&&D(o),Jt(s,t)}}}function Ui(t){let e;return{c(){e=N("span"),F(e,"class","spinner-border spinner-border-sm"),F(e,"role","status"),F(e,"aria-hidden","true")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Fi(t){let e,n,i,o,s,r,a,l=t[10].name+"",c=t[0]==t[10].url&&Ui();function u(){return t[6](t[10])}return{c(){e=N("button"),n=j("Login to "),i=j(l),c&&c.c(),o=B(),F(e,"class",s="btn btn-block "+(t[2][t[10].url]?"btn-danger":"btn-success"))},m(t,s){A(t,e,s),E(e,n),E(e,i),c&&c.m(e,null),E(e,o),r||(a=U(e,"click",u),r=!0)},p(n,i){(t=n)[0]==t[10].url?c||(c=Ui(),c.c(),c.m(e,o)):c&&(c.d(1),c=null),4&i&&s!==(s="btn btn-block "+(t[2][t[10].url]?"btn-danger":"btn-success"))&&F(e,"class",s)},d(t){t&&D(e),c&&c.d(),r=!1,a()}}}function Hi(t){let e,n,i,o,s,r,a,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I;o=new yn({props:{class:"nav-masthead",justified:!0,$$slots:{default:[Zi]},$$scope:{ctx:t}}});let P=t[3],L=[];for(let e=0;e<P.length;e+=1)L[e]=Fi(Ni(t,P,e));return{c(){e=N("link"),n=B(),i=N("header"),Kt(o.$$.fragment),s=B(),r=N("main"),a=N("h1"),a.textContent="Wasabee",l=B(),c=N("p"),c.textContent="ENL Op Tools",u=B(),h=N("hr"),d=B(),p=N("p"),p.innerHTML='<a href="https://cdn2.wasabee.rocks/iitcplugin/prod/wasabee.user.js" class="btn btn-lg btn-success">Download the stable release</a>',f=B(),m=N("p"),m.innerHTML='<a href="https://app.wasabee.rocks" class="btn btn-lg btn-success">Get ground Agents app</a>',g=B(),_=N("div");for(let t=0;t<L.length;t+=1)L[t].c();v=B(),y=N("label"),w=N("input"),b=j("Select google account"),x=B(),$=N("p"),$.textContent="Each server is a data-island, they do not share op/team info. If you do not\n    see teams/operations you expect, please verify with your operator which\n    server is being used.",F(e,"href","https://cdn2.wasabee.rocks/css/homepage.css"),F(e,"rel","stylesheet"),F(i,"class","masthead mx-auto mb-auto"),F(a,"class","display-2 font-weight-bold"),F(c,"class","h2"),F(p,"class","lead"),F(m,"class","lead"),F(_,"class","lead serverlist"),F(w,"class","form-check-input"),F(w,"type","checkbox"),F(y,"class","form-check-inline"),F($,"class","small tips"),F(r,"role","main"),F(r,"class","cover-container text-center mx-auto")},m(P,S){E(document.head,e),A(P,n,S),A(P,i,S),Gt(o,i,null),A(P,s,S),A(P,r,S),E(r,a),E(r,l),E(r,c),E(r,u),E(r,h),E(r,d),E(r,p),E(r,f),E(r,m),E(r,g),E(r,_);for(let t=0;t<L.length;t+=1)L[t].m(_,null);E(r,v),E(r,y),E(y,w),w.checked=t[1],E(y,b),E(r,x),E(r,$),k=!0,T||(I=U(w,"change",t[7]),T=!0)},p(t,[e]){const n={};if(8192&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),29&e){let n;for(P=t[3],n=0;n<P.length;n+=1){const i=Ni(t,P,n);L[n]?L[n].p(i,e):(L[n]=Fi(i),L[n].c(),L[n].m(_,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=P.length}2&e&&(w.checked=t[1])},i(t){k||(Dt(o.$$.fragment,t),k=!0)},o(t){Rt(o.$$.fragment,t),k=!1},d(t){D(e),t&&D(n),t&&D(i),Jt(o),t&&D(s),t&&D(r),R(L,t),T=!1,I()}}}function Wi(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let{disabled:o}=e,s=null,r=!1;const a=ht(),l=Hn(),c={};function u(t){return i(this,void 0,void 0,(function*(){if(!o){n(0,s=t);try{const e=yield Ri(t,r);e&&a("login",e)}catch(e){console.error("unable to send token to ",t),n(2,c[t]=!0,c)}n(0,s=null)}}))}return t.$$set=t=>{"disabled"in t&&n(5,o=t.disabled)},[s,r,c,l,u,o,t=>u(t.url),function(){r=this.checked,n(1,r)}]}class Vi extends Xt{constructor(t){super(),Yt(this,t,Wi,Hi,c,{disabled:5})}}async function qi(t=!1){if(!t){const t=Yn.get();if(t){const e=Date.now()-36e5;if(t.fetched&&t.fetched>e)return t}}try{const t=await Pi("/api/v1/me");return new Yn(t)}catch(t){console.log(t)}return null}async function Ki(t){if(!t)return null;const e=Jn.get(t);if(e)return e;try{const e=await(n=t,Pi(`/api/v1/agent/${n}`));return new Jn(e)}catch(t){console.log(t)}var n;return null}async function Gi(t,e=60){if(!t)return null;const n=ui.get(t);if(n){const t=new ui(n);if(t.fetched>Date.now()-1e3*e)return t}try{const e=await(i=t,Pi(`/api/v1/team/${i}`));return new ui(e)}catch(t){console.error(t)}var i;return null}async function Ji(){try{const t=await async function(){const t=await qi(!0);return t.store(),t}();if(!t)throw console.log(t),new Error("invalid data from /me");await Xi(t),await Qi(t)}catch(t){throw console.log(t),t}}function Yi(){const t=[],e=Object.keys(localStorage);for(const n of e)40==n.length&&t.push(n);return t}async function Xi(t){const e=new Set(t.Ops.map((t=>t.ID)));for(const t of Yi())e.has(t)||delete localStorage[t];const n=new Array;for(const t of e)n.push(wi(t));try{const t=await Promise.allSettled(n);for(const e of t){if("fulfilled"!=e.status)throw console.log(e),new Error("Op load failed, please refresh");e.value.store()}}catch(t){console.log(t)}}async function Qi(t){const e=new Set(t.Teams.map((t=>t.ID))),n=new Array;for(const t of e)n.push(Gi(t,300));try{const t=await Promise.allSettled(n);for(const e of t)"fulfilled"!=e.status&&console.log(e)}catch(t){return void console.log(t)}}const{Map:to}=Bt;function eo(t,e,n){const i=t.slice();return i[10]=e[n],i}function no(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function io(t){let e;return{c(){e=j(",")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function oo(t,e){let n,i,o,s,r,a,l=e[4](e[13])+"",c=e[15]>0&&io();return{key:t,first:null,c(){n=Z(),c&&c.c(),i=B(),o=N("a"),s=j(l),r=B(),F(o,"href",a="#/team/"+e[13]+"/list"),this.first=n},m(t,e){A(t,n,e),c&&c.m(t,e),A(t,i,e),A(t,o,e),E(o,s),E(o,r)},p(t,n){(e=t)[15]>0?c||(c=io(),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null),2&n&&l!==(l=e[4](e[13])+"")&&V(s,l),2&n&&a!==(a="#/team/"+e[13]+"/list")&&F(o,"href",a)},d(t){t&&D(n),c&&c.d(t),t&&D(i),t&&D(o)}}}function so(t){let e,n,i;function o(t,e){return t[0]===t[10].ID?ao:ro}let s=o(t),r=s(t);function a(){return t[8](t[10])}return{c(){e=N("button"),r.c(),F(e,"class","btn btn-danger btn-sm")},m(t,o){A(t,e,o),r.m(e,null),n||(i=U(e,"click",a),n=!0)},p(n,i){s!==(s=o(t=n))&&(r.d(1),r=s(t),r&&(r.c(),r.m(e,null)))},d(t){t&&D(e),r.d(),n=!1,i()}}}function ro(t){let e;return{c(){e=N("span"),e.textContent="Delete"},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function ao(t){let e;return{c(){e=N("span"),e.textContent="Confirm?"},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function lo(t,e){let n,i,o,s,r,a,l,c,u,h,d,p,f,m=e[10].name+"",g=e[10].comment+"",_=[],v=new to,y=e[3](e[10].teamlist);const w=t=>t[13];for(let t=0;t<y.length;t+=1){let n=no(e,y,t),i=w(n);v.set(i,_[t]=oo(i,n))}let b=e[10].own&&so(e);return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=N("a"),s=j(m),a=B(),l=N("td"),c=j(g),u=B(),h=N("td");for(let t=0;t<_.length;t+=1)_[t].c();d=B(),p=N("td"),b&&b.c(),f=B(),F(o,"href",r="#/operation/"+e[10].ID+"/list"),this.first=n},m(t,e){A(t,n,e),E(n,i),E(i,o),E(o,s),E(n,a),E(n,l),E(l,c),E(n,u),E(n,h);for(let t=0;t<_.length;t+=1)_[t].m(h,null);E(n,d),E(n,p),b&&b.m(p,null),E(n,f)},p(t,n){e=t,2&n&&m!==(m=e[10].name+"")&&V(s,m),2&n&&r!==(r="#/operation/"+e[10].ID+"/list")&&F(o,"href",r),2&n&&g!==(g=e[10].comment+"")&&V(c,g),26&n&&(y=e[3](e[10].teamlist),_=Wt(_,n,w,1,e,y,v,h,Zt,oo,null,no)),e[10].own?b?b.p(e,n):(b=so(e),b.c(),b.m(p,null)):b&&(b.d(1),b=null)},d(t){t&&D(n);for(let t=0;t<_.length;t+=1)_[t].d();b&&b.d()}}}function co(t){let e,i,o,s,r,a,l,c,u,h,d,p,f,m=[],g=new to,_=t[1];const v=t=>t[10].ID;for(let e=0;e<_.length;e+=1){let n=eo(t,_,e),i=v(n);g.set(i,m[e]=lo(i,n))}return{c(){e=N("div"),i=N("div"),o=N("div"),s=N("h1"),r=j("Operations\n        "),a=N("button"),a.textContent="",l=B(),c=N("table"),u=N("thead"),u.innerHTML='<tr><th scope="col">Operation</th> \n            <th scope="col">Comment</th> \n            <th scope="col">Teams</th> \n            <th>Commands</th></tr>',h=B(),d=N("tbody");for(let t=0;t<m.length;t+=1)m[t].c();F(a,"class","btn btn-primary"),F(u,"class","thead"),F(d,"id","ops"),F(c,"class","table table-striped"),F(o,"class","col"),F(i,"class","row"),F(e,"class","container")},m(n,g){A(n,e,g),E(e,i),E(i,o),E(o,s),E(s,r),E(s,a),E(o,l),E(o,c),E(c,u),E(c,h),E(c,d);for(let t=0;t<m.length;t+=1)m[t].m(d,null);p||(f=U(a,"click",t[2]),p=!0)},p(t,[e]){59&e&&(_=t[1],m=Wt(m,e,v,1,t,_,g,d,Zt,lo,null,eo))},i:n,o:n,d(t){t&&D(e);for(let t=0;t<m.length;t+=1)m[t].d();p=!1,f()}}}function uo(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let o=Yn.get(),s=null,r=[],a=new Map;function l(){return i(this,void 0,void 0,(function*(){yield Ji(),n(6,o=Yn.get())}))}function c(t){return i(this,void 0,void 0,(function*(){if(s!==t.ID)n(0,s=t.ID);else{try{yield(e=t.ID,Ci(`/api/v1/draw/${e}`)),yield l()}catch(t){console.log(t)}n(0,s=null)}var e}))}return t.$$.update=()=>{if(64&t.$$.dirty){const t=[],e=new Set(o.Ops.map((t=>t.ID)));for(const n of e){const e=ai.load(n);e&&e.ID&&t.push(e)}t.sort(((t,e)=>t.name.localeCompare(e.name))),n(1,r=t.map((t=>({ID:t.ID,comment:t.comment,own:t.creator==o.id,name:t.name,teamlist:t.teamlist}))))}if(192&t.$$.dirty){for(const t of o.Teams)a.set(t.ID,t.Name);n(7,a),n(6,o)}},[s,r,l,function(t){return Array.from(new Set(t.map((t=>t.teamid)).filter((t=>a.has(t)))))},function(t){return a.get(t)},c,o,a,t=>c(t)]}class ho extends Xt{constructor(t){super(),Yt(this,t,uo,co,c,{})}}function po(t){let e;return{c(){e=j("unverified")},m(t,n){A(t,e,n)},p:n,d(t){t&&D(e)}}}function fo(t){let e,n,i;return{c(){e=N("a"),n=j("verified"),F(e,"v-if","me.Vverified"),F(e,"href",i="https://v.enl.one/profile/"+t[0].enlid),F(e,"target","_new")},m(t,i){A(t,e,i),E(e,n)},p(t,n){1&n&&i!==(i="https://v.enl.one/profile/"+t[0].enlid)&&F(e,"href",i)},d(t){t&&D(e)}}}function mo(t){let e,n,i,o,s;return{c(){e=N("p"),e.innerHTML='Post this message at <a href="https://community.ingress.com/en/activity" target="_new">Recent Activity</a>, then press the button Verify.',n=B(),i=N("textarea"),i.readOnly=!0,i.value=t[3],F(i,"class","svelte-1f48hch")},m(t,r){A(t,e,r),A(t,n,r),A(t,i,r),o||(s=U(i,"click",xo),o=!0)},p(t,e){8&e&&(i.value=t[3])},d(t){t&&D(e),t&&D(n),t&&D(i),o=!1,s()}}}function go(t){let e,n,i,o,s,r,a,l,c,u={botname:t[5]}+"",h=t[0].lockey+"";return{c(){e=N("div"),n=j("Tell the bot ("),i=N("a"),o=j(u),s=j(")\n          "),r=N("a"),a=j(h),c=j("\n          to start the verification process."),F(i,"href","tg://resolve?domain="+t[5]),F(r,"href",l="https://telegram.me/"+t[5]+"?start="+t[0].lockey)},m(t,l){A(t,e,l),E(e,n),E(e,i),E(i,o),E(e,s),E(e,r),E(r,a),E(e,c)},p(t,e){1&e&&h!==(h=t[0].lockey+"")&&V(a,h),1&e&&l!==(l="https://telegram.me/"+t[5]+"?start="+t[0].lockey)&&F(r,"href",l)},d(t){t&&D(e)}}}function _o(t){let e;function n(t,e){return t[0].Telegram.Verified?wo:t[0].Telegram.Authtoken?yo:vo}let i=n(t),o=i(t);return{c(){e=N("div"),o.c(),F(e,"id","telegramContent")},m(t,n){A(t,e,n),o.m(e,null)},p(t,s){i===(i=n(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null)))},d(t){t&&D(e),o.d()}}}function vo(t){let e,n,i,o,s,r,a,l,c,u,h=t[0].lockey+"";return{c(){e=N("div"),n=N("strong"),n.textContent="Step 1:",i=j(" Tell the bot ("),o=N("a"),s=j(t[5]),r=j(")\n              "),a=N("a"),l=j(h),u=j("\n              to start the verification process. If you have sent this to the bot\n              and this step still shows here, log out and back in."),F(o,"href","tg://resolve?domain="+t[5]),F(a,"href",c="https://telegram.me/"+t[5]+"?start="+t[0].lockey)},m(t,c){A(t,e,c),E(e,n),E(e,i),E(e,o),E(o,s),E(e,r),E(e,a),E(a,l),E(e,u)},p(t,e){1&e&&h!==(h=t[0].lockey+"")&&V(l,h),1&e&&c!==(c="https://telegram.me/"+t[5]+"?start="+t[0].lockey)&&F(a,"href",c)},d(t){t&&D(e)}}}function yo(t){let e,n,i,o,s,r,a,l,c,u,h=t[0].Telegram.Authtoken+"";return{c(){e=N("div"),n=N("strong"),n.textContent="Step 2:",i=j(" Tell the bot ("),o=N("a"),s=j(t[5]),r=j(")\n              "),a=N("a"),l=j(h),u=j("\n              to conclude verification."),F(o,"href","tg://resolve?domain="+t[5]),F(a,"href",c="https://telegram.me/"+t[5]+"?start="+t[0].Telegram.Authtoken)},m(t,c){A(t,e,c),E(e,n),E(e,i),E(e,o),E(o,s),E(e,r),E(e,a),E(a,l),E(e,u)},p(t,e){1&e&&h!==(h=t[0].Telegram.Authtoken+"")&&V(l,h),1&e&&c!==(c="https://telegram.me/"+t[5]+"?start="+t[0].Telegram.Authtoken)&&F(a,"href",c)},d(t){t&&D(e)}}}function wo(t){let e,n,i,o,s=t[0].Telegram.ID+"";return{c(){e=N("div"),n=j("Telgram ID: "),i=j(s),o=j(" (verified)")},m(t,s){A(t,e,s),E(e,n),E(e,i),E(e,o)},p(t,e){1&e&&s!==(s=t[0].Telegram.ID+"")&&V(i,s)},d(t){t&&D(e)}}}function bo(t){let e,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L,S,C,M,O,R,z,Z,H,W,K,J,X,Q,tt,et,nt,it,ot,st,rt,at,lt,ct,ut,ht,dt,pt,ft,mt,gt,_t,vt,yt,wt,bt,xt,kt,Tt,It,Pt,Lt,St,Ct,Et,Mt,Ot,At,Dt,Rt,Nt,zt,jt,Bt,Zt,Ut,Ft,Ht,Wt,Vt,qt,Kt,Gt,Jt,Yt,Xt,Qt,te,ee,ne,ie,oe,se,re,ae,le,ce,ue,he,de,pe,fe,me,ge,_e,ve,ye,we,be,xe,$e,ke,Te,Ie=t[0].name+"",Pe=t[0].vname+"",Le=t[0].rocksname+"",Se=t[0].rocks?"verified":"not verified",Ce=t[0].id+"",Ee=t[0].level+"",Me=t[0].intelname+"",Oe=t[0].communityname+"",Ae=t[0].lockey+"";function De(t,e){return t[0].Vverified?fo:po}let Re=De(t),Ne=Re(t),ze=t[3]&&mo(t);function je(t,e){return t[0].Telegram?_o:go}let Be=je(t),Ze=Be(t);return{c(){e=N("div"),i=N("h1"),i.textContent="Settings",o=B(),s=N("div"),r=N("div"),r.textContent="Agent Info",l=B(),c=N("div"),u=N("div"),h=N("span"),h.textContent="Wasabee Name:",d=B(),p=N("span"),f=j(Ie),m=B(),g=N("div"),_=N("span"),_.textContent="V Name:",v=B(),y=N("span"),w=j(Pe),b=B(),x=N("div"),$=N("a"),$.textContent="V Status",k=j(":\n        "),T=N("span"),Ne.c(),I=B(),P=N("div"),L=N("span"),L.textContent="Rocks Name:",S=B(),C=N("span"),M=j(Le),O=B(),R=N("div"),z=N("a"),z.textContent="enl.rocks Status",Z=j(":\n        "),H=N("span"),W=j(Se),K=B(),J=N("p"),J.innerHTML='<em><a href="#tooltip" class="tooltip-display" data-toggle="tooltip" title=".Rocks verification typically only takes place in relationship to anomolies. Lack of verification does not mean you don&#39;t have a .rocks account, it just means you&#39;ve not been verified at an anomaly event">What is .Rocks verification?</a></em>',X=B(),Q=N("div"),tt=N("span"),tt.textContent="Google ID:",et=B(),nt=N("span"),it=j(Ce),ot=B(),st=N("div"),rt=N("span"),rt.textContent="Level:",at=B(),lt=N("span"),ct=j(Ee),ut=B(),ht=N("p"),ht.innerHTML='<em>This information comes from\n            <a href="https://v.enl.one/">V</a> and/or\n            <a href="https://enlightened.rocks">.rocks</a>. If you have an\n            UnverifiedAgent_ name, please ensure your .Rocks and V information\n            is correct.</em>',dt=B(),pt=N("div"),ft=N("span"),ft.textContent="Intel Name:",mt=B(),gt=N("span"),_t=j(Me),vt=B(),yt=N("p"),yt.innerHTML="<em>This information is set by the IITC plugin. It should not be trusted\n          for authorization.</em>",wt=B(),bt=N("div"),xt=N("p"),kt=N("span"),kt.textContent="Community Name:",Tt=B(),It=N("span"),Pt=j(Oe),Lt=B(),St=N("p"),Ct=N("label"),Et=N("input"),Ot=B(),At=N("button"),Dt=j("Get proof"),Nt=B(),zt=N("button"),jt=j("Verify activity post"),Zt=B(),ze&&ze.c(),Ut=B(),Ft=N("div"),Ht=N("div"),Ht.textContent="Telegram",Wt=B(),Vt=N("div"),Ze.c(),qt=B(),Kt=N("div"),Gt=N("div"),Gt.textContent="One Time Token",Jt=B(),Yt=N("div"),Xt=N("code"),Qt=j(Ae),te=B(),ee=N("div"),ee.textContent="Use this to log into Wasabee-IITC if Google Oauth2 and Webview both fail",ne=B(),ie=N("div"),oe=N("div"),oe.textContent="V API token",se=B(),re=N("div"),ae=N("div"),le=N("input"),ce=B(),ue=N("div"),ue.textContent="If you need to sync V teams with Wasabee, enter a valid V API token.",he=B(),de=N("div"),pe=N("div"),pe.textContent="V team import",fe=B(),me=N("div"),ge=N("div"),_e=N("select"),ve=N("option"),ve.textContent="Create one Wasabee team per V team",ye=N("option"),ye.textContent="Create one Wasabee team per V team/role pair",we=B(),be=N("input"),xe=B(),$e=N("div"),$e.textContent="This can potentially create a large number of Wasabee teams at once.\n        Only use this if you are sure you need it.",F(r,"class","card-header"),F(h,"class","font-weight-bolder"),F(p,"class","agent-name"),F(_,"class","font-weight-bolder"),F(y,"class","agent-name"),F($,"href","https://v.enl.one/"),F($,"target","_new"),F(T,"id","vstatus"),F(L,"class","font-weight-bolder"),F(C,"class","agent-name"),F(z,"href","https://enl.rocks/"),F(z,"target","_new"),F(H,"id","rocksstatus"),F(tt,"class","font-weight-bolder"),F(nt,"class","agent-name"),F(rt,"class","font-weight-bolder"),F(lt,"class","agent-name"),F(ft,"class","font-weight-bolder"),F(gt,"class","agent-name"),F(kt,"class","font-weight-bolder"),F(It,"class","agent-name"),F(Et,"type","text"),F(Et,"pattern","[a-zA-Z0-9]{3,}"),F(Et,"placeholder",Mt=t[0].communityname||"My Agent Name"),F(Et,"class","svelte-1f48hch"),Y(Et,"unverified",t[4]),F(At,"class","btn btn-info"),At.disabled=Rt=!t[4],F(zt,"class","btn btn-success"),zt.disabled=Bt=!t[4],F(c,"class","card-body"),F(s,"class","card mb-2"),F(Ht,"class","card-header"),F(Vt,"class","card-body"),F(Ft,"class","card mb-2"),F(Gt,"class","card-header"),F(Xt,"id","ott"),F(Xt,"class","svelte-1f48hch"),F(ee,"class","small dim"),F(Yt,"class","card-body"),F(Kt,"class","card mb-2"),F(oe,"class","card-header"),F(le,"type","text"),F(le,"id","vapi"),F(le,"placeholder","0123456789abcdef0123456789abcdef0123456789"),F(ae,"id","vapidiv"),F(ue,"class","small dim"),F(re,"class","card-body"),F(ie,"class","card mb-2"),F(pe,"class","card-header"),ve.__value="team",ve.value=ve.__value,ye.__value="role",ye.value=ye.__value,F(_e,"name","vimportmode"),void 0===t[2]&&$t((()=>t[11].call(_e))),F(be,"type","button"),F(be,"id","vimport"),be.value="V team import",F(be,"v-on:click","vimport"),F(ge,"id","vapidiv"),F($e,"class","small dim"),F(me,"class","card-body"),F(de,"class","card mb-2"),F(e,"class","container")},m(n,a){A(n,e,a),E(e,i),E(e,o),E(e,s),E(s,r),E(s,l),E(s,c),E(c,u),E(u,h),E(u,d),E(u,p),E(p,f),E(c,m),E(c,g),E(g,_),E(g,v),E(g,y),E(y,w),E(c,b),E(c,x),E(x,$),E(x,k),E(x,T),Ne.m(T,null),E(c,I),E(c,P),E(P,L),E(P,S),E(P,C),E(C,M),E(c,O),E(c,R),E(R,z),E(R,Z),E(R,H),E(H,W),E(R,K),E(R,J),E(c,X),E(c,Q),E(Q,tt),E(Q,et),E(Q,nt),E(nt,it),E(c,ot),E(c,st),E(st,rt),E(st,at),E(st,lt),E(lt,ct),E(st,ut),E(st,ht),E(c,dt),E(c,pt),E(pt,ft),E(pt,mt),E(pt,gt),E(gt,_t),E(c,vt),E(c,yt),E(c,wt),E(c,bt),E(bt,xt),E(xt,kt),E(xt,Tt),E(xt,It),E(It,Pt),E(bt,Lt),E(bt,St),E(St,Ct),E(Ct,Et),q(Et,t[1]),E(St,Ot),E(St,At),E(At,Dt),E(St,Nt),E(St,zt),E(zt,jt),E(bt,Zt),ze&&ze.m(bt,null),E(e,Ut),E(e,Ft),E(Ft,Ht),E(Ft,Wt),E(Ft,Vt),Ze.m(Vt,null),E(e,qt),E(e,Kt),E(Kt,Gt),E(Kt,Jt),E(Kt,Yt),E(Yt,Xt),E(Xt,Qt),E(Yt,te),E(Yt,ee),E(e,ne),E(e,ie),E(ie,oe),E(ie,se),E(ie,re),E(re,ae),E(ae,le),q(le,t[0].vapi),E(re,ce),E(re,ue),E(e,he),E(e,de),E(de,pe),E(de,fe),E(de,me),E(me,ge),E(ge,_e),E(_e,ve),E(_e,ye),G(_e,t[2]),E(ge,we),E(ge,be),E(me,xe),E(me,$e),ke||(Te=[U(Et,"input",t[8]),U(At,"click",t[6]),U(zt,"click",t[7]),U(le,"input",t[9]),U(le,"change",t[10]),U(_e,"change",t[11])],ke=!0)},p(t,[e]){1&e&&Ie!==(Ie=t[0].name+"")&&V(f,Ie),1&e&&Pe!==(Pe=t[0].vname+"")&&V(w,Pe),Re===(Re=De(t))&&Ne?Ne.p(t,e):(Ne.d(1),Ne=Re(t),Ne&&(Ne.c(),Ne.m(T,null))),1&e&&Le!==(Le=t[0].rocksname+"")&&V(M,Le),1&e&&Se!==(Se=t[0].rocks?"verified":"not verified")&&V(W,Se),1&e&&Ce!==(Ce=t[0].id+"")&&V(it,Ce),1&e&&Ee!==(Ee=t[0].level+"")&&V(ct,Ee),1&e&&Me!==(Me=t[0].intelname+"")&&V(_t,Me),1&e&&Oe!==(Oe=t[0].communityname+"")&&V(Pt,Oe),1&e&&Mt!==(Mt=t[0].communityname||"My Agent Name")&&F(Et,"placeholder",Mt),2&e&&Et.value!==t[1]&&q(Et,t[1]),16&e&&Y(Et,"unverified",t[4]),16&e&&Rt!==(Rt=!t[4])&&(At.disabled=Rt),16&e&&Bt!==(Bt=!t[4])&&(zt.disabled=Bt),t[3]?ze?ze.p(t,e):(ze=mo(t),ze.c(),ze.m(bt,null)):ze&&(ze.d(1),ze=null),Be===(Be=je(t))&&Ze?Ze.p(t,e):(Ze.d(1),Ze=Be(t),Ze&&(Ze.c(),Ze.m(Vt,null))),1&e&&Ae!==(Ae=t[0].lockey+"")&&V(Qt,Ae),1&e&&le.value!==t[0].vapi&&q(le,t[0].vapi),4&e&&G(_e,t[2])},i:n,o:n,d(t){t&&D(e),Ne.d(),ze&&ze.d(),Ze.d(),ke=!1,a(Te)}}}function xo(t){const e=t.target;e.focus(),e.select()}function $o(t,e,n){let i;var o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let s=Yn.get(),r=Vn().botname,a="team",l=s.communityname||"",c="";return t.$$.update=()=>{3&t.$$.dirty&&n(4,i=l&&(!s.communityname||l!==s.communityname))},[s,l,a,c,i,r,function(){return o(this,void 0,void 0,(function*(){if(l){const t=yield hi(function(t){return Pi(`/api/v1/me/commproof?name=${t}`)}(l));n(3,c=t.jwt)}}))},function(){return o(this,void 0,void 0,(function*(){l&&(yield hi(function(t){return Pi(`/api/v1/me/commverify?name=${t}`)}(l)),di("Community name verified"),n(0,s=yield qi(!0)))}))},function(){l=this.value,n(1,l)},function(){s.vapi=this.value,n(0,s)},()=>function(t){const e=new FormData;return e.append("v",t),Li("/api/v1/me/VAPIkey",e)}(s.vapi),function(){a=J(this),n(2,a)}]}class ko extends Xt{constructor(t){super(),Yt(this,t,$o,bo,c,{})}}function To(t,e,n){const i=t.slice();return i[23]=e[n],i[24]=e,i[25]=n,i}function Io(t,e,n){const i=t.slice();return i[26]=e[n][0],i[27]=e[n][1],i[29]=n,i}function Po(t){let e,n=[],i=new Map,o=t[0].Teams;const s=t=>t[23].ID;for(let e=0;e<o.length;e+=1){let r=To(t,o,e),a=s(r);i.set(a,n[e]=zo(a,r))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=Z()},m(t,i){for(let e=0;e<n.length;e+=1)n[e].m(t,i);A(t,e,i)},p(t,r){8141&r&&(o=t[0].Teams,n=Wt(n,r,s,1,t,o,i,e.parentNode,Zt,zo,e,To))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&D(e)}}}function Lo(t){let e,n,i,o,s=t[0].id+"";return{c(){e=N("tr"),n=N("td"),i=j("You are not on any teams, have your operator add you with this\n              GoogleID: "),o=j(s),F(n,"colspan","6")},m(t,s){A(t,e,s),E(e,n),E(n,i),E(n,o)},p(t,e){1&e&&s!==(s=t[0].id+"")&&V(o,s)},d(t){t&&D(e)}}}function So(t){let e,n=[],i=new Map,o=Object.entries(t[3][t[23].ID]);const s=t=>t[26];for(let e=0;e<o.length;e+=1){let r=Io(t,o,e),a=s(r);i.set(a,n[e]=Eo(a,r))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=Z()},m(t,i){for(let e=0;e<n.length;e+=1)n[e].m(t,i);A(t,e,i)},p(t,r){9&r&&(o=Object.entries(t[3][t[23].ID]),n=Wt(n,r,s,1,t,o,i,e.parentNode,Zt,Eo,e,Io))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&D(e)}}}function Co(t){let e;return{c(){e=j(",")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Eo(t,e){let n,i,o,s,r,a,l=e[27]+"",c=e[29]>0&&Co();return{key:t,first:null,c(){n=Z(),c&&c.c(),i=B(),o=N("a"),s=j(l),r=B(),F(o,"href",a="#/operation/"+e[26]+"/list"),this.first=n},m(t,e){A(t,n,e),c&&c.m(t,e),A(t,i,e),A(t,o,e),E(o,s),E(o,r)},p(t,n){(e=t)[29]>0?c||(c=Co(),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null),9&n&&l!==(l=e[27]+"")&&V(s,l),9&n&&a!==(a="#/operation/"+e[26]+"/list")&&F(o,"href",a)},d(t){t&&D(n),c&&c.d(t),t&&D(i),t&&D(o)}}}function Mo(t){let e,n,i;function o(t,e){return t[2]===t[23].ID?Do:Ao}let s=o(t),r=s(t);function a(){return t[20](t[23])}return{c(){e=N("button"),r.c(),F(e,"class","btn btn-warning btn-sm svelte-15nu3fx")},m(t,o){A(t,e,o),r.m(e,null),n||(i=U(e,"click",a),n=!0)},p(n,i){s!==(s=o(t=n))&&(r.d(1),r=s(t),r&&(r.c(),r.m(e,null)))},d(t){t&&D(e),r.d(),n=!1,i()}}}function Oo(t){let e,n,i;function o(t,e){return t[2]===t[23].ID?No:Ro}let s=o(t),r=s(t);function a(){return t[19](t[23])}return{c(){e=N("button"),r.c(),F(e,"class","btn btn-danger btn-sm svelte-15nu3fx")},m(t,o){A(t,e,o),r.m(e,null),n||(i=U(e,"click",a),n=!0)},p(n,i){s!==(s=o(t=n))&&(r.d(1),r=s(t),r&&(r.c(),r.m(e,null)))},d(t){t&&D(e),r.d(),n=!1,i()}}}function Ao(t){let e;return{c(){e=N("span"),e.textContent="Leave"},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Do(t){let e;return{c(){e=N("span"),e.textContent="Confirm?"},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Ro(t){let e;return{c(){e=N("span"),e.textContent="Delete"},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function No(t){let e;return{c(){e=N("span"),e.textContent="Confirm?"},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function zo(t,e){let n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L=e[23].Name+"",S=e[10](e[23])+"";function C(){e[13].call(p,e[24],e[25])}function M(){return e[14](e[23])}function O(){e[15].call(g,e[24],e[25])}function R(){return e[16](e[23])}function z(){e[17].call(y,e[24],e[25])}function Z(){return e[18](e[23])}let H=e[3][e[23].ID]&&So(e);function W(t,e){return(null==k||1&e)&&(k=!!t[9](t[23])),k?Oo:Mo}let q=W(e,-1),K=q(e);return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=N("a"),s=j(L),l=B(),c=N("td"),u=j(S),h=B(),d=N("td"),p=N("input"),f=B(),m=N("td"),g=N("input"),_=B(),v=N("td"),y=N("input"),w=B(),b=N("td"),H&&H.c(),x=B(),$=N("td"),K.c(),T=B(),F(o,"href",r="#/team/"+e[23].ID+"/list"),F(p,"type","checkbox"),F(g,"type","checkbox"),F(y,"type","checkbox"),this.first=n},m(t,r){A(t,n,r),E(n,i),E(i,o),E(o,s),E(n,l),E(n,c),E(c,u),E(n,h),E(n,d),E(d,p),p.checked=e[23].State,E(n,f),E(n,m),E(m,g),g.checked=e[23].ShareWD,E(n,_),E(n,v),E(v,y),y.checked=e[23].LoadWD,E(n,w),E(n,b),H&&H.m(b,null),E(n,x),E(n,$),K.m($,null),E(n,T),I||(P=[U(p,"change",C),U(p,"change",M),U(g,"change",O),U(g,"change",R),U(y,"change",z),U(y,"change",Z)],I=!0)},p(t,n){e=t,1&n&&L!==(L=e[23].Name+"")&&V(s,L),1&n&&r!==(r="#/team/"+e[23].ID+"/list")&&F(o,"href",r),1&n&&S!==(S=e[10](e[23])+"")&&V(u,S),1&n&&(p.checked=e[23].State),1&n&&(g.checked=e[23].ShareWD),1&n&&(y.checked=e[23].LoadWD),e[3][e[23].ID]?H?H.p(e,n):(H=So(e),H.c(),H.m(b,null)):H&&(H.d(1),H=null),q===(q=W(e,n))&&K?K.p(e,n):(K.d(1),K=q(e),K&&(K.c(),K.m($,null)))},d(t){t&&D(n),H&&H.d(),K.d(),I=!1,a(P)}}}function jo(t){let e,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b;function x(t,e){return t[0].Teams.length?Po:Lo}let $=x(t),k=$(t);return{c(){e=N("div"),i=N("div"),o=N("h1"),s=j("Teams "),r=N("button"),r.textContent="",l=B(),c=N("table"),u=N("thead"),u.innerHTML="<tr><th>Team</th> \n          <th>Owner</th> \n          <th>Share Location</th> \n          <th>Share WD Keys</th> \n          <th>Load WD Keys</th> \n          <th>Ops</th> \n          <th></th></tr>",h=B(),d=N("tbody"),k.c(),p=B(),f=N("div"),m=N("label"),g=j("New Team:\n        "),_=N("input"),v=B(),y=N("button"),y.textContent="New Team",F(r,"class","btn btn-primary"),F(u,"class","thead"),F(d,"id","teams"),F(d,"class","svelte-15nu3fx"),F(c,"class","table table-striped"),F(_,"type","text"),F(_,"placeholder","New Team"),F(y,"class","btn btn-info"),F(f,"class","col"),F(i,"class","row"),F(e,"class","container")},m(n,a){A(n,e,a),E(e,i),E(i,o),E(o,s),E(o,r),E(i,l),E(i,c),E(c,u),E(c,h),E(c,d),k.m(d,null),E(i,p),E(i,f),E(f,m),E(m,g),E(m,_),q(_,t[1]),E(f,v),E(f,y),w||(b=[U(r,"click",t[4]),U(_,"input",t[21]),U(y,"click",t[5])],w=!0)},p(t,[e]){$===($=x(t))&&k?k.p(t,e):(k.d(1),k=$(t),k&&(k.c(),k.m(d,null))),2&e&&_.value!==t[1]&&q(_,t[1])},i:n,o:n,d(t){t&&D(e),k.d(),w=!1,a(b)}}}function Bo(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let o,s=Yn.get(),r="",a=null;function l(){return i(this,void 0,void 0,(function*(){yield Ji(),n(0,s=Yn.get())}))}function c(t){return i(this,void 0,void 0,(function*(){try{yield(e=t.ID,n=t.State?"On":"Off",Pi(`/api/v1/me/${e}?state=${n}`))}catch(t){console.log(t)}var e,n}))}function u(t){return i(this,void 0,void 0,(function*(){try{yield(e=t.ID,n=t.ShareWD?"On":"Off",Pi(`/api/v1/me/${e}/wdshare?state=${n}`))}catch(t){console.log(t)}var e,n}))}function h(t){return i(this,void 0,void 0,(function*(){try{yield(e=t.ID,n=t.LoadWD?"On":"Off",Pi(`/api/v1/me/${e}/wdload?state=${n}`))}catch(t){console.log(t)}var e,n}))}function d(t){return i(this,void 0,void 0,(function*(){if(a!==t.ID)n(2,a=t.ID);else{try{yield yi(t.ID),l()}catch(t){console.log(t)}n(2,a=null)}}))}function p(t){return i(this,void 0,void 0,(function*(){if(a!==t.ID)n(2,a=t.ID);else{try{yield(e=t.ID,Ci(`/api/v1/me/${e}`)),l()}catch(t){console.log(t)}n(2,a=null)}var e}))}return t.$$.update=()=>{if(1&t.$$.dirty){const t={},e=s.Ops.map((t=>[t.ID,t.Name]));e.sort(((t,e)=>t[1].localeCompare(e[1])));for(const n of e.map((t=>t[0]))){const e=ai.load(n);if(e&&e.teamlist)for(const n of e.teamlist)t[n.teamid]=t[n.teamid]||{},t[n.teamid][e.ID]=e.name}n(3,o=t)}},[s,r,a,o,l,function(){return i(this,void 0,void 0,(function*(){if(r)try{yield function(t){return Pi(`/api/v1/team/new?name=${t}`)}(r),l()}catch(t){console.log(t)}}))},c,u,h,function(t){return t.Owner==s.id},function(t){const e=Jn.get(t.Owner);return e?e.name:t.Owner},d,p,function(t,e){t[e].State=this.checked,n(0,s)},t=>c(t),function(t,e){t[e].ShareWD=this.checked,n(0,s)},t=>u(t),function(t,e){t[e].LoadWD=this.checked,n(0,s)},t=>h(t),t=>d(t),t=>p(t),function(){r=this.value,n(1,r)}]}class Zo extends Xt{constructor(t){super(),Yt(this,t,Bo,jo,c,{})}}const Uo=[];let Fo;function Ho(t){const e=t.pattern.test(Fo);Wo(t,t.className,e),Wo(t,t.inactiveClassName,!e)}function Wo(t,e,n){(e||"").split(" ").forEach((e=>{e&&(t.node.classList.remove(e),n&&t.node.classList.add(e))}))}function Vo(t,e){if(!(e=e&&("string"==typeof e||"object"==typeof e&&e instanceof RegExp)?{path:e}:e||{}).path&&t.hasAttribute("href")&&(e.path=t.getAttribute("href"),e.path&&e.path.length>1&&"#"==e.path.charAt(0)&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||"string"==typeof e.path&&(e.path.length<1||"/"!=e.path.charAt(0)&&"*"!=e.path.charAt(0)))throw Error('Invalid value for "path" argument');const{pattern:n}="string"==typeof e.path?oe(e.path):{pattern:e.path},i={node:t,className:e.className,inactiveClassName:e.inactiveClassName,pattern:n};return Uo.push(i),Ho(i),{destroy(){Uo.splice(Uo.indexOf(i),1)}}}function qo(t,e,n){const i=t.slice();return i[21]=e[n],i[22]=e,i[23]=n,i}function Ko(t,e){let n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w=e[21].Name+"",b=e[5](e[21].GID)+"";function x(){return e[14](e[21])}function $(){e[15].call(h,e[22],e[23])}function k(){return e[16](e[21])}function T(){e[17].call(m,e[22],e[23])}return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=j(w),s=B(),r=N("td"),l=j(b),c=B(),u=N("td"),h=N("input"),p=B(),f=N("td"),m=N("input"),_=B(),F(h,"size","3"),F(h,"type","number"),h.disabled=d=e[21].GID!=e[2].id,F(m,"size","10"),m.disabled=g=e[21].GID!=e[2].id,this.first=n},m(t,a){A(t,n,a),E(n,i),E(i,o),E(n,s),E(n,r),E(r,l),E(n,c),E(n,u),E(u,h),q(h,e[21].Count),E(n,p),E(n,f),E(f,m),q(m,e[21].CapID),E(n,_),v||(y=[U(h,"change",x),U(h,"input",$),U(m,"change",k),U(m,"input",T)],v=!0)},p(t,n){e=t,2&n&&w!==(w=e[21].Name+"")&&V(o,w),2&n&&b!==(b=e[5](e[21].GID)+"")&&V(l,b),2&n&&d!==(d=e[21].GID!=e[2].id)&&(h.disabled=d),2&n&&W(h.value)!==e[21].Count&&q(h,e[21].Count),2&n&&g!==(g=e[21].GID!=e[2].id)&&(m.disabled=g),2&n&&m.value!==e[21].CapID&&q(m,e[21].CapID)},d(t){t&&D(n),v=!1,a(y)}}}function Go(t){let e,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v=[],y=new Map,w=t[1];const b=t=>t[21].PortalID+t[21].GID;for(let e=0;e<w.length;e+=1){let n=qo(t,w,e),i=b(n);y.set(i,v[e]=Ko(i,n))}return{c(){e=N("div"),i=N("table"),o=N("thead"),s=N("tr"),r=N("th"),r.textContent="Portal",l=B(),c=N("th"),c.textContent="Agent",u=B(),h=N("th"),h.textContent="Agent Count",d=B(),p=N("th"),p.textContent="Capsule",f=B(),m=N("tbody");for(let t=0;t<v.length;t+=1)v[t].c();F(i,"class","table table-striped"),F(e,"class","row")},m(n,a){A(n,e,a),E(e,i),E(i,o),E(o,s),E(s,r),E(s,l),E(s,c),E(s,u),E(s,h),E(s,d),E(s,p),E(i,f),E(i,m);for(let t=0;t<v.length;t+=1)v[t].m(m,null);g||(_=[U(r,"click",t[10]),U(c,"click",t[11]),U(h,"click",t[12]),U(p,"click",t[13])],g=!0)},p(t,[e]){54&e&&(w=t[1],v=Wt(v,e,b,1,t,w,y,m,Zt,Ko,null,qo))},i:n,o:n,d(t){t&&D(e);for(let t=0;t<v.length;t+=1)v[t].d();g=!1,a(_)}}}function Jo(t,e,i){let o,s=n,r=()=>(s(),s=d(c,(t=>i(9,o=t))),c);t.$$.on_destroy.push((()=>s()));var a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};const l=ht();let{dKeysStore:c}=e;r();let u=[],h=Yn.get(),p="Name",f=!1,m=[];function g(t){t&&(t===p?i(8,f=!f):(i(7,p=t),i(8,f=!1)))}function _(t){return a(this,void 0,void 0,(function*(){try{yield(e=JSON.stringify(t),Li("/api/v1/d",e,"application/json;charset=UTF-8")),t.Count<1&&l("routeEvent",{refresh:!0})}catch(t){console.log(t)}var e}))}function v(t){const e=Jn.get(t);return e?e.name:t}return t.$$set=t=>{"dKeysStore"in t&&r(i(0,c=t.dKeysStore))},t.$$.update=()=>{if(512&t.$$.dirty&&i(6,u=o),448&t.$$.dirty){const t=Array.from(u);switch(p){case"Name":case"CapID":t.sort(((t,e)=>t[p].localeCompare(e[p])));break;case"GID":t.sort(((t,e)=>v(t[p]).localeCompare(v(e[p]))));break;case"Count":t.sort(((t,e)=>t[p]-e[p]))}f&&t.reverse(),i(1,m=t)}},[c,m,h,g,_,v,u,p,f,o,()=>g("Name"),()=>g("GID"),()=>g("Count"),()=>g("CapID"),t=>_(t),function(t,e){t[e].Count=W(this.value),i(1,m),i(6,u),i(7,p),i(8,f),i(9,o)},t=>_(t),function(t,e){t[e].CapID=this.value,i(1,m),i(6,u),i(7,p),i(8,f),i(9,o)}]}ce.subscribe((t=>{Fo=t.location+(t.querystring?"?"+t.querystring:""),Uo.map(Ho)}));class Yo extends Xt{constructor(t){super(),Yt(this,t,Jo,Go,c,{dKeysStore:0})}}class Xo{constructor(t,e,n=[]){if(this.entity=t,this.eventHandlers=[],n){const i={};n.forEach((n=>{if(!(n in i)){const o=function(t){e(n,t)};this.eventHandlers.push({event:n,handler:o}),t.on(n,o),i[n]=o}}))}}unregister(){this.eventHandlers.forEach((t=>{this.entity.off(t.event,t.handler)}))}}function Qo(t){let e;const n=t[6].default,i=m(n,t,t[5],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||32&o)&&v(i,n,t,t[5],e?_(n,t[5],o,null):y(t[5]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function ts(t){let e,n,i,o,s=t[0]&&Qo(t);return{c(){e=N("div"),s&&s.c(),K(e,"height","100%"),K(e,"width","100%")},m(r,a){A(r,e,a),s&&s.m(e,null),n=!0,i||(o=$(t[1].call(null,e)),i=!0)},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&Dt(s,1)):(s=Qo(t),s.c(),Dt(s,1),s.m(e,null)):s&&(Ot(),Rt(s,1,1,(()=>{s=null})),At())},i(t){n||(Dt(s),n=!0)},o(t){Rt(s),n=!1},d(t){t&&D(e),s&&s.d(),i=!1,o()}}}function es(t,n,i){let{$$slots:o={},$$scope:s}=n,{options:r={}}=n,{events:a=[]}=n,l=null;dt(e,{getMap:()=>l});const c=ht();let u;return t.$$set=t=>{"options"in t&&i(2,r=t.options),"events"in t&&i(3,a=t.events),"$$scope"in t&&i(5,s=t.$$scope)},[l,function(t){return i(0,l=e.map(t,r)),u=new Xo(l,c,a),{destroy:()=>{u.unregister(),l.remove()}}},r,a,function(){return l},s,o]}class ns extends Xt{constructor(t){super(),Yt(this,t,es,ts,c,{options:2,events:3,getMap:4})}get getMap(){return this.$$.ctx[4]}}var is=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}},os=Object.prototype.toString;function ss(t){return"[object Array]"===os.call(t)}function rs(t){return void 0===t}function as(t){return null!==t&&"object"==typeof t}function ls(t){if("[object Object]"!==os.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function cs(t){return"[object Function]"===os.call(t)}function us(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),ss(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var hs={isArray:ss,isArrayBuffer:function(t){return"[object ArrayBuffer]"===os.call(t)},isBuffer:function(t){return null!==t&&!rs(t)&&null!==t.constructor&&!rs(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:as,isPlainObject:ls,isUndefined:rs,isDate:function(t){return"[object Date]"===os.call(t)},isFile:function(t){return"[object File]"===os.call(t)},isBlob:function(t){return"[object Blob]"===os.call(t)},isFunction:cs,isStream:function(t){return as(t)&&cs(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:us,merge:function t(){var e={};function n(n,i){ls(e[i])&&ls(n)?e[i]=t(e[i],n):ls(n)?e[i]=t({},n):ss(n)?e[i]=n.slice():e[i]=n}for(var i=0,o=arguments.length;i<o;i++)us(arguments[i],n);return e},extend:function(t,e,n){return us(e,(function(e,i){t[i]=n&&"function"==typeof e?is(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}};function ds(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ps=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(hs.isURLSearchParams(e))i=e.toString();else{var o=[];hs.forEach(e,(function(t,e){null!=t&&(hs.isArray(t)?e+="[]":t=[t],hs.forEach(t,(function(t){hs.isDate(t)?t=t.toISOString():hs.isObject(t)&&(t=JSON.stringify(t)),o.push(ds(e)+"="+ds(t))})))})),i=o.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t};function fs(){this.handlers=[]}fs.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},fs.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},fs.prototype.forEach=function(t){hs.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var ms=fs,gs=function(t,e){hs.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))},_s=function(t,e,n,i,o){return t.config=e,n&&(t.code=n),t.request=i,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},vs=function(t,e,n,i,o){var s=new Error(t);return _s(s,e,n,i,o)},ys=hs.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var r=[];r.push(t+"="+encodeURIComponent(e)),hs.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),hs.isString(i)&&r.push("path="+i),hs.isString(o)&&r.push("domain="+o),!0===s&&r.push("secure"),document.cookie=r.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ws=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],bs=hs.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=hs.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},xs=function(t){return new Promise((function(e,n){var i=t.data,o=t.headers,s=t.responseType;hs.isFormData(i)&&delete o["Content-Type"];var r=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",l=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(a+":"+l)}var c,u,h=(c=t.baseURL,u=t.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(u)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(c,u):u);function d(){if(r){var i,o,a,l,c,u="getAllResponseHeaders"in r?(i=r.getAllResponseHeaders(),c={},i?(hs.forEach(i.split("\n"),(function(t){if(l=t.indexOf(":"),o=hs.trim(t.substr(0,l)).toLowerCase(),a=hs.trim(t.substr(l+1)),o){if(c[o]&&ws.indexOf(o)>=0)return;c[o]="set-cookie"===o?(c[o]?c[o]:[]).concat([a]):c[o]?c[o]+", "+a:a}})),c):c):null,h={data:s&&"text"!==s&&"json"!==s?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:u,config:t,request:r};!function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(vs("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}(e,n,h),r=null}}if(r.open(t.method.toUpperCase(),ps(h,t.params,t.paramsSerializer),!0),r.timeout=t.timeout,"onloadend"in r?r.onloadend=d:r.onreadystatechange=function(){r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&setTimeout(d)},r.onabort=function(){r&&(n(vs("Request aborted",t,"ECONNABORTED",r)),r=null)},r.onerror=function(){n(vs("Network Error",t,null,r)),r=null},r.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(vs(e,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",r)),r=null},hs.isStandardBrowserEnv()){var p=(t.withCredentials||bs(h))&&t.xsrfCookieName?ys.read(t.xsrfCookieName):void 0;p&&(o[t.xsrfHeaderName]=p)}"setRequestHeader"in r&&hs.forEach(o,(function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete o[e]:r.setRequestHeader(e,t)})),hs.isUndefined(t.withCredentials)||(r.withCredentials=!!t.withCredentials),s&&"json"!==s&&(r.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&r.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){r&&(r.abort(),n(t),r=null)})),i||(i=null),r.send(i)}))},$s={"Content-Type":"application/x-www-form-urlencoded"};function ks(t,e){!hs.isUndefined(t)&&hs.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Ts,Is={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Ts=xs),Ts),transformRequest:[function(t,e){return gs(e,"Accept"),gs(e,"Content-Type"),hs.isFormData(t)||hs.isArrayBuffer(t)||hs.isBuffer(t)||hs.isStream(t)||hs.isFile(t)||hs.isBlob(t)?t:hs.isArrayBufferView(t)?t.buffer:hs.isURLSearchParams(t)?(ks(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):hs.isObject(t)||e&&"application/json"===e["Content-Type"]?(ks(e,"application/json"),function(t,e,n){if(hs.isString(t))try{return(e||JSON.parse)(t),hs.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&hs.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw _s(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Is.headers={common:{Accept:"application/json, text/plain, */*"}},hs.forEach(["delete","get","head"],(function(t){Is.headers[t]={}})),hs.forEach(["post","put","patch"],(function(t){Is.headers[t]=hs.merge($s)}));var Ps=Is,Ls=function(t,e,n){var i=this||Ps;return hs.forEach(n,(function(n){t=n.call(i,t,e)})),t},Ss=function(t){return!(!t||!t.__CANCEL__)};function Cs(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Es=function(t){return Cs(t),t.headers=t.headers||{},t.data=Ls.call(t,t.data,t.headers,t.transformRequest),t.headers=hs.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),hs.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Ps.adapter)(t).then((function(e){return Cs(t),e.data=Ls.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return Ss(e)||(Cs(t),e&&e.response&&(e.response.data=Ls.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},Ms=function(t,e){e=e||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],r=["validateStatus"];function a(t,e){return hs.isPlainObject(t)&&hs.isPlainObject(e)?hs.merge(t,e):hs.isPlainObject(e)?hs.merge({},e):hs.isArray(e)?e.slice():e}function l(i){hs.isUndefined(e[i])?hs.isUndefined(t[i])||(n[i]=a(void 0,t[i])):n[i]=a(t[i],e[i])}hs.forEach(i,(function(t){hs.isUndefined(e[t])||(n[t]=a(void 0,e[t]))})),hs.forEach(o,l),hs.forEach(s,(function(i){hs.isUndefined(e[i])?hs.isUndefined(t[i])||(n[i]=a(void 0,t[i])):n[i]=a(void 0,e[i])})),hs.forEach(r,(function(i){i in e?n[i]=a(t[i],e[i]):i in t&&(n[i]=a(void 0,t[i]))}));var c=i.concat(o).concat(s).concat(r),u=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return hs.forEach(u,l),n},Os={_from:"axios@^0.21.1",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",_location:"/axios",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"axios@^0.21.1",name:"axios",escapedName:"axios",rawSpec:"^0.21.1",saveSpec:null,fetchSpec:"^0.21.1"},_requiredBy:["/svelte-leafletjs"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios@^0.21.1",_where:"/data/riri/ingress/wasabee-project/Wasabee-WebUI/node_modules/svelte-leafletjs",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"},As={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){As[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var Ds={},Rs=Os.version.split(".");function Ns(t,e){for(var n=e?e.split("."):Rs,i=t.split("."),o=0;o<3;o++){if(n[o]>i[o])return!0;if(n[o]<i[o])return!1}return!1}As.transitional=function(t,e,n){var i=e&&Ns(e);function o(t,e){return"[Axios v"+Os.version+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,s,r){if(!1===t)throw new Error(o(s," has been removed in "+e));return i&&!Ds[s]&&(Ds[s]=!0,console.warn(o(s," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,s,r)}};var zs={isOlderVersion:Ns,assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var i=Object.keys(t),o=i.length;o-- >0;){var s=i[o],r=e[s];if(r){var a=t[s],l=void 0===a||r(a,s,t);if(!0!==l)throw new TypeError("option "+s+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+s)}},validators:As},js=zs.validators;function Bs(t){this.defaults=t,this.interceptors={request:new ms,response:new ms}}Bs.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Ms(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&zs.assertOptions(e,{silentJSONParsing:js.transitional(js.boolean,"1.0.0"),forcedJSONParsing:js.transitional(js.boolean,"1.0.0"),clarifyTimeoutError:js.transitional(js.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var o,s=[];if(this.interceptors.response.forEach((function(t){s.push(t.fulfilled,t.rejected)})),!i){var r=[Es,void 0];for(Array.prototype.unshift.apply(r,n),r=r.concat(s),o=Promise.resolve(t);r.length;)o=o.then(r.shift(),r.shift());return o}for(var a=t;n.length;){var l=n.shift(),c=n.shift();try{a=l(a)}catch(t){c(t);break}}try{o=Es(a)}catch(t){return Promise.reject(t)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},Bs.prototype.getUri=function(t){return t=Ms(this.defaults,t),ps(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},hs.forEach(["delete","get","head","options"],(function(t){Bs.prototype[t]=function(e,n){return this.request(Ms(n||{},{method:t,url:e,data:(n||{}).data}))}})),hs.forEach(["post","put","patch"],(function(t){Bs.prototype[t]=function(e,n,i){return this.request(Ms(i||{},{method:t,url:e,data:n}))}}));var Zs=Bs;function Us(t){this.message=t}Us.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Us.prototype.__CANCEL__=!0;var Fs=Us;function Hs(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new Fs(t),e(n.reason))}))}Hs.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Hs.source=function(){var t;return{token:new Hs((function(e){t=e})),cancel:t}};var Ws=Hs;function Vs(t){var e=new Zs(t),n=is(Zs.prototype.request,e);return hs.extend(n,Zs.prototype,e),hs.extend(n,e),n}var qs=Vs(Ps);qs.Axios=Zs,qs.create=function(t){return Vs(Ms(qs.defaults,t))},qs.Cancel=Fs,qs.CancelToken=Ws,qs.isCancel=Ss,qs.all=function(t){return Promise.all(t)},qs.spread=function(t){return function(e){return t.apply(null,e)}},qs.isAxiosError=function(t){return"object"==typeof t&&!0===t.isAxiosError};var Ks=qs;function Gs(t){let e;const n=t[11].default,i=m(n,t,t[10],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||1024&o)&&v(i,n,t,t[10],e?_(n,t[10],o,null):y(t[10]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function Js(t){let e,n,i=t[0]&&Gs(t);return{c(){e=N("div"),i&&i.c()},m(t,o){A(t,e,o),i&&i.m(e,null),n=!0},p(t,[n]){t[0]?i?(i.p(t,n),1&n&&Dt(i,1)):(i=Gs(t),i.c(),Dt(i,1),i.m(e,null)):i&&(Ot(),Rt(i,1,1,(()=>{i=null})),At())},i(t){n||(Dt(i),n=!0)},o(t){Rt(i),n=!1},d(t){t&&D(e),i&&i.d()}}}function Ys(t,n,i){let{$$slots:o={},$$scope:s}=n;const{getMap:r}=pt(e),a=e.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});let l,{latLng:c}=n,{zIndexOffset:u=0}=n,{icon:h=a}=n,{opacity:d=1}=n,{options:p={}}=n,{events:f=[]}=n,{rotationAngle:m=0}=n,{rotationOrigin:g="center bottom"}=n;dt(e.Layer,{getLayer:()=>l}),dt(e.Marker,{getMarker:()=>l});const _=ht();let v;return ut((()=>{v.unregister(),l.removeFrom(r())})),t.$$set=t=>{"latLng"in t&&i(1,c=t.latLng),"zIndexOffset"in t&&i(2,u=t.zIndexOffset),"icon"in t&&i(3,h=t.icon),"opacity"in t&&i(4,d=t.opacity),"options"in t&&i(5,p=t.options),"events"in t&&i(6,f=t.events),"rotationAngle"in t&&i(7,m=t.rotationAngle),"rotationOrigin"in t&&i(8,g=t.rotationOrigin),"$$scope"in t&&i(10,s=t.$$scope)},t.$$.update=()=>{511&t.$$.dirty&&(l||(i(0,l=e.marker(c,p).addTo(r())),v=new Xo(l,_,f)),l.setLatLng(c),l.setZIndexOffset(u),l.setIcon(h),l.setOpacity(d),l.setRotationAngle(m),l.setRotationOrigin(g))},[l,c,u,h,d,p,f,m,g,function(){return l},s,o]}qs.default=Ks;class Xs extends Xt{constructor(t){super(),Yt(this,t,Ys,Js,c,{latLng:1,zIndexOffset:2,icon:3,opacity:4,options:5,events:6,rotationAngle:7,rotationOrigin:8,getMarker:9})}get getMarker(){return this.$$.ctx[9]}}function Qs(t){let e;const n=t[13].default,i=m(n,t,t[12],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||4096&o)&&v(i,n,t,t[12],e?_(n,t[12],o,null):y(t[12]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function tr(t){let e,n,i=t[0]&&Qs(t);return{c(){e=N("div"),i&&i.c()},m(t,o){A(t,e,o),i&&i.m(e,null),n=!0},p(t,[n]){t[0]?i?(i.p(t,n),1&n&&Dt(i,1)):(i=Qs(t),i.c(),Dt(i,1),i.m(e,null)):i&&(Ot(),Rt(i,1,1,(()=>{i=null})),At())},i(t){n||(Dt(i),n=!0)},o(t){Rt(i),n=!1},d(t){t&&D(e),i&&i.d()}}}function er(t,n,i){let{$$slots:o={},$$scope:s}=n;const{getMap:r}=pt(e);let a,{latLngs:l}=n,{color:c="#3388ff"}=n,{weight:u=3}=n,{opacity:h=1}=n,{lineCap:d="round"}=n,{lineJoin:p="round"}=n,{dashArray:f=null}=n,{dashOffset:m=null}=n,{options:g={}}=n,{events:_=[]}=n;dt(e.Layer,{getLayer:()=>a});const v=ht();let y;return ut((()=>{y.unregister(),a.removeFrom(r())})),t.$$set=t=>{"latLngs"in t&&i(1,l=t.latLngs),"color"in t&&i(2,c=t.color),"weight"in t&&i(3,u=t.weight),"opacity"in t&&i(4,h=t.opacity),"lineCap"in t&&i(5,d=t.lineCap),"lineJoin"in t&&i(6,p=t.lineJoin),"dashArray"in t&&i(7,f=t.dashArray),"dashOffset"in t&&i(8,m=t.dashOffset),"options"in t&&i(9,g=t.options),"events"in t&&i(10,_=t.events),"$$scope"in t&&i(12,s=t.$$scope)},t.$$.update=()=>{2047&t.$$.dirty&&(a||(i(0,a=e.polyline(l,g).addTo(r())),y=new Xo(a,v,_)),a.setLatLngs(l),a.setStyle({color:c,weight:u,opacity:h,lineCap:d,lineJoin:p,dashArray:f,dashOffset:m}))},[a,l,c,u,h,d,p,f,m,g,_,function(){return a},s,o]}class nr extends Xt{constructor(t){super(),Yt(this,t,er,tr,c,{latLngs:1,color:2,weight:3,opacity:4,lineCap:5,lineJoin:6,dashArray:7,dashOffset:8,options:9,events:10,getPolyline:11})}get getPolyline(){return this.$$.ctx[11]}}function ir(t){let e;const n=t[17].default,i=m(n,t,t[16],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,o){i&&i.p&&(!e||65536&o)&&v(i,n,t,t[16],e?_(n,t[16],o,null):y(t[16]),null)},i(t){e||(Dt(i,t),e=!0)},o(t){Rt(i,t),e=!1},d(t){i&&i.d(t)}}}function or(t){let e,n,i=t[0]&&ir(t);return{c(){e=N("div"),i&&i.c()},m(t,o){A(t,e,o),i&&i.m(e,null),n=!0},p(t,[n]){t[0]?i?(i.p(t,n),1&n&&Dt(i,1)):(i=ir(t),i.c(),Dt(i,1),i.m(e,null)):i&&(Ot(),Rt(i,1,1,(()=>{i=null})),At())},i(t){n||(Dt(i),n=!0)},o(t){Rt(i),n=!1},d(t){t&&D(e),i&&i.d()}}}function sr(t,n,i){let{$$slots:o={},$$scope:s}=n;const{getMap:r}=pt(e);let a,{latLngs:l}=n,{color:c="#3388ff"}=n,{weight:u=3}=n,{opacity:h=1}=n,{lineCap:d="round"}=n,{lineJoin:p="round"}=n,{dashArray:f=null}=n,{dashOffset:m=null}=n,{fill:g=!0}=n,{fillColor:_="#3388ff"}=n,{fillOpacity:v=.2}=n,{fillRule:y="evenodd"}=n,{options:w={}}=n,{events:b=[]}=n;dt(e.Layer,{getLayer:()=>a});const x=ht();let $;return ut((()=>{$.unregister(),a.removeFrom(r())})),t.$$set=t=>{"latLngs"in t&&i(1,l=t.latLngs),"color"in t&&i(2,c=t.color),"weight"in t&&i(3,u=t.weight),"opacity"in t&&i(4,h=t.opacity),"lineCap"in t&&i(5,d=t.lineCap),"lineJoin"in t&&i(6,p=t.lineJoin),"dashArray"in t&&i(7,f=t.dashArray),"dashOffset"in t&&i(8,m=t.dashOffset),"fill"in t&&i(9,g=t.fill),"fillColor"in t&&i(10,_=t.fillColor),"fillOpacity"in t&&i(11,v=t.fillOpacity),"fillRule"in t&&i(12,y=t.fillRule),"options"in t&&i(13,w=t.options),"events"in t&&i(14,b=t.events),"$$scope"in t&&i(16,s=t.$$scope)},t.$$.update=()=>{32767&t.$$.dirty&&(a||(i(0,a=e.polygon(l,w).addTo(r())),$=new Xo(a,x,b)),a.setLatLngs(l),a.setStyle({color:c,weight:u,opacity:h,lineCap:d,lineJoin:p,dashArray:f,dashOffset:m,fill:g,fillColor:_,fillOpacity:v,fillRule:y}))},[a,l,c,u,h,d,p,f,m,g,_,v,y,w,b,function(){return a},s,o]}class rr extends Xt{constructor(t){super(),Yt(this,t,sr,or,c,{latLngs:1,color:2,weight:3,opacity:4,lineCap:5,lineJoin:6,dashArray:7,dashOffset:8,fill:9,fillColor:10,fillOpacity:11,fillRule:12,options:13,events:14,getPolygon:15})}get getPolygon(){return this.$$.ctx[15]}}function ar(t){let e,n,i;const o=t[5].default,s=m(o,t,t[4],null);return{c(){e=N("div"),n=N("div"),s&&s.c(),K(e,"display","none")},m(o,r){A(o,e,r),E(e,n),s&&s.m(n,null),t[6](n),i=!0},p(t,[e]){s&&s.p&&(!i||16&e)&&v(s,o,t,t[4],i?_(o,t[4],e,null):y(t[4]),null)},i(t){i||(Dt(s,t),i=!0)},o(t){Rt(s,t),i=!1},d(n){n&&D(e),s&&s.d(n),t[6](null)}}}function lr(t,n,i){let{$$slots:o={},$$scope:s}=n;const{getLayer:r}=pt(e.Layer);let a,l,{events:c=[]}=n;const u=ht();let h;return ut((()=>{h.unregister()})),t.$$set=t=>{"events"in t&&i(1,c=t.events),"$$scope"in t&&i(4,s=t.$$scope)},t.$$.update=()=>{11&t.$$.dirty&&(a||(i(3,a=e.popup()),h=new Xo(a,u,c),r().bindPopup(a)),a.setContent(l))},[l,c,function(){return a},a,s,o,function(t){gt[t?"unshift":"push"]((()=>{l=t,i(0,l)}))}]}class cr extends Xt{constructor(t){super(),Yt(this,t,lr,ar,c,{events:1,getPopup:2})}get getPopup(){return this.$$.ctx[2]}}function ur(t,n,i){const{getMap:o}=pt(e);let s,{url:r}=n,{wms:a=!1}=n,{opacity:l=1}=n,{zIndex:c=1}=n,{options:u={}}=n,{events:h=[]}=n;const d=ht();let p;return ut((()=>{p.unregister(),s.removeFrom(o())})),t.$$set=t=>{"url"in t&&i(0,r=t.url),"wms"in t&&i(1,a=t.wms),"opacity"in t&&i(2,l=t.opacity),"zIndex"in t&&i(3,c=t.zIndex),"options"in t&&i(4,u=t.options),"events"in t&&i(5,h=t.events)},t.$$.update=()=>{191&t.$$.dirty&&(s||(i(7,s=(a?e.tileLayer.wms(r,u):e.tileLayer(r,u)).addTo(o())),p=new Xo(s,d,h)),s.setUrl(r),s.setOpacity(l),s.setZIndex(c))},[r,a,l,c,u,h,function(){return s},s]}class hr extends Xt{constructor(t){super(),Yt(this,t,ur,null,c,{url:0,wms:1,opacity:2,zIndex:3,options:4,events:5,getTileLayer:6})}get getTileLayer(){return this.$$.ctx[6]}}function dr(t,e,n){const i=t.slice();return i[9]=e[n],i}function pr(t){let n,i;return n=new Xs({props:{latLng:[t[9].Lat,t[9].Lng],icon:new e.Icon(t[5]),options:{title:t[9].Name}}}),{c(){Kt(n.$$.fragment)},m(t,e){Gt(n,t,e),i=!0},p(t,e){const i={};2&e&&(i.latLng=[t[9].Lat,t[9].Lng]),2&e&&(i.options={title:t[9].Name}),n.$set(i)},i(t){i||(Dt(n.$$.fragment,t),i=!0)},o(t){Rt(n.$$.fragment,t),i=!1},d(t){Jt(n,t)}}}function fr(t){let e,n,i,o;e=new hr({props:{url:gr,options:t[4]}});let s=t[1],r=[];for(let e=0;e<s.length;e+=1)r[e]=pr(dr(t,s,e));const a=t=>Rt(r[t],1,1,(()=>{r[t]=null}));return{c(){Kt(e.$$.fragment),n=B();for(let t=0;t<r.length;t+=1)r[t].c();i=Z()},m(t,s){Gt(e,t,s),A(t,n,s);for(let e=0;e<r.length;e+=1)r[e].m(t,s);A(t,i,s),o=!0},p(t,e){if(34&e){let n;for(s=t[1],n=0;n<s.length;n+=1){const o=dr(t,s,n);r[n]?(r[n].p(o,e),Dt(r[n],1)):(r[n]=pr(o),r[n].c(),Dt(r[n],1),r[n].m(i.parentNode,i))}for(Ot(),n=s.length;n<r.length;n+=1)a(n);At()}},i(t){if(!o){Dt(e.$$.fragment,t);for(let t=0;t<s.length;t+=1)Dt(r[t]);o=!0}},o(t){Rt(e.$$.fragment,t),r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Rt(r[t]);o=!1},d(t){Jt(e,t),t&&D(n),R(r,t),t&&D(i)}}}function mr(t){let e,n,i,o={options:t[3],$$slots:{default:[fr]},$$scope:{ctx:t}};return n=new ns({props:o}),t[8](n),{c(){e=N("div"),Kt(n.$$.fragment),F(e,"id","map"),F(e,"class","svelte-1iwg3ka")},m(t,o){A(t,e,o),Gt(n,e,null),i=!0},p(t,[e]){const i={};4098&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i)},i(t){i||(Dt(n.$$.fragment,t),i=!0)},o(t){Rt(n.$$.fragment,t),i=!1},d(i){i&&D(e),t[8](null),Jt(n)}}}(()=>{const t=e.Marker.prototype._initIcon,n=e.Marker.prototype._setPos,i="msTransform"===e.DomUtil.TRANSFORM;e.Marker.addInitHook((function(){let t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),e.Marker.include({_initIcon:function(){t.call(this)},_setPos:function(t){n.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[e.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[e.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[e.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})})();const gr="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";function _r(t,e,i){let o,s=n,r=()=>(s(),s=d(a,(t=>i(7,o=t))),a);t.$$.on_destroy.push((()=>s()));let{dKeysStore:a}=e;r();let l,c=[],u=[];return t.$$set=t=>{"dKeysStore"in t&&r(i(0,a=t.dKeysStore))},t.$$.update=()=>{if(128&t.$$.dirty&&i(6,c=o),64&t.$$.dirty){const t={};for(const e of c)t[e.PortalID]=e;i(1,u=Object.values(t))}if(6&t.$$.dirty&&l){const t=u.map((t=>[t.Lat,t.Lng]));t.length>0&&l.getMap().fitBounds(t)}},[a,u,l,{center:[0,0],zoom:3},{minZoom:0,maxZoom:20,maxNativeZoom:19,attribution:" OpenStreetMap contributors"},{iconUrl:"https://cdn2.wasabee.rocks/img/markers/wasabee_markers_key_done.svg",iconSize:[24,41],iconAnchor:[12,41],popupAnchor:[-1,-48]},c,o,function(t){gt[t?"unshift":"push"]((()=>{l=t,i(2,l)}))}]}class vr extends Xt{constructor(t){super(),Yt(this,t,_r,mr,c,{dKeysStore:0})}}function yr(t){let e,i,o,s,r,l,c,u,h,d,p,f,m,g;return p=new pe({props:{prefix:"/defensivekeys",routes:t[0]}}),p.$on("routeEvent",t[2]),{c(){e=N("ul"),i=N("li"),o=N("a"),o.textContent="Checklist",s=B(),r=N("li"),l=N("a"),l.textContent="Map",c=B(),u=N("button"),u.textContent="",h=B(),d=N("div"),Kt(p.$$.fragment),F(o,"class","nav-link"),F(o,"href","#/defensivekeys/list"),F(i,"class","nav-item"),F(l,"class","nav-link"),F(l,"href","#/defensivekeys/map"),F(r,"class","nav-item"),F(u,"class","btn btn-primary"),F(e,"class","nav nav-tabs"),F(d,"class","container")},m(n,a){A(n,e,a),E(e,i),E(i,o),E(e,s),E(e,r),E(r,l),E(e,c),E(e,u),A(n,h,a),A(n,d,a),Gt(p,d,null),f=!0,m||(g=[$(Vo.call(null,o)),$(Vo.call(null,l)),U(u,"click",t[4])],m=!0)},p:n,i(t){f||(Dt(p.$$.fragment,t),f=!0)},o(t){Rt(p.$$.fragment,t),f=!1},d(t){t&&D(e),t&&D(h),t&&D(d),Jt(p),m=!1,a(g)}}}function wr(t,e,n){let i=ne(null),o=[];const s={"/map":Qt({component:vr,props:{dKeysStore:i}}),"*":Qt({component:Yo,props:{dKeysStore:i}})};function r(){Pi("/api/v1/d").then((t=>{n(3,o=t.DefensiveKeys||[])}))}r();return t.$$.update=()=>{8&t.$$.dirty&&i.set(o)},[s,r,function(t){t.detail&&"refresh"in t.detail&&r()},o,()=>r()]}class br extends Xt{constructor(t){super(),Yt(this,t,wr,yr,c,{})}}function xr(t){let e,i,o,s=t[0].name+"";return{c(){e=N("a"),i=j(s),F(e,"href",o="https://intel.ingress.com/?z=14&pll="+t[0].lat+","+t[0].lng),F(e,"target","_blank")},m(t,n){A(t,e,n),E(e,i)},p(t,[n]){1&n&&s!==(s=t[0].name+"")&&V(i,s),1&n&&o!==(o="https://intel.ingress.com/?z=14&pll="+t[0].lat+","+t[0].lng)&&F(e,"href",o)},i:n,o:n,d(t){t&&D(e)}}}function $r(t,e,n){let i,{portalId:o}=e,{operation:s}=e;return t.$$set=t=>{"portalId"in t&&n(1,o=t.portalId),"operation"in t&&n(2,s=t.operation)},t.$$.update=()=>{6&t.$$.dirty&&n(0,i=s.getPortal(o))},[i,o,s]}class kr extends Xt{constructor(t){super(),Yt(this,t,$r,xr,c,{portalId:1,operation:2})}}const{Map:Tr}=Bt;function Ir(t,e,n){const i=t.slice();return i[20]=e[n],i[21]=e,i[22]=n,i}function Pr(t,e,n){const i=t.slice();return i[23]=e[n],i}function Lr(t){let e,n,i,o,s,r,a=[],l=new Tr,c=t[4];const u=t=>t[23].id;for(let e=0;e<c.length;e+=1){let n=Pr(t,c,e),i=u(n);l.set(i,a[e]=Sr(i,n))}return{c(){e=N("li"),n=N("label"),i=j("Agent:\n            "),o=N("select");for(let t=0;t<a.length;t+=1)a[t].c();void 0===t[3]&&$t((()=>t[15].call(o))),F(e,"class","list-group-item")},m(l,c){A(l,e,c),E(e,n),E(n,i),E(n,o);for(let t=0;t<a.length;t+=1)a[t].m(o,null);G(o,t[3]),s||(r=U(o,"change",t[15]),s=!0)},p(t,e){16&e&&(c=t[4],a=Wt(a,e,u,1,t,c,l,o,Zt,Sr,null,Pr)),24&e&&G(o,t[3])},d(t){t&&D(e);for(let t=0;t<a.length;t+=1)a[t].d();s=!1,r()}}}function Sr(t,e){let n,i,o,s,r=e[23].name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[23].id,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,o){e=t,16&o&&r!==(r=e[23].name+"")&&V(i,r),16&o&&s!==(s=e[23].id)&&(n.__value=s,n.value=n.__value)},d(t){t&&D(n)}}}function Cr(t){let e,n,i,o,s,r,a,l,c,u=t[11](t[20])+"";return n=new kr({props:{portalId:t[20].fromPortalId,operation:t[2]}}),s=new kr({props:{portalId:t[20].toPortalId,operation:t[2]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),Kt(s.$$.fragment),r=B(),a=N("td"),l=j(u)},m(t,u){A(t,e,u),Gt(n,e,null),A(t,i,u),A(t,o,u),Gt(s,o,null),A(t,r,u),A(t,a,u),E(a,l),c=!0},p(t,e){const i={};32&e&&(i.portalId=t[20].fromPortalId),4&e&&(i.operation=t[2]),n.$set(i);const o={};32&e&&(o.portalId=t[20].toPortalId),4&e&&(o.operation=t[2]),s.$set(o),(!c||32&e)&&u!==(u=t[11](t[20])+"")&&V(l,u)},i(t){c||(Dt(n.$$.fragment,t),Dt(s.$$.fragment,t),c=!0)},o(t){Rt(n.$$.fragment,t),Rt(s.$$.fragment,t),c=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),Jt(s),t&&D(r),t&&D(a)}}}function Er(t){let e,n,i,o,s,r,a,l,c,u=t[20].friendlyType+"";return n=new kr({props:{portalId:t[20].portalId,operation:t[2]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),s=j(u),a=B(),l=N("td"),F(o,"class",r=t[20].type)},m(t,r){A(t,e,r),Gt(n,e,null),A(t,i,r),A(t,o,r),E(o,s),A(t,a,r),A(t,l,r),c=!0},p(t,e){const i={};32&e&&(i.portalId=t[20].portalId),4&e&&(i.operation=t[2]),n.$set(i),(!c||32&e)&&u!==(u=t[20].friendlyType+"")&&V(s,u),(!c||32&e&&r!==(r=t[20].type))&&F(o,"class",r)},i(t){c||(Dt(n.$$.fragment,t),c=!0)},o(t){Rt(n.$$.fragment,t),c=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),t&&D(a),t&&D(l)}}}function Mr(t){let e,n,i;function o(){return t[16](t[20])}return{c(){e=N("button"),e.textContent="ack",F(e,"class","btn btn-warning btn-sm")},m(t,s){A(t,e,s),n||(i=U(e,"click",o),n=!0)},p(e,n){t=e},d(t){t&&D(e),n=!1,i()}}}function Or(t,e){let n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P=e[20].order+"",L=e[8](e[20].assignedTo)+"",S=e[9](e[20]),C=e[20].comment+"",M=e[12](e[20].zone)+"";const O=[Er,Cr],R=[];function z(t,e){return t[20]instanceof oi?0:t[20]instanceof Qn?1:-1}~(r=z(e))&&(l=R[r]=O[r](e));let Z=S&&Mr(e);function H(){e[17].call(b,e[21],e[22])}function W(){return e[18](e[20])}return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=j(P),s=B(),l&&l.c(),c=B(),u=N("td"),h=j(L),d=B(),Z&&Z.c(),p=B(),f=N("td"),m=j(C),g=B(),_=N("td"),v=j(M),y=B(),w=N("td"),b=N("input"),$=B(),F(b,"type","checkbox"),b.disabled=x=!e[6]&&e[20].assignedTo!=e[7].id,F(w,"class","text-center"),this.first=n},m(t,a){A(t,n,a),E(n,i),E(i,o),E(n,s),~r&&R[r].m(n,null),E(n,c),E(n,u),E(u,h),E(u,d),Z&&Z.m(u,null),E(n,p),E(n,f),E(f,m),E(n,g),E(n,_),E(_,v),E(n,y),E(n,w),E(w,b),b.checked=e[20].completed,E(n,$),k=!0,T||(I=[U(b,"change",H),U(b,"change",W)],T=!0)},p(t,i){e=t,(!k||32&i)&&P!==(P=e[20].order+"")&&V(o,P);let s=r;r=z(e),r===s?~r&&R[r].p(e,i):(l&&(Ot(),Rt(R[s],1,1,(()=>{R[s]=null})),At()),~r?(l=R[r],l?l.p(e,i):(l=R[r]=O[r](e),l.c()),Dt(l,1),l.m(n,c)):l=null),(!k||32&i)&&L!==(L=e[8](e[20].assignedTo)+"")&&V(h,L),32&i&&(S=e[9](e[20])),S?Z?Z.p(e,i):(Z=Mr(e),Z.c(),Z.m(u,null)):Z&&(Z.d(1),Z=null),(!k||32&i)&&C!==(C=e[20].comment+"")&&V(m,C),(!k||32&i)&&M!==(M=e[12](e[20].zone)+"")&&V(v,M),(!k||96&i&&x!==(x=!e[6]&&e[20].assignedTo!=e[7].id))&&(b.disabled=x),32&i&&(b.checked=e[20].completed)},i(t){k||(Dt(l),k=!0)},o(t){Rt(l),k=!1},d(t){t&&D(n),~r&&R[r].d(),Z&&Z.d(),T=!1,a(I)}}}function Ar(t){let e,n,i,o,s,r,a,l,c,u,h,d,p,f,m,g,_,v,y=t[2].name+"",w=t[2].comment+"",b=[],x=new Tr,$=t[1]&&Lr(t),k=t[5];const T=t=>t[20].ID;for(let e=0;e<k.length;e+=1){let n=Ir(t,k,e),i=T(n);x.set(i,b[e]=Or(i,n))}return{c(){e=N("div"),n=N("div"),i=j(y),o=B(),s=N("div"),r=N("ul"),a=N("li"),l=j("Comment: "),c=j(w),u=B(),$&&$.c(),h=B(),d=N("table"),p=N("thead"),p.innerHTML='<tr><th scope="col">Order</th> \n      <th scope="col">Portal</th> \n      <th scope="col">To/Action</th> \n      <th scope="col">Distance</th> \n      <th scope="col">Assigned To</th> \n      <th scope="col">Description</th> \n      <th scope="col">Zone</th> \n      <th scope="col">Completed</th></tr>',f=B(),m=N("tbody");for(let t=0;t<b.length;t+=1)b[t].c();g=B(),_=N("div"),F(n,"class","card-header"),F(n,"id","opName"),F(a,"class","list-group-item"),F(a,"id","opComment"),F(r,"class","list-group list-group-flush"),F(s,"class","card-body"),F(e,"class","card mb-2"),F(m,"id","opSteps"),F(d,"class","table table-striped"),F(d,"id","optable"),F(_,"id","opTable")},m(t,y){A(t,e,y),E(e,n),E(n,i),E(e,o),E(e,s),E(s,r),E(r,a),E(a,l),E(a,c),E(r,u),$&&$.m(r,null),A(t,h,y),A(t,d,y),E(d,p),E(d,f),E(d,m);for(let t=0;t<b.length;t+=1)b[t].m(m,null);A(t,g,y),A(t,_,y),v=!0},p(t,[e]){(!v||4&e)&&y!==(y=t[2].name+"")&&V(i,y),(!v||4&e)&&w!==(w=t[2].comment+"")&&V(c,w),t[1]?$?$.p(t,e):($=Lr(t),$.c(),$.m(r,null)):$&&($.d(1),$=null),16356&e&&(k=t[5],Ot(),b=Wt(b,e,T,1,t,k,x,m,Ut,Or,null,Ir),At())},i(t){if(!v){for(let t=0;t<k.length;t+=1)Dt(b[t]);v=!0}},o(t){for(let t=0;t<b.length;t+=1)Rt(b[t]);v=!1},d(t){t&&D(e),$&&$.d(),t&&D(h),t&&D(d);for(let t=0;t<b.length;t+=1)b[t].d();t&&D(g),t&&D(_)}}}function Dr(t){return Math.pow(Math.E,Math.log(t)/4)}function Rr(t,e,i){let o,s,r=n,a=()=>(r(),r=d(c,(t=>i(14,s=t))),c);t.$$.on_destroy.push((()=>r()));var l=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let{opStore:c}=e;a();let u=null,{assignmentsOnly:h=!1}=e;const p=Yn.get();let f=p.id,m=[],g=[];function _(t){return l(this,void 0,void 0,(function*(){try{console.log("setting marker acknowledge"),yield hi(function(t,e,n){let i="incomplete";switch(n){case"acknowledged":i="acknowledge";break;case"pending":i="incomplete";break;case"completed":i="complete";break;default:i="incomplete"}return Pi(`/api/v1/draw/${t}/marker/${e}/${i}`)}(u.ID,t.ID,"acknowledged")),t.state="acknowledged",u.store(),i(5,g),i(2,u),i(1,h),i(3,f),i(14,s)}catch(t){console.log(t)}}))}function v(t){return l(this,void 0,void 0,(function*(){try{yield hi(ki(u,t,t.completed)),u.store()}catch(e){t.completed=!t.completed,i(5,g),i(2,u),i(1,h),i(3,f),i(14,s),console.log(e)}}))}return t.$$set=t=>{"opStore"in t&&a(i(0,c=t.opStore)),"assignmentsOnly"in t&&i(1,h=t.assignmentsOnly)},t.$$.update=()=>{if(16384&t.$$.dirty&&i(2,u=s),4&t.$$.dirty&&i(6,o=!!u&&u.mayWrite(p)),4&t.$$.dirty){const t=new Map;for(const e of u.teamlist){const n=ui.get(e.teamid);if(n)for(const e of n.agents)t.set(e.id,e)}t.size?i(4,m=Array.from(t.values())):i(4,m=[{id:p.id,name:p.name}])}if(14&t.$$.dirty&&u){const t=u.markers.concat(u.links);t.sort(((t,e)=>t.order-e.order)),i(5,g=h?t.filter((t=>t.assignedTo==f)):t)}},[c,h,u,f,m,g,o,p,function(t){if(!t)return"";const e=Jn.get(t);return e?e.name:t},function(t){return t instanceof oi&&(!("acknowledged"==t.state||"completed"==t.state)&&t.assignedTo==p.id)},_,function(t){const e=Math.round(t.length(u)/10)/100;let n=1;return e>.016&&(n=Dr(1e3*e)/(2*Dr(10))),n>8&&(n=8),n=Math.round(10*n)/10,e+"km (L"+n+")"},function(t){for(const e of u.zones)if(e.id==t)return e.name;return"*"},v,s,function(){f=J(this),i(3,f),i(4,m),i(2,u),i(14,s)},t=>_(t),function(t,e){t[e].completed=this.checked,i(5,g),i(2,u),i(1,h),i(3,f),i(14,s)},t=>v(t)]}class Nr extends Xt{constructor(t){super(),Yt(this,t,Rr,Ar,c,{opStore:0,assignmentsOnly:1})}}const{Map:zr}=Bt;function jr(t,e,n){const i=t.slice();return i[37]=e[n],i}function Br(t,e,n){const i=t.slice();return i[40]=e[n][0],i[41]=e[n][1],i}function Zr(t,e,n){const i=t.slice();return i[41]=e[n],i}function Ur(t,e,n){const i=t.slice();return i[37]=e[n],i}function Fr(t,e,n){const i=t.slice();return i[48]=e[n],i}function Hr(t,e){let n,i,o,s,r=e[48].name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[48].id,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,o){e=t,128&o[0]&&r!==(r=e[48].name+"")&&V(i,r),128&o[0]&&s!==(s=e[48].id)&&(n.__value=s,n.value=n.__value)},d(t){t&&D(n)}}}function Wr(t,e){let n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L=e[37].name+"",S=e[37].required+"",C=e[37].agentRequired+"",M=e[37].onHand+"";function O(...t){return e[29](e[37],...t)}function R(...t){return e[30](e[37],...t)}function z(){return e[31](e[37])}return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=j(L),s=B(),r=N("td"),l=j(S),c=B(),u=N("td"),h=j(C),d=B(),p=N("td"),f=j(M),m=B(),g=N("td"),_=N("input"),w=B(),b=N("td"),x=N("input"),T=B(),F(_,"size","3"),_.value=v=e[37].iHave,F(_,"type","number"),_.disabled=y=e[2]!=e[12].id,F(x,"size","10"),x.value=$=e[37].capsule,x.disabled=k=e[2]!=e[12].id,Y(n,"table-warning",e[37].agentRequired>e[37].iHave),Y(n,"table-danger",e[37].required>e[37].onHand),this.first=n},m(t,e){A(t,n,e),E(n,i),E(i,o),E(n,s),E(n,r),E(r,l),E(n,c),E(n,u),E(u,h),E(n,d),E(n,p),E(p,f),E(n,m),E(n,g),E(g,_),E(n,w),E(n,b),E(b,x),E(n,T),I||(P=[U(_,"change",O),U(x,"change",R),U(n,"click",z)],I=!0)},p(t,i){e=t,256&i[0]&&L!==(L=e[37].name+"")&&V(o,L),256&i[0]&&S!==(S=e[37].required+"")&&V(l,S),256&i[0]&&C!==(C=e[37].agentRequired+"")&&V(h,C),256&i[0]&&M!==(M=e[37].onHand+"")&&V(f,M),256&i[0]&&v!==(v=e[37].iHave)&&(_.value=v),132&i[0]&&y!==(y=e[2]!=e[12].id)&&(_.disabled=y),256&i[0]&&$!==($=e[37].capsule)&&x.value!==$&&(x.value=$),132&i[0]&&k!==(k=e[2]!=e[12].id)&&(x.disabled=k),256&i[0]&&Y(n,"table-warning",e[37].agentRequired>e[37].iHave),256&i[0]&&Y(n,"table-danger",e[37].required>e[37].onHand)},d(t){t&&D(n),I=!1,a(P)}}}function Vr(t){let e,n,i,o,s,r,a,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k=[],T=new zr,I=[],P=new zr;o=new ns({props:{options:{zoom:3,center:[0,0]},$$slots:{default:[qr]},$$scope:{ctx:t}}}),t[32](o);let L=t[11];const S=t=>t[41].to+t[41].zone+"";for(let e=0;e<L.length;e+=1){let n=Zr(t,L,e),i=S(n);T.set(i,k[e]=Gr(i,n))}let C=Object.entries(t[4]);const M=t=>t[40];for(let e=0;e<C.length;e+=1){let n=Br(t,C,e),i=M(n);P.set(i,I[e]=Yr(i,n))}let O="[unassigned]"in t[4]&&Xr(t);return{c(){e=N("div"),n=N("div"),i=N("div"),Kt(o.$$.fragment),s=B(),r=N("div"),a=N("h3"),l=j(t[9]),c=j(" keys required"),u=B(),h=N("table"),d=N("tr"),d.innerHTML="<th>Zone</th><th>required</th>",p=B();for(let t=0;t<k.length;t+=1)k[t].c();f=B(),m=N("table"),g=N("tr"),g.innerHTML="<th>Agent</th><th>has</th><th>required</th>",_=B();for(let t=0;t<I.length;t+=1)I[t].c();v=B(),O&&O.c(),y=B(),w=N("button"),w.textContent="Close",F(i,"class","map svelte-ycmq6c"),F(h,"class","table table-striped"),F(m,"class","table table-striped"),F(w,"class","btn btn-primary"),F(r,"class","card-body"),F(n,"class","card svelte-ycmq6c"),F(e,"class","col sidemap col-md-4 svelte-ycmq6c")},m(T,P){A(T,e,P),E(e,n),E(n,i),Gt(o,i,null),E(n,s),E(n,r),E(r,a),E(a,l),E(a,c),E(r,u),E(r,h),E(h,d),E(h,p);for(let t=0;t<k.length;t+=1)k[t].m(h,null);E(r,f),E(r,m),E(m,g),E(m,_);for(let t=0;t<I.length;t+=1)I[t].m(m,null);E(m,v),O&&O.m(m,null),E(r,y),E(r,w),b=!0,x||($=U(w,"click",t[33]),x=!0)},p(t,e){const n={};64&e[0]|1048576&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),(!b||512&e[0])&&V(l,t[9]),2058&e[0]&&(L=t[11],k=Wt(k,e,S,1,t,L,T,h,Zt,Gr,null,Zr)),65552&e[0]&&(C=Object.entries(t[4]),I=Wt(I,e,M,1,t,C,P,m,Zt,Yr,v,Br)),"[unassigned]"in t[4]?O?O.p(t,e):(O=Xr(t),O.c(),O.m(m,null)):O&&(O.d(1),O=null)},i(t){b||(Dt(o.$$.fragment,t),b=!0)},o(t){Rt(o.$$.fragment,t),b=!1},d(n){n&&D(e),t[32](null),Jt(o);for(let t=0;t<k.length;t+=1)k[t].d();for(let t=0;t<I.length;t+=1)I[t].d();O&&O.d(),x=!1,$()}}}function qr(t){let n,i,o,s;return n=new hr({props:{url:ea,options:t[17]}}),o=new Xs({props:{latLng:t[6].latLng,icon:new e.Icon(t[18]),options:{title:t[6].name}}}),{c(){Kt(n.$$.fragment),i=B(),Kt(o.$$.fragment)},m(t,e){Gt(n,t,e),A(t,i,e),Gt(o,t,e),s=!0},p(t,e){const n={};64&e[0]&&(n.latLng=t[6].latLng),64&e[0]&&(n.options={title:t[6].name}),o.$set(n)},i(t){s||(Dt(n.$$.fragment,t),Dt(o.$$.fragment,t),s=!0)},o(t){Rt(n.$$.fragment,t),Rt(o.$$.fragment,t),s=!1},d(t){Jt(n,t),t&&D(i),Jt(o,t)}}}function Kr(t){let e,n,i,o,s,r,a,l=t[1].zoneName(t[41].zone)+"",c=t[41].count+"";return{c(){e=N("tr"),n=N("td"),i=j(l),o=B(),s=N("td"),r=j(c),a=B()},m(t,l){A(t,e,l),E(e,n),E(n,i),E(e,o),E(e,s),E(s,r),E(e,a)},p(t,e){2050&e[0]&&l!==(l=t[1].zoneName(t[41].zone)+"")&&V(i,l),2048&e[0]&&c!==(c=t[41].count+"")&&V(r,c)},d(t){t&&D(e)}}}function Gr(t,e){let n,i,o=e[41].to===e[3]&&Kr(e);return{key:t,first:null,c(){n=Z(),o&&o.c(),i=Z(),this.first=n},m(t,e){A(t,n,e),o&&o.m(t,e),A(t,i,e)},p(t,n){(e=t)[41].to===e[3]?o?o.p(e,n):(o=Kr(e),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&D(n),o&&o.d(t),t&&D(i)}}}function Jr(t){let e,n,i,o,s,r,a,l,c,u=t[16](t[40])+"",h=t[41].onHand+"",d=t[41].required+"";return{c(){e=N("tr"),n=N("td"),i=j(u),o=B(),s=N("td"),r=j(h),a=B(),l=N("td"),c=j(d)},m(t,u){A(t,e,u),E(e,n),E(n,i),E(e,o),E(e,s),E(s,r),E(e,a),E(e,l),E(l,c)},p(t,e){16&e[0]&&u!==(u=t[16](t[40])+"")&&V(i,u),16&e[0]&&h!==(h=t[41].onHand+"")&&V(r,h),16&e[0]&&d!==(d=t[41].required+"")&&V(c,d)},d(t){t&&D(e)}}}function Yr(t,e){let n,i,o="[unassigned]"!==e[40]&&Jr(e);return{key:t,first:null,c(){n=Z(),o&&o.c(),i=Z(),this.first=n},m(t,e){A(t,n,e),o&&o.m(t,e),A(t,i,e)},p(t,n){"[unassigned]"!==(e=t)[40]?o?o.p(e,n):(o=Jr(e),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&D(n),o&&o.d(t),t&&D(i)}}}function Xr(t){let e,n,i,o,s,r,a,l=t[4]["[unassigned]"].required+"";return{c(){e=N("tr"),n=N("td"),n.textContent="Unassigned links",i=B(),o=N("td"),s=B(),r=N("td"),a=j(l)},m(t,l){A(t,e,l),E(e,n),E(e,i),E(e,o),E(e,s),E(e,r),E(r,a)},p(t,e){16&e[0]&&l!==(l=t[4]["[unassigned]"].required+"")&&V(a,l)},d(t){t&&D(e)}}}function Qr(t,e){let n,i,o,s,r,a,l,c,u,h,d,p,f,m=e[37].name+"",g=e[37].agent+"",_=e[37].count+"",v=e[37].capsule+"";return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=j(m),s=B(),r=N("td"),a=j(g),l=B(),c=N("td"),u=j(_),h=B(),d=N("td"),p=j(v),f=B(),this.first=n},m(t,e){A(t,n,e),E(n,i),E(i,o),E(n,s),E(n,r),E(r,a),E(n,l),E(n,c),E(c,u),E(n,h),E(n,d),E(d,p),E(n,f)},p(t,n){e=t,1024&n[0]&&m!==(m=e[37].name+"")&&V(o,m),1024&n[0]&&g!==(g=e[37].agent+"")&&V(a,g),1024&n[0]&&_!==(_=e[37].count+"")&&V(u,_),1024&n[0]&&v!==(v=e[37].capsule+"")&&V(p,v)},d(t){t&&D(n)}}}function ta(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L,S,C,M,O,R,z,Z,H=t[1].name+"",W=[],q=new zr,K=[],J=new zr,Y=[],X=new zr,Q=t[7];const tt=t=>t[48].id;for(let e=0;e<Q.length;e+=1){let n=Fr(t,Q,e),i=tt(n);q.set(i,W[e]=Hr(i,n))}let et=t[8];const nt=t=>t[37].id;for(let e=0;e<et.length;e+=1){let n=Ur(t,et,e),i=nt(n);J.set(i,K[e]=Wr(i,n))}let it=t[3]&&t[6]&&Vr(t),ot=t[10];const st=t=>t[37].key;for(let e=0;e<ot.length;e+=1){let n=jr(t,ot,e),i=st(n);X.set(i,Y[e]=Qr(i,n))}return{c(){e=N("h1"),n=j(H),i=B(),o=N("div"),s=N("div"),r=N("table"),l=N("thead"),c=N("tr"),u=N("th"),u.textContent="Portal",h=B(),d=N("th"),d.textContent="Required",p=B(),f=N("th"),m=N("label"),m.textContent="For",g=B(),_=N("select");for(let t=0;t<W.length;t+=1)W[t].c();v=B(),y=N("th"),y.textContent="Total",w=B(),b=N("th"),b.textContent="Agent Count",x=B(),$=N("th"),$.textContent="Capsule",k=B(),T=N("tbody");for(let t=0;t<K.length;t+=1)K[t].c();I=B(),it&&it.c(),P=B(),L=N("div"),S=N("table"),C=N("thead"),C.innerHTML='<tr><th scope="col">Portal</th> \n        <th scope="col">Agent</th> \n        <th scope="col">Count</th> \n        <th scope="col">Capsule</th></tr>',M=B(),O=N("tbody");for(let t=0;t<Y.length;t+=1)Y[t].c();F(e,"id","opName"),void 0===t[2]&&$t((()=>t[25].call(_))),F(r,"class","table table-striped"),F(s,"class","col"),F(o,"class","row"),F(S,"class","table table-striped"),F(L,"class","row")},m(a,D){A(a,e,D),E(e,n),A(a,i,D),A(a,o,D),E(o,s),E(s,r),E(r,l),E(l,c),E(c,u),E(c,h),E(c,d),E(c,p),E(c,f),E(f,m),E(f,g),E(f,_);for(let t=0;t<W.length;t+=1)W[t].m(_,null);G(_,t[2]),E(c,v),E(c,y),E(c,w),E(c,b),E(c,x),E(c,$),E(r,k),E(r,T);for(let t=0;t<K.length;t+=1)K[t].m(T,null);E(o,I),it&&it.m(o,null),A(a,P,D),A(a,L,D),E(L,S),E(S,C),E(S,M),E(S,O);for(let t=0;t<Y.length;t+=1)Y[t].m(O,null);R=!0,z||(Z=[U(u,"click",t[22]),U(d,"click",t[23]),U(m,"click",t[24]),U(_,"change",t[25]),U(y,"click",t[26]),U(b,"click",t[27]),U($,"click",t[28])],z=!0)},p(t,e){(!R||2&e[0])&&H!==(H=t[1].name+"")&&V(n,H),128&e[0]&&(Q=t[7],W=Wt(W,e,tt,1,t,Q,q,_,Zt,Hr,null,Fr)),132&e[0]&&G(_,t[2]),53516&e[0]&&(et=t[8],K=Wt(K,e,nt,1,t,et,J,T,Zt,Wr,null,Ur)),t[3]&&t[6]?it?(it.p(t,e),72&e[0]&&Dt(it,1)):(it=Vr(t),it.c(),Dt(it,1),it.m(o,null)):it&&(Ot(),Rt(it,1,1,(()=>{it=null})),At()),1024&e[0]&&(ot=t[10],Y=Wt(Y,e,st,1,t,ot,X,O,Zt,Qr,null,jr))},i(t){R||(Dt(it),R=!0)},o(t){Rt(it),R=!1},d(t){t&&D(e),t&&D(i),t&&D(o);for(let t=0;t<W.length;t+=1)W[t].d();for(let t=0;t<K.length;t+=1)K[t].d();it&&it.d(),t&&D(P),t&&D(L);for(let t=0;t<Y.length;t+=1)Y[t].d();z=!1,a(Z)}}}const ea="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";function na(t,e,i){let o,s,r,a,l=n,c=()=>(l(),l=d(f,(t=>i(21,a=t))),f);t.$$.on_destroy.push((()=>l()));var u=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};const h=ht();function p(){h("routeEvent",{refresh:!0})}let{opStore:f}=e;c();let m=null;const g=Yn.get();let _="name",v=!1,y="",w=[],b=[];function x(t){t===_?i(20,v=!v):(i(19,_=t),i(20,v=!1))}function $(t,e){return u(this,void 0,void 0,(function*(){const n=e;try{yield hi(Ti(m.ID,t.id,+n.value,t.capsule)),p()}catch(t){console.log(t)}}))}function k(t,e){return u(this,void 0,void 0,(function*(){const n=e;try{yield hi(Ti(m.ID,t.id,t.iHave,n.value)),p()}catch(t){console.log(t)}}))}function T(t){const e=Jn.get(t);return e?e.name:t}let I,P,L,S=null;return t.$$set=t=>{"opStore"in t&&c(i(0,f=t.opStore))},t.$$.update=()=>{if(2097152&t.$$.dirty[0]&&i(1,m=a),2&t.$$.dirty[0]){const t=new Map;for(const e of m.teamlist){const n=ui.get(e.teamid);if(n)for(const e of n.agents)t.set(e.id,e)}t.size?i(7,w=Array.from(t.values())):i(7,w=[{id:g.id,name:g.name}])}if(2&t.$$.dirty[0]&&i(11,o=m.keysRequiredPerPortalPerZone()),1572870&t.$$.dirty[0]){const t=new Map;for(const e of m.anchors){const n=m.links.filter((function(t){return t.toPortalId==e})),i={id:e,name:m.getPortal(e).name,required:n.length,agentRequired:n.filter((t=>t.assignedTo==y)).length,onHand:0,iHave:0,capsule:""};i.required>0&&t.set(i.id,i)}for(const e of m.markers.filter((t=>"GetKeyPortalMarker"==t.type)))if(!t.has(e.portalId)){const n={id:e.portalId,name:m.getPortal(e.portalId).name,required:0,agentRequired:0,onHand:0,iHave:0,capsule:""};t.set(n.id,n)}const e=[];for(const[n,i]of t){const t=m.keysonhand.filter((t=>t.portalId==n));if(t&&t.length>0)for(const e of t)i.onHand+=e.onhand,e.gid==y&&(i.iHave=e.onhand,i.capsule=e.capsule);e.push(i)}switch(_){case"name":case"capsule":e.sort(((t,e)=>t[_].localeCompare(e[_])));break;case"required":case"agentRequired":case"onHand":case"iHave":e.sort(((t,e)=>t[_]-e[_]))}v&&e.reverse(),i(8,b=e)}if(2&t.$$.dirty[0]&&i(10,s=m.keysonhand.map((t=>({name:(m.getPortal(t.portalId)||{name:"[portal no longer in op]"}).name,key:t.portalId+t.gid,agent:T(t.gid),count:t.onhand,capsule:t.capsule})))),10&t.$$.dirty[0]&&i(6,r=m.getPortal(S)),26&t.$$.dirty[0]){const t=m.keysRequiredForPortalPerAgent(S);i(9,I=Object.values(t).reduce(((t,e)=>t+e),0));const e=m.keysOnHandForPortalPerAgent(S);i(4,P={});for(const t in e)i(4,P[t]={onHand:e[t],required:0},P);for(const e in t)e in P||i(4,P[e]={onHand:0,required:0},P),i(4,P[e].required+=t[e],P)}if(96&t.$$.dirty[0]&&L&&r){const t=L.getMap();t&&t.setView(r.latLng,15)}},[f,m,y,S,P,L,r,w,b,I,s,o,g,x,$,k,T,{minZoom:0,maxZoom:20,maxNativeZoom:19,attribution:" OpenStreetMap contributors"},{iconSize:[24,41],iconAnchor:[12,41],popupAnchor:[-1,-48],iconUrl:"https://cdn2.wasabee.rocks/img/markers/wasabee_markers_key_done.svg"},_,v,a,()=>x("name"),()=>x("required"),()=>x("agentRequired"),function(){y=J(this),i(2,y),i(7,w),i(1,m),i(21,a)},()=>x("onHand"),()=>x("iHave"),()=>x("capsule"),(t,e)=>$(t,e.target),(t,e)=>k(t,e.target),t=>i(3,S=t.id),function(t){gt[t?"unshift":"push"]((()=>{L=t,i(5,L)}))},()=>i(3,S=null)]}class ia extends Xt{constructor(t){super(),Yt(this,t,na,ta,c,{opStore:0},null,[-1,-1])}}function oa(t,e,n){const i=t.slice();return i[38]=e[n],i[39]=e,i[40]=n,i}function sa(t,e,n){const i=t.slice();return i[41]=e[n],i}function ra(t,e,n){const i=t.slice();return i[44]=e[n],i}function aa(t){let e,n,i,o,s,r,a,l,c,u,d,p,f,m,g,_=t[7](t[38])+"";function v(){return t[23](t[38])}return n=new kr({props:{portalId:t[38].fromPortalId,operation:t[1]}}),c=new kr({props:{portalId:t[38].toPortalId,operation:t[1]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),s=N("img"),a=B(),l=N("td"),Kt(c.$$.fragment),u=B(),d=N("td"),p=j(_),h(s.src,r="https://cdn2.wasabee.rocks/img/swap.svg")||F(s,"src","https://cdn2.wasabee.rocks/img/swap.svg"),F(s,"height","16"),F(s,"alt","swap")},m(t,r){A(t,e,r),Gt(n,e,null),A(t,i,r),A(t,o,r),E(o,s),A(t,a,r),A(t,l,r),Gt(c,l,null),A(t,u,r),A(t,d,r),E(d,p),f=!0,m||(g=U(s,"click",v),m=!0)},p(e,i){t=e;const o={};8&i[0]&&(o.portalId=t[38].fromPortalId),2&i[0]&&(o.operation=t[1]),n.$set(o);const s={};8&i[0]&&(s.portalId=t[38].toPortalId),2&i[0]&&(s.operation=t[1]),c.$set(s),(!f||8&i[0])&&_!==(_=t[7](t[38])+"")&&V(p,_)},i(t){f||(Dt(n.$$.fragment,t),Dt(c.$$.fragment,t),f=!0)},o(t){Rt(n.$$.fragment,t),Rt(c.$$.fragment,t),f=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),t&&D(a),t&&D(l),Jt(c),t&&D(u),t&&D(d),m=!1,g()}}}function la(t){let e,n,i,o,s,r,a,l,c,u,h,d=t[38].friendlyType+"";return n=new kr({props:{portalId:t[38].portalId,operation:t[1]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),s=B(),r=N("td"),a=j(d),c=B(),u=N("td"),F(r,"class",l=t[38].type)},m(t,l){A(t,e,l),Gt(n,e,null),A(t,i,l),A(t,o,l),A(t,s,l),A(t,r,l),E(r,a),A(t,c,l),A(t,u,l),h=!0},p(t,e){const i={};8&e[0]&&(i.portalId=t[38].portalId),2&e[0]&&(i.operation=t[1]),n.$set(i),(!h||8&e[0])&&d!==(d=t[38].friendlyType+"")&&V(a,d),(!h||10&e[0]&&l!==(l=t[38].type))&&F(r,"class",l)},i(t){h||(Dt(n.$$.fragment,t),h=!0)},o(t){Rt(n.$$.fragment,t),h=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),t&&D(s),t&&D(r),t&&D(c),t&&D(u)}}}function ca(t,e){let n,i,o,s,r=e[44].name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[44].id,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,o){e=t,2&o[0]&&r!==(r=e[44].name+"")&&V(i,r),2&o[0]&&s!==(s=e[44].id)&&(n.__value=s,n.value=n.__value)},d(t){t&&D(n)}}}function ua(t,e){let n,i,o,s,r=e[41].name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[41].id,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,o){e=t,4&o[0]&&r!==(r=e[41].name+"")&&V(i,r),4&o[0]&&s!==(s=e[41].id)&&(n.__value=s,n.value=n.__value)},d(t){t&&D(n)}}}function ha(t,e){let i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L,S,C,M,O=e[38].order+"",R=[],z=new Map,Z=[],H=new Map,W=n;const K=[la,aa],J=[];function X(t,e){return t[38]instanceof oi?0:t[38]instanceof Qn?1:-1}~(u=X(e))&&(h=J[u]=K[u](e));let Q=e[1].zones;const tt=t=>t[44].id;for(let t=0;t<Q.length;t+=1){let n=ra(e,Q,t),i=tt(n);z.set(i,R[t]=ca(i,n))}function et(){e[24].call(f,e[39],e[40])}function nt(){return e[25](e[38])}let it=e[2];const rt=t=>t[41].id;for(let t=0;t<it.length;t+=1){let n=sa(e,it,t),i=rt(n);H.set(i,Z[t]=ua(i,n))}function at(){e[26].call(v,e[39],e[40])}function lt(){return e[27](e[38])}function ct(){e[28].call(x,e[39],e[40])}function ut(){return e[29](e[38])}function ht(){e[30].call(T,e[39],e[40])}function dt(){return e[31](e[38])}return{key:t,first:null,c(){i=N("tr"),o=N("td"),s=B(),r=N("td"),l=j(O),c=B(),h&&h.c(),d=B(),p=N("td"),f=N("select"),m=N("option"),m.textContent="All zones";for(let t=0;t<R.length;t+=1)R[t].c();g=B(),_=N("td"),v=N("select"),y=N("option"),y.textContent="Unassigned";for(let t=0;t<Z.length;t+=1)Z[t].c();w=B(),b=N("td"),x=N("input"),$=B(),k=N("td"),T=N("input"),I=B(),Y(o,"handle",e[4]),F(r,"class","text-right"),m.__value="0",m.value=m.__value,void 0===e[38].zone&&$t(et),y.__value="",y.value=y.__value,void 0===e[38].assignedTo&&$t(at),F(T,"type","checkbox"),F(k,"class","text-center"),F(i,"draggable",e[4]),F(i,"data-index",P=e[40]),F(i,"class","svelte-174nhuf"),Y(i,"shiftBottom",e[5]<=e[40]&&e[40]<e[6]),Y(i,"shiftTop",e[6]<e[40]&&e[40]<=e[5]),this.first=i},m(t,n){A(t,i,n),E(i,o),E(i,s),E(i,r),E(r,l),E(i,c),~u&&J[u].m(i,null),E(i,d),E(i,p),E(p,f),E(f,m);for(let t=0;t<R.length;t+=1)R[t].m(f,null);G(f,e[38].zone),E(i,g),E(i,_),E(_,v),E(v,y);for(let t=0;t<Z.length;t+=1)Z[t].m(v,null);G(v,e[38].assignedTo),E(i,w),E(i,b),E(b,x),q(x,e[38].comment),E(i,$),E(i,k),E(k,T),T.checked=e[38].completed,E(i,I),S=!0,C||(M=[U(f,"change",et),U(f,"change",nt),U(v,"change",at),U(v,"change",lt),U(x,"input",ct),U(x,"change",ut),U(T,"change",ht),U(T,"change",dt),U(i,"dragstart",e[13]),U(i,"dragover",e[14]),U(i,"dragleave",e[15]),U(i,"dragend",e[17]),U(i,"drop",e[16])],C=!0)},p(t,n){e=t,16&n[0]&&Y(o,"handle",e[4]),(!S||8&n[0])&&O!==(O=e[38].order+"")&&V(l,O);let s=u;u=X(e),u===s?~u&&J[u].p(e,n):(h&&(Ot(),Rt(J[s],1,1,(()=>{J[s]=null})),At()),~u?(h=J[u],h?h.p(e,n):(h=J[u]=K[u](e),h.c()),Dt(h,1),h.m(i,d)):h=null),2&n[0]&&(Q=e[1].zones,R=Wt(R,n,tt,1,e,Q,z,f,Zt,ca,null,ra)),10&n[0]&&G(f,e[38].zone),4&n[0]&&(it=e[2],Z=Wt(Z,n,rt,1,e,it,H,v,Zt,ua,null,sa)),10&n[0]&&G(v,e[38].assignedTo),10&n[0]&&x.value!==e[38].comment&&q(x,e[38].comment),10&n[0]&&(T.checked=e[38].completed),(!S||16&n[0])&&F(i,"draggable",e[4]),(!S||10&n[0]&&P!==(P=e[40]))&&F(i,"data-index",P),104&n[0]&&Y(i,"shiftBottom",e[5]<=e[40]&&e[40]<e[6]),104&n[0]&&Y(i,"shiftTop",e[6]<e[40]&&e[40]<=e[5])},r(){L=i.getBoundingClientRect()},f(){st(i),W()},a(){W(),W=ot(i,L,ye,{})},i(t){S||(Dt(h),S=!0)},o(t){Rt(h),S=!1},d(t){t&&D(i),~u&&J[u].d();for(let t=0;t<R.length;t+=1)R[t].d();for(let t=0;t<Z.length;t+=1)Z[t].d();C=!1,a(M)}}}function da(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L,S,C,M,O,R,z,Z,H,W,K,G,J,Y,X,Q,tt,et=t[1].name+"",nt=[],it=new Map,ot=t[3];const st=t=>t[38].ID;for(let e=0;e<ot.length;e+=1){let n=oa(t,ot,e),i=st(n);it.set(i,nt[e]=ha(i,n))}return{c(){e=N("div"),n=N("div"),i=j(et),o=B(),s=N("div"),r=N("ul"),l=N("textarea"),c=B(),u=N("button"),u.textContent="Order +1",h=B(),d=N("button"),d.textContent="Order -1",p=B(),f=N("table"),m=N("thead"),g=N("tr"),_=N("th"),v=N("div"),y=N("input"),w=B(),b=N("label"),x=B(),$=N("th"),$.textContent="Order",k=B(),T=N("th"),T.textContent="Portal",I=B(),P=N("th"),P.textContent="",L=B(),S=N("th"),S.textContent="To/Action",C=B(),M=N("th"),M.textContent="Distance",O=B(),R=N("th"),R.textContent="Zone",z=B(),Z=N("th"),Z.textContent="Assigned To",H=B(),W=N("th"),W.textContent="Description",K=B(),G=N("th"),G.textContent="Completed",J=B(),Y=N("tbody");for(let t=0;t<nt.length;t+=1)nt[t].c();F(n,"class","card-header"),F(n,"id","opName"),F(l,"class","form-control"),F(r,"class","list-group list-group-flush"),F(u,"class","btn btn-success"),F(d,"class","btn btn-danger"),F(s,"class","card-body"),F(e,"class","card mb-2"),F(y,"type","checkbox"),F(y,"class","custom-control-input"),F(y,"id","enableDrag"),F(b,"class","custom-control-label"),F(b,"for","enableDrag"),F(v,"class","custom-control custom-switch"),F(_,"class","pl-0 pr-0"),F(_,"scope","col"),F($,"scope","col"),F(T,"scope","col"),F(P,"scope","col"),F(S,"scope","col"),F(M,"scope","col"),F(R,"scope","col"),F(Z,"scope","col"),F(W,"scope","col"),F(G,"scope","col"),F(Y,"id","opSteps"),F(Y,"class","svelte-174nhuf"),F(f,"class","table table-striped"),F(f,"id","optable")},m(a,D){A(a,e,D),E(e,n),E(n,i),E(e,o),E(e,s),E(s,r),E(r,l),q(l,t[1].comment),E(s,c),E(s,u),E(s,h),E(s,d),A(a,p,D),A(a,f,D),E(f,m),E(m,g),E(g,_),E(_,v),E(v,y),y.checked=t[4],E(v,w),E(v,b),E(g,x),E(g,$),E(g,k),E(g,T),E(g,I),E(g,P),E(g,L),E(g,S),E(g,C),E(g,M),E(g,O),E(g,R),E(g,z),E(g,Z),E(g,H),E(g,W),E(g,K),E(g,G),E(f,J),E(f,Y);for(let t=0;t<nt.length;t+=1)nt[t].m(Y,null);X=!0,Q||(tt=[U(l,"input",t[21]),U(u,"click",t[18]),U(d,"click",t[19]),U(y,"change",t[22])],Q=!0)},p(t,e){if((!X||2&e[0])&&et!==(et=t[1].name+"")&&V(i,et),2&e[0]&&q(l,t[1].comment),16&e[0]&&(y.checked=t[4]),262142&e[0]){ot=t[3],Ot();for(let t=0;t<nt.length;t+=1)nt[t].r();nt=Wt(nt,e,st,1,t,ot,it,Y,Ht,ha,null,oa);for(let t=0;t<nt.length;t+=1)nt[t].a();At()}},i(t){if(!X){for(let t=0;t<ot.length;t+=1)Dt(nt[t]);X=!0}},o(t){for(let t=0;t<nt.length;t+=1)Rt(nt[t]);X=!1},d(t){t&&D(e),t&&D(p),t&&D(f);for(let t=0;t<nt.length;t+=1)nt[t].d();Q=!1,a(tt)}}}function pa(t){return Math.pow(Math.E,Math.log(t)/4)}function fa(t,e,i){let o,s=n,r=()=>(s(),s=d(u,(t=>i(20,o=t))),u);t.$$.on_destroy.push((()=>s()));var a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};const l=ht();function c(){l("routeEvent",{refresh:!0})}let{opStore:u}=e;r();let h=null,p=[],f=[];function m(t){return a(this,void 0,void 0,(function*(){try{t instanceof Qn?yield function(t,e,n){const i=new FormData;return i.append("desc",n),Li(`/api/v1/draw/${t}/link/${e}/desc`,i)}(h.ID,t.ID,t.comment):yield function(t,e,n){const i=new FormData;return i.append("comment",n),Li(`/api/v1/draw/${t}/marker/${e}/comment`,i)}(h.ID,t.ID,t.comment),c()}catch(t){console.log(t)}}))}function g(t){return a(this,void 0,void 0,(function*(){try{t instanceof Qn?yield function(t,e,n){const i=new FormData;return i.append("agent",n),Li(`/api/v1/draw/${t}/link/${e}/assign`,i)}(h.ID,t.ID,t.assignedTo):yield function(t,e,n){const i=new FormData;return i.append("agent",n),Li(`/api/v1/draw/${t}/marker/${e}/assign`,i)}(h.ID,t.ID,t.assignedTo),c()}catch(t){console.log(t)}}))}function _(t){return a(this,void 0,void 0,(function*(){try{t instanceof Qn?yield function(t,e,n){const i=new FormData;return i.append("zone",`${n}`),Li(`/api/v1/draw/${t}/link/${e}/zone`,i)}(h.ID,t.ID,t.zone):yield function(t,e,n){const i=new FormData;return i.append("zone",`${n}`),Li(`/api/v1/draw/${t}/marker/${e}/zone`,i)}(h.ID,t.ID,t.zone),c()}catch(t){console.log(t)}}))}function v(t){return a(this,void 0,void 0,(function*(){try{yield(e=h.ID,n=t.ID,Pi(`/api/v1/draw/${e}/link/${n}/swap`)),c()}catch(t){console.log(t)}var e,n}))}function y(t){ki(h,t,t.completed).then((()=>{h.store()}),(t=>{console.log(t)}))}let w=!1,b=!1,x=!1;const $=t=>t.dataset&&t.dataset.index?t.dataset:$(t.parentElement);function k(t,e){if(t<e){i(3,f[t].order=f[e].order+1,f);let n=0;if(e+1<f.length&&(n=2+f[e].order-f[e+1].order),n>0)for(let t=e+1;t<f.length;t++)i(3,f[t].order+=n,f)}else{if(!(t>e))return;{i(3,f[t].order=f[e].order-1,f);let n=0;if(e-1>=0&&(n=2+f[e-1].order-f[e].order),n>0)for(let t=e-1;t>=0;t--)i(3,f[t].order-=n,f)}}hi(bi(h)),i(1,h),i(20,o)}function T(t){for(const e of f)e.order+=t;i(3,f),i(1,h),i(20,o)}return t.$$set=t=>{"opStore"in t&&r(i(0,u=t.opStore))},t.$$.update=()=>{if(1048576&t.$$.dirty[0]&&i(1,h=o),6&t.$$.dirty[0]){const t=new Set(h.teamlist.map((t=>t.teamid))),e=new Set;for(const n of t){const t=ui.get(n);if(null!=t)for(const n of t.agents)e.add(n.id)}i(2,p=[]);for(const t of e)p.push(Jn.get(t));i(2,p),i(1,h),i(20,o)}if(2&t.$$.dirty[0]&&h){const t=h.markers.concat(h.links);t.sort(((t,e)=>t.order-e.order)),i(3,f=t)}},[u,h,p,f,w,b,x,function(t){const e=Math.round(t.length(h)/10)/100;let n=1;return e>.016&&(n=pa(1e3*e)/(2*pa(10))),n>8&&(n=8),n=Math.round(10*n)/10,e+"km (L"+n+")"},m,g,_,v,y,function(t){const e=t.target;t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("source",e.dataset.index),i(6,x=+e.dataset.index)},function(t){t.preventDefault();let e=$(t.target);b!==+e.index&&(i(5,b=+e.index),console.log(x,b))},t=>{console.log(t)},function(t){console.log(t.target),i(5,b=!1),i(6,x=!1),t.preventDefault();let e=$(t.target);k(+t.dataTransfer.getData("source"),+e.index)},function(t){if(t.preventDefault(),i(6,x=!1),!1===b)return;let e=+t.dataTransfer.getData("source"),n=+b;i(5,b=!1),k(e,n)},function(){T(1),hi(bi(h))},function(){T(-1),hi(bi(h))},o,function(){h.comment=this.value,i(1,h),i(20,o)},function(){w=this.checked,i(4,w)},t=>v(t),function(t,e){t[e].zone=J(this),i(3,f),i(1,h),i(20,o),i(1,h),i(20,o)},t=>_(t),function(t,e){t[e].assignedTo=J(this),i(3,f),i(1,h),i(20,o),i(1,h),i(20,o)},t=>g(t),function(t,e){t[e].comment=this.value,i(3,f),i(1,h),i(20,o),i(1,h),i(20,o)},t=>m(t),function(t,e){t[e].completed=this.checked,i(3,f),i(1,h),i(20,o),i(1,h),i(20,o)},t=>y(t)]}class ma extends Xt{constructor(t){super(),Yt(this,t,fa,da,c,{opStore:0},null,[-1,-1])}}
/*! Leaflet.Geodesic 2.5.5-0 - (c) Henry Thasler - https://github.com/henrythasler/Leaflet.Geodesic */var ga=t((function(t,n){!function(t,e){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation. All rights reserved.
	    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	    this file except in compliance with the License. You may obtain a copy of the
	    License at http://www.apache.org/licenses/LICENSE-2.0

	    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	    MERCHANTABLITY OR NON-INFRINGEMENT.

	    See the Apache Version 2.0 License for specific language governing permissions
	    and limitations under the License.
	    ***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,a=s.length;r<a;r++,o++)i[o]=s[r];return i}var r=function(){function t(t){this.options={wrap:!0,steps:3},this.ellipsoid={a:6378137,b:6356752.3142,f:1/298.257223563},this.options=o(o({},this.options),t)}return t.prototype.toRadians=function(t){return t*Math.PI/180},t.prototype.toDegrees=function(t){return 180*t/Math.PI},t.prototype.mod=function(t,e){var n=t%e;return n<0?n+e:n},t.prototype.wrap360=function(t){return 0<=t&&t<360?t:this.mod(t,360)},t.prototype.wrap=function(t,e){return void 0===e&&(e=360),-e<=t&&t<=e?t:this.mod(t+e,2*e)-e},t.prototype.direct=function(t,e,n,i){void 0===i&&(i=100);var o=this.toRadians(t.lat),s=this.toRadians(t.lng),r=this.toRadians(e),a=n,l=1e3*Number.EPSILON,c=this.ellipsoid,u=c.a,h=c.b,d=c.f,p=Math.sin(r),f=Math.cos(r),m=(1-d)*Math.tan(o),g=1/Math.sqrt(1+m*m),_=m*g,v=Math.atan2(m,f),y=g*p,w=1-y*y,b=w*(u*u-h*h)/(h*h),x=1+b/16384*(4096+b*(b*(320-175*b)-768)),$=b/1024*(256+b*(b*(74-47*b)-128)),k=a/(h*x),T=null,I=null,P=null,L=null,S=0;do{P=Math.cos(2*v+k),L=k,k=a/(h*x)+$*(T=Math.sin(k))*(P+$/4*((I=Math.cos(k))*(2*P*P-1)-$/6*P*(4*T*T-3)*(4*P*P-3)))}while(Math.abs(k-L)>l&&++S<i);if(S>=i)throw new EvalError("Direct vincenty formula failed to converge after "+i+" iterations \n                (start="+t.lat+"/"+t.lng+"; bearing="+e+"; distance="+n+")");var C=_*T-g*I*f,E=Math.atan2(_*I+g*T*f,(1-d)*Math.sqrt(y*y+C*C)),M=d/16*w*(4+d*(4-3*w)),O=s+(Math.atan2(T*p,g*I-_*T*f)-(1-M)*d*y*(k+M*T*(P+M*I*(2*P*P-1)))),A=Math.atan2(y,-C);return{lat:this.toDegrees(E),lng:this.toDegrees(O),bearing:this.wrap360(this.toDegrees(A))}},t.prototype.inverse=function(t,n,i,o){void 0===i&&(i=100),void 0===o&&(o=!0);var s=t,r=n,a=this.toRadians(s.lat),l=this.toRadians(s.lng),c=this.toRadians(r.lat),u=this.toRadians(r.lng),h=Math.PI,d=Number.EPSILON,p=this.ellipsoid,f=p.a,m=p.b,g=p.f,_=u-l,v=(1-g)*Math.tan(a),y=1/Math.sqrt(1+v*v),w=v*y,b=(1-g)*Math.tan(c),x=1/Math.sqrt(1+b*b),$=b*x,k=Math.abs(_)>h/2||Math.abs(c-a)>h/2,T=_,I=null,P=null,L=k?h:0,S=0,C=k?-1:1,E=null,M=1,O=null,A=1,D=null,R=null,N=0;do{if(E=x*(I=Math.sin(T))*(x*I)+(y*$-w*x*(P=Math.cos(T)))*(y*$-w*x*P),Math.abs(E)<d)break;if(C=w*$+y*x*P,R=T,T=_+(1-(D=g/16*(A=1-(O=y*x*I/(S=Math.sqrt(E)))*O)*(4+g*(4-3*A))))*g*O*((L=Math.atan2(S,C))+D*S*((M=0!==A?C-2*w*$/A:0)+D*C*(2*M*M-1))),(k?Math.abs(T)-h:Math.abs(T))>h)throw new EvalError(" > ")}while(Math.abs(T-R)>1e-12&&++N<i);if(N>=i){if(o)return this.inverse(t,new e.LatLng(n.lat,n.lng-.01),i,o);throw new EvalError("Inverse vincenty formula failed to converge after "+i+" iterations \n                    (start="+t.lat+"/"+t.lng+"; dest="+n.lat+"/"+n.lng+")")}var z=A*(f*f-m*m)/(m*m),j=z/1024*(256+z*(z*(74-47*z)-128)),B=m*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(L-j*S*(M+j/4*(C*(2*M*M-1)-j/6*M*(4*S*S-3)*(4*M*M-3)))),Z=Math.abs(E)<d?0:Math.atan2(x*I,y*$-w*x*P),U=Math.abs(E)<d?h:Math.atan2(y*I,-w*x+y*$*P);return{distance:B,initialBearing:Math.abs(B)<d?NaN:this.wrap360(this.toDegrees(Z)),finalBearing:Math.abs(B)<d?NaN:this.wrap360(this.toDegrees(U))}},t.prototype.intersection=function(t,n,i,o){var s=this.toRadians(t.lat),r=this.toRadians(t.lng),a=this.toRadians(i.lat),l=this.toRadians(i.lng),c=this.toRadians(n),u=this.toRadians(o),h=a-s,d=l-r,p=Math.PI,f=Number.EPSILON,m=2*Math.asin(Math.sqrt(Math.sin(h/2)*Math.sin(h/2)+Math.cos(s)*Math.cos(a)*Math.sin(d/2)*Math.sin(d/2)));if(Math.abs(m)<f)return t;var g=(Math.sin(a)-Math.sin(s)*Math.cos(m))/(Math.sin(m)*Math.cos(s)),_=(Math.sin(s)-Math.sin(a)*Math.cos(m))/(Math.sin(m)*Math.cos(a)),v=Math.acos(Math.min(Math.max(g,-1),1)),y=Math.acos(Math.min(Math.max(_,-1),1)),w=c-(Math.sin(l-r)>0?v:2*p-v),b=(Math.sin(l-r)>0?2*p-y:y)-u;if(0===Math.sin(w)&&0===Math.sin(b))return null;if(Math.sin(w)*Math.sin(b)<0)return null;var x=-Math.cos(w)*Math.cos(b)+Math.sin(w)*Math.sin(b)*Math.cos(m),$=Math.atan2(Math.sin(m)*Math.sin(w)*Math.sin(b),Math.cos(b)+Math.cos(w)*x),k=Math.asin(Math.min(Math.max(Math.sin(s)*Math.cos($)+Math.cos(s)*Math.sin($)*Math.cos(c),-1),1)),T=r+Math.atan2(Math.sin(c)*Math.sin($)*Math.cos(s),Math.cos($)-Math.sin(s)*Math.sin(k));return new e.LatLng(this.toDegrees(k),this.toDegrees(T))},t.prototype.midpoint=function(t,n){var i=this.toRadians(t.lat),o=this.toRadians(t.lng),s=this.toRadians(n.lat),r=this.toRadians(n.lng-t.lng),a=Math.cos(i),l=0,c=Math.sin(i),u={x:a+Math.cos(s)*Math.cos(r),y:l+Math.cos(s)*Math.sin(r),z:c+Math.sin(s)},h=Math.atan2(u.z,Math.sqrt(u.x*u.x+u.y*u.y)),d=o+Math.atan2(u.y,u.x);return new e.LatLng(this.toDegrees(h),this.toDegrees(d))},t}(),a=function(){function t(t){this.geodesic=new r,this.steps=t&&void 0!==t.steps?t.steps:3}return t.prototype.recursiveMidpoint=function(t,e,n){var i=[t,e],o=this.geodesic.midpoint(t,e);return n>0?(i.splice.apply(i,s([0,1],this.recursiveMidpoint(t,o,n-1))),i.splice.apply(i,s([i.length-2,2],this.recursiveMidpoint(o,e,n-1)))):i.splice(1,0,o),i},t.prototype.line=function(t,e){return this.recursiveMidpoint(t,e,Math.min(8,this.steps))},t.prototype.multiLineString=function(t){var e=this,n=[];return t.forEach((function(t){for(var i=[],o=1;o<t.length;o++)i.splice.apply(i,s([i.length-1,1],e.line(t[o-1],t[o])));n.push(i)})),n},t.prototype.lineString=function(t){return this.multiLineString([t])[0]},t.prototype.splitLine=function(t,n){var i={point:new e.LatLng(89.9,-180.0000001),bearing:180},o={point:new e.LatLng(89.9,180.0000001),bearing:180},s=new e.LatLng(t.lat,t.lng),r=new e.LatLng(n.lat,n.lng);s.lng=this.geodesic.wrap(s.lng,360),r.lng=this.geodesic.wrap(r.lng,360),r.lng-s.lng>180?r.lng=r.lng-360:r.lng-s.lng<-180&&(r.lng=r.lng+360);var a=[[new e.LatLng(s.lat,this.geodesic.wrap(s.lng,180)),new e.LatLng(r.lat,this.geodesic.wrap(r.lng,180))]];if(s.lng>=-180&&s.lng<=180)if(r.lng<-180){var l=this.geodesic.inverse(s,r).initialBearing;(c=this.geodesic.intersection(s,l,i.point,i.bearing))&&(a=[[s,c],[new e.LatLng(c.lat,c.lng+360),new e.LatLng(r.lat,r.lng+360)]])}else r.lng>180&&(l=this.geodesic.inverse(s,r).initialBearing,(c=this.geodesic.intersection(s,l,o.point,o.bearing))&&(a=[[s,c],[new e.LatLng(c.lat,c.lng-360),new e.LatLng(r.lat,r.lng-360)]]));else if(r.lng>=-180&&r.lng<=180)if(s.lng<-180)l=this.geodesic.inverse(s,r).initialBearing,(c=this.geodesic.intersection(s,l,i.point,i.bearing))&&(a=[[new e.LatLng(s.lat,s.lng+360),new e.LatLng(c.lat,c.lng+360)],[c,r]]);else if(s.lng>180){var c;l=this.geodesic.inverse(s,r).initialBearing,(c=this.geodesic.intersection(s,l,i.point,i.bearing))&&(a=[[new e.LatLng(s.lat,s.lng-360),new e.LatLng(c.lat,c.lng-360)],[c,r]])}return a},t.prototype.splitMultiLineString=function(t){var e=this,n=[];return t.forEach((function(t){if(1===t.length)n.push(t);else{for(var i=[],o=1;o<t.length;o++){var s=e.splitLine(t[o-1],t[o]);i.pop(),i=i.concat(s[0]),s.length>1&&(n.push(i),i=s[1])}n.push(i)}})),n},t.prototype.wrapMultiLineString=function(t){var n=[];return t.forEach((function(t){var i=[],o=null;t.forEach((function(t){if(null===o)i.push(t),o=t;else{var n=t.lng-o.lng,s=Math.sign(n/180)*Math.ceil(Math.abs(n/180));Math.abs(n)>180?i.push(new e.LatLng(t.lat,t.lng-180*s)):i.push(new e.LatLng(t.lat,t.lng))}})),n.push(i)})),n},t.prototype.circle=function(t,n){for(var i=[],o=0;o<this.steps;o++){var s=this.geodesic.direct(t,360/this.steps*o,n);i.push(new e.LatLng(s.lat,s.lng))}return i.push(new e.LatLng(i[0].lat,i[0].lng)),i},t.prototype.splitCircle=function(t){var e=[];return 3===(e=this.splitMultiLineString([t])).length&&(e[2]=s(e[2],e[0]),e.shift()),e},t.prototype.distance=function(t,n){return this.geodesic.inverse(new e.LatLng(t.lat,this.geodesic.wrap(t.lng,180)),new e.LatLng(n.lat,this.geodesic.wrap(n.lng,180))).distance},t.prototype.multilineDistance=function(t){var e=this,n=[];return t.forEach((function(t){for(var i=0,o=1;o<t.length;o++)i+=e.distance(t[o-1],t[o]);n.push(i)})),n},t.prototype.updateStatistics=function(t,e){var n={};return n.distanceArray=this.multilineDistance(t),n.totalDistance=n.distanceArray.reduce((function(t,e){return t+e}),0),n.points=0,t.forEach((function(t){n.points+=t.reduce((function(t){return t+1}),0)})),n.vertices=0,e.forEach((function(t){n.vertices+=t.reduce((function(t){return t+1}),0)})),n},t}();function l(t){return"object"==typeof t&&null!==t&&"lat"in t&&"lng"in t&&"number"==typeof t.lat&&"number"==typeof t.lng}function c(t){return t instanceof Array&&"number"==typeof t[0]&&"number"==typeof t[1]}function u(t){return t instanceof e.LatLng||!!c(t)||!!l(t)}function h(t){if(t instanceof e.LatLng)return t;if(c(t))return new e.LatLng(t[0],t[1]);if(l(t))return new e.LatLng(t.lat,t.lng);throw new Error("L.LatLngExpression expected. Unknown object found.")}var d=function(t){function n(n,i){var s=t.call(this,[],i)||this;return s.defaultOptions={wrap:!0,steps:3},s.statistics={},s.points=[],e.Util.setOptions(s,o(o({},s.defaultOptions),i)),s.geom=new a(s.options),void 0!==n&&s.setLatLngs(n),s}return i(n,t),n.prototype.updateGeometry=function(){var e;if(e=this.geom.multiLineString(this.points),this.statistics=this.geom.updateStatistics(this.points,e),this.options.wrap){var n=this.geom.splitMultiLineString(e);t.prototype.setLatLngs.call(this,n)}else t.prototype.setLatLngs.call(this,this.geom.wrapMultiLineString(e))},n.prototype.setLatLngs=function(t){return this.points=function(t){for(var e=[],n=function(n){if(u(n)){var i=[];return t.forEach((function(t){i.push(h(t))})),e.push(i),"break"}if(!(n instanceof Array))throw new Error("L.LatLngExpression[] | L.LatLngExpression[][] expected. Unknown object found.");if(!u(n[0]))throw new Error("L.LatLngExpression[] | L.LatLngExpression[][] expected. Unknown object found.");var o=[];n.forEach((function(t){o.push(h(t))})),e.push(o)},i=0,o=t;i<o.length&&"break"!==n(o[i]);i++);return e}(t),this.updateGeometry(),this},n.prototype.addLatLng=function(t,e){var n=h(t);return 0===this.points.length?this.points.push([n]):void 0===e?this.points[this.points.length-1].push(n):e.push(n),this.updateGeometry(),this},n.prototype.fromGeoJson=function(t){var n=[],i=[];return"FeatureCollection"===t.type?i=t.features:"Feature"===t.type?i=[t]:["MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"].includes(t.type)?i=[{type:"Feature",geometry:t,properties:{}}]:console.log('[Leaflet.Geodesic] fromGeoJson() - Type "'+t.type+'" not supported.'),i.forEach((function(t){switch(t.geometry.type){case"MultiPoint":case"LineString":n=s(n,[e.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0)]);break;case"MultiLineString":case"Polygon":n=s(n,e.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1));break;case"MultiPolygon":t.geometry.coordinates.forEach((function(t){n=s(n,e.GeoJSON.coordsToLatLngs(t,1))}));break;default:console.log('[Leaflet.Geodesic] fromGeoJson() - Type "'+t.geometry.type+'" not supported.')}})),n.length&&this.setLatLngs(n),this},n.prototype.distance=function(t,e){return this.geom.distance(h(t),h(e))},n}(e.Polyline),p=function(t){function n(n,i){var s=t.call(this,[],i)||this;s.defaultOptions={wrap:!0,steps:24,fill:!0,noClip:!0},s.statistics={},e.Util.setOptions(s,o(o({},s.defaultOptions),i));var r=s.options;return s.radius=void 0===r.radius?1e6:r.radius,s.center=void 0===n?new e.LatLng(0,0):h(n),s.geom=new a(s.options),s.update(),s}return i(n,t),n.prototype.update=function(){var e=this.geom.circle(this.center,this.radius);if(this.statistics=this.geom.updateStatistics([[this.center]],[e]),this.statistics.totalDistance=this.geom.multilineDistance([e]).reduce((function(t,e){return t+e}),0),this.options.wrap){var n=this.geom.splitCircle(e);t.prototype.setLatLngs.call(this,n)}else t.prototype.setLatLngs.call(this,e)},n.prototype.distanceTo=function(t){var e=h(t);return this.geom.distance(this.center,e)},n.prototype.setLatLng=function(t,e){this.center=h(t),this.radius=e||this.radius,this.update()},n.prototype.setRadius=function(t,e){this.radius=t,this.center=e?h(e):this.center,this.update()},n}(e.Polyline);void 0!==window.L&&(window.L.Geodesic=d,window.L.geodesic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(d.bind.apply(d,s([void 0],t)))},window.L.GeodesicCircle=p,window.L.geodesiccircle=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(p.bind.apply(p,s([void 0],t)))}),t.GeodesicCircleClass=p,t.GeodesicLine=d,Object.defineProperty(t,"__esModule",{value:!0})}(n,e)}));function _a(t){let e,n;return e=new nr({props:{latLngs:t[4],weight:t[0],color:t[1],opacity:t[2]}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};16&n&&(i.latLngs=t[4]),1&n&&(i.weight=t[0]),2&n&&(i.color=t[1]),4&n&&(i.opacity=t[2]),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function va(t){let e,n,i=t[3]&&_a(t);return{c(){i&&i.c(),e=Z()},m(t,o){i&&i.m(t,o),A(t,e,o),n=!0},p(t,[n]){t[3]?i?(i.p(t,n),8&n&&Dt(i,1)):(i=_a(t),i.c(),Dt(i,1),i.m(e.parentNode,e)):i&&(Ot(),Rt(i,1,1,(()=>{i=null})),At())},i(t){n||(Dt(i),n=!0)},o(t){Rt(i),n=!1},d(t){i&&i.d(t),t&&D(e)}}}function ya(t,e,n){let i,o,{latLngs:s}=e,{weight:r}=e,{color:a}=e,{opacity:l}=e;return t.$$set=t=>{"latLngs"in t&&n(5,s=t.latLngs),"weight"in t&&n(0,r=t.weight),"color"in t&&n(1,a=t.color),"opacity"in t&&n(2,l=t.opacity)},t.$$.update=()=>{32&t.$$.dirty&&n(3,i=s?new ga.GeodesicLine(s):null),8&t.$$.dirty&&n(4,o=i?i.getLatLngs()[0]:null)},[r,a,l,i,o,s]}class wa extends Xt{constructor(t){super(),Yt(this,t,ya,va,c,{latLngs:5,weight:0,color:1,opacity:2})}}const{Map:ba}=Bt;function xa(t,e,n){const i=t.slice();return i[18]=e[n][0],i[19]=e[n][1],i}function $a(t,e,n){const i=t.slice();return i[22]=e[n],i}function ka(t,e,n){const i=t.slice();return i[25]=e[n],i}function Ta(t,e,n){const i=t.slice();return i[28]=e[n],i}function Ia(t,e,n){const i=t.slice();return i[31]=e[n],i}function Pa(t,e,n){const i=t.slice();return i[34]=e[n],i}function La(t,e){let n,i,o,s,r=e[34].name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[34].id,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,o){e=t,16&o[0]&&r!==(r=e[34].name+"")&&V(i,r),16&o[0]&&s!==(s=e[34].id)&&(n.__value=s,n.value=n.__value)},d(t){t&&D(n)}}}function Sa(t){let e,n=t[31].name+"";return{c(){e=j(n)},m(t,n){A(t,e,n)},p(t,i){64&i[0]&&n!==(n=t[31].name+"")&&V(e,n)},d(t){t&&D(e)}}}function Ca(t){let e,n;return e=new cr({props:{$$slots:{default:[Sa]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};64&n[0]|64&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function Ea(t,e){let n,i,o;return i=new rr({props:{latLngs:e[31].points,options:{color:e[31].color,fillColor:e[31].color},$$slots:{default:[Ca]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=Z(),Kt(i.$$.fragment),this.first=n},m(t,e){A(t,n,e),Gt(i,t,e),o=!0},p(t,n){e=t;const o={};64&n[0]&&(o.latLngs=e[31].points),64&n[0]&&(o.options={color:e[31].color,fillColor:e[31].color}),64&n[0]|64&n[1]&&(o.$$scope={dirty:n,ctx:e}),i.$set(o)},i(t){o||(Dt(i.$$.fragment,t),o=!0)},o(t){Rt(i.$$.fragment,t),o=!1},d(t){t&&D(n),Jt(i,t)}}}function Ma(t){let e,n,i=t[28].comment+"";return{c(){e=N("div"),n=j(i)},m(t,i){A(t,e,i),E(e,n)},p(t,e){32&e[0]&&i!==(i=t[28].comment+"")&&V(n,i)},d(t){t&&D(e)}}}function Oa(t){let e,n,i=t[28].state+"";return{c(){e=N("div"),n=j(i)},m(t,i){A(t,e,i),E(e,n)},p(t,e){32&e[0]&&i!==(i=t[28].state+"")&&V(n,i)},d(t){t&&D(e)}}}function Aa(t){let e,n,i=t[7](t[28].assignedTo)+"";return{c(){e=N("div"),n=j(i)},m(t,i){A(t,e,i),E(e,n)},p(t,e){32&e[0]&&i!==(i=t[7](t[28].assignedTo)+"")&&V(n,i)},d(t){t&&D(e)}}}function Da(t){let e,n,i,o,s,r,a,l,c=t[1].getPortal(t[28].portalId).name+"",u=t[28].comment&&Ma(t),h="pending"!=t[28].state&&Oa(t),d=t[28].assignedTo&&Aa(t);return{c(){e=j(c),n=B(),u&&u.c(),i=B(),h&&h.c(),o=B(),d&&d.c(),s=B(),r=N("button"),a=j("Google Map"),F(r,"target","_blank"),F(r,"class","btn btn-outline-primary btn-sm"),F(r,"href",l="https://www.google.com/maps/search/?api=1&query="+t[1].getPortal(t[28].portalId).latLng.lat+","+t[1].getPortal(t[28].portalId).latLng.lng)},m(t,l){A(t,e,l),A(t,n,l),u&&u.m(t,l),A(t,i,l),h&&h.m(t,l),A(t,o,l),d&&d.m(t,l),A(t,s,l),A(t,r,l),E(r,a)},p(t,n){34&n[0]&&c!==(c=t[1].getPortal(t[28].portalId).name+"")&&V(e,c),t[28].comment?u?u.p(t,n):(u=Ma(t),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),"pending"!=t[28].state?h?h.p(t,n):(h=Oa(t),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null),t[28].assignedTo?d?d.p(t,n):(d=Aa(t),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null),34&n[0]&&l!==(l="https://www.google.com/maps/search/?api=1&query="+t[1].getPortal(t[28].portalId).latLng.lat+","+t[1].getPortal(t[28].portalId).latLng.lng)&&F(r,"href",l)},d(t){t&&D(e),t&&D(n),u&&u.d(t),t&&D(i),h&&h.d(t),t&&D(o),d&&d.d(t),t&&D(s),t&&D(r)}}}function Ra(t){let e,n;return e=new cr({props:{$$slots:{default:[Da]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};34&n[0]|64&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function Na(t,n){let i,o,s;return o=new Xs({props:{latLng:n[1].getPortal(n[28].portalId).latLng,icon:new e.Icon({iconUrl:n[28].icon,...n[10]}),options:{title:n[1].getPortal(n[28].portalId).name},$$slots:{default:[Ra]},$$scope:{ctx:n}}}),{key:t,first:null,c(){i=Z(),Kt(o.$$.fragment),this.first=i},m(t,e){A(t,i,e),Gt(o,t,e),s=!0},p(t,i){n=t;const s={};34&i[0]&&(s.latLng=n[1].getPortal(n[28].portalId).latLng),32&i[0]&&(s.icon=new e.Icon({iconUrl:n[28].icon,...n[10]})),34&i[0]&&(s.options={title:n[1].getPortal(n[28].portalId).name}),34&i[0]|64&i[1]&&(s.$$scope={dirty:i,ctx:n}),o.$set(s)},i(t){s||(Dt(o.$$.fragment,t),s=!0)},o(t){Rt(o.$$.fragment,t),s=!1},d(t){t&&D(i),Jt(o,t)}}}function za(t,e){let n,i,o;return i=new wa({props:{latLngs:e[25].getLatLngs(e[1]),weight:2,color:e[8](e[25]),opacity:.75}}),{key:t,first:null,c(){n=Z(),Kt(i.$$.fragment),this.first=n},m(t,e){A(t,n,e),Gt(i,t,e),o=!0},p(t,n){e=t;const o={};34&n[0]&&(o.latLngs=e[25].getLatLngs(e[1])),32&n[0]&&(o.color=e[8](e[25])),i.$set(o)},i(t){o||(Dt(i.$$.fragment,t),o=!0)},o(t){Rt(i.$$.fragment,t),o=!1},d(t){t&&D(n),Jt(i,t)}}}function ja(t){let e,n,i=t[1].getPortal(t[22]).comment+"";return{c(){e=N("div"),n=j(i)},m(t,i){A(t,e,i),E(e,n)},p(t,e){34&e[0]&&i!==(i=t[1].getPortal(t[22]).comment+"")&&V(n,i)},d(t){t&&D(e)}}}function Ba(t){let e,n,i=t[1].getPortal(t[22]).hardness+"";return{c(){e=N("div"),n=j(i)},m(t,i){A(t,e,i),E(e,n)},p(t,e){34&e[0]&&i!==(i=t[1].getPortal(t[22]).hardness+"")&&V(n,i)},d(t){t&&D(e)}}}function Za(t){let e,n,i,o,s,r,a,l=t[1].getPortal(t[22]).name+"",c=t[1].getPortal(t[22]).comment,u=t[1].getPortal(t[22]).hardness,h=c&&ja(t),d=u&&Ba(t);return{c(){e=j(l),n=B(),h&&h.c(),i=B(),d&&d.c(),o=B(),s=N("button"),r=j("Google Map"),F(s,"target","_blank"),F(s,"class","btn btn-outline-primary btn-sm"),F(s,"href",a="https://www.google.com/maps/search/?api=1&query="+t[1].getPortal(t[22]).latLng.lat+","+t[1].getPortal(t[22]).latLng.lng)},m(t,a){A(t,e,a),A(t,n,a),h&&h.m(t,a),A(t,i,a),d&&d.m(t,a),A(t,o,a),A(t,s,a),E(s,r)},p(t,n){34&n[0]&&l!==(l=t[1].getPortal(t[22]).name+"")&&V(e,l),34&n[0]&&(c=t[1].getPortal(t[22]).comment),c?h?h.p(t,n):(h=ja(t),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null),34&n[0]&&(u=t[1].getPortal(t[22]).hardness),u?d?d.p(t,n):(d=Ba(t),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),34&n[0]&&a!==(a="https://www.google.com/maps/search/?api=1&query="+t[1].getPortal(t[22]).latLng.lat+","+t[1].getPortal(t[22]).latLng.lng)&&F(s,"href",a)},d(t){t&&D(e),t&&D(n),h&&h.d(t),t&&D(i),d&&d.d(t),t&&D(o),t&&D(s)}}}function Ua(t){let e,n,i;return e=new cr({props:{$$slots:{default:[Za]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment),n=B()},m(t,o){Gt(e,t,o),A(t,n,o),i=!0},p(t,n){const i={};34&n[0]|64&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){i||(Dt(e.$$.fragment,t),i=!0)},o(t){Rt(e.$$.fragment,t),i=!1},d(t){Jt(e,t),t&&D(n)}}}function Fa(t,n){let i,o,s;return o=new Xs({props:{latLng:n[1].getPortal(n[22]).latLng,icon:new e.Icon({iconUrl:"https://cdn2.wasabee.rocks/img/markers/pin_lime.svg",iconSize:[24,40],iconAnchor:[12,40],popupAnchor:[-1,-48]}),options:{title:n[1].getPortal(n[22]).name},$$slots:{default:[Ua]},$$scope:{ctx:n}}}),{key:t,first:null,c(){i=Z(),Kt(o.$$.fragment),this.first=i},m(t,e){A(t,i,e),Gt(o,t,e),s=!0},p(t,e){n=t;const i={};34&e[0]&&(i.latLng=n[1].getPortal(n[22]).latLng),34&e[0]&&(i.options={title:n[1].getPortal(n[22]).name}),34&e[0]|64&e[1]&&(i.$$scope={dirty:e,ctx:n}),o.$set(i)},i(t){s||(Dt(o.$$.fragment,t),s=!0)},o(t){Rt(o.$$.fragment,t),s=!1},d(t){t&&D(i),Jt(o,t)}}}function Ha(t,e){let n,i,o,s,r,a=[],l=new ba,c=[],u=new ba,h=[],d=new ba,p=e[19].markers;const f=t=>t[28].ID;for(let t=0;t<p.length;t+=1){let n=Ta(e,p,t),i=f(n);l.set(i,a[t]=Na(i,n))}let m=e[19].links;const g=t=>t[25].ID;for(let t=0;t<m.length;t+=1){let n=ka(e,m,t),i=g(n);u.set(i,c[t]=za(i,n))}let _=e[19].anchors;const v=t=>t[22];for(let t=0;t<_.length;t+=1){let n=$a(e,_,t),i=v(n);d.set(i,h[t]=Fa(i,n))}return{key:t,first:null,c(){n=Z();for(let t=0;t<a.length;t+=1)a[t].c();i=B();for(let t=0;t<c.length;t+=1)c[t].c();o=B();for(let t=0;t<h.length;t+=1)h[t].c();s=Z(),this.first=n},m(t,e){A(t,n,e);for(let n=0;n<a.length;n+=1)a[n].m(t,e);A(t,i,e);for(let n=0;n<c.length;n+=1)c[n].m(t,e);A(t,o,e);for(let n=0;n<h.length;n+=1)h[n].m(t,e);A(t,s,e),r=!0},p(t,n){e=t,1186&n[0]&&(p=e[19].markers,Ot(),a=Wt(a,n,f,1,e,p,l,i.parentNode,Ut,Na,i,Ta),At()),290&n[0]&&(m=e[19].links,Ot(),c=Wt(c,n,g,1,e,m,u,o.parentNode,Ut,za,o,ka),At()),34&n[0]&&(_=e[19].anchors,Ot(),h=Wt(h,n,v,1,e,_,d,s.parentNode,Ut,Fa,s,$a),At())},i(t){if(!r){for(let t=0;t<p.length;t+=1)Dt(a[t]);for(let t=0;t<m.length;t+=1)Dt(c[t]);for(let t=0;t<_.length;t+=1)Dt(h[t]);r=!0}},o(t){for(let t=0;t<a.length;t+=1)Rt(a[t]);for(let t=0;t<c.length;t+=1)Rt(c[t]);for(let t=0;t<h.length;t+=1)Rt(h[t]);r=!1},d(t){t&&D(n);for(let e=0;e<a.length;e+=1)a[e].d(t);t&&D(i);for(let e=0;e<c.length;e+=1)c[e].d(t);t&&D(o);for(let e=0;e<h.length;e+=1)h[e].d(t);t&&D(s)}}}function Wa(t){let e,n,i,o,s,r=[],a=new ba,l=[],c=new ba;e=new hr({props:{url:qa,options:t[9]}});let u=t[6].polygons;const h=t=>t[31].id;for(let e=0;e<u.length;e+=1){let n=Ia(t,u,e),i=h(n);a.set(i,r[e]=Ea(i,n))}let d=Object.entries(t[5]);const p=t=>t[18];for(let e=0;e<d.length;e+=1){let n=xa(t,d,e),i=p(n);c.set(i,l[e]=Ha(i,n))}return{c(){Kt(e.$$.fragment),n=B();for(let t=0;t<r.length;t+=1)r[t].c();i=B();for(let t=0;t<l.length;t+=1)l[t].c();o=Z()},m(t,a){Gt(e,t,a),A(t,n,a);for(let e=0;e<r.length;e+=1)r[e].m(t,a);A(t,i,a);for(let e=0;e<l.length;e+=1)l[e].m(t,a);A(t,o,a),s=!0},p(t,e){64&e[0]&&(u=t[6].polygons,Ot(),r=Wt(r,e,h,1,t,u,a,i.parentNode,Ut,Ea,i,Ia),At()),1442&e[0]&&(d=Object.entries(t[5]),Ot(),l=Wt(l,e,p,1,t,d,c,o.parentNode,Ut,Ha,o,xa),At())},i(t){if(!s){Dt(e.$$.fragment,t);for(let t=0;t<u.length;t+=1)Dt(r[t]);for(let t=0;t<d.length;t+=1)Dt(l[t]);s=!0}},o(t){Rt(e.$$.fragment,t);for(let t=0;t<r.length;t+=1)Rt(r[t]);for(let t=0;t<l.length;t+=1)Rt(l[t]);s=!1},d(t){Jt(e,t),t&&D(n);for(let e=0;e<r.length;e+=1)r[e].d(t);t&&D(i);for(let e=0;e<l.length;e+=1)l[e].d(t);t&&D(o)}}}function Va(t){let e,n,i,o,s,r,a,l,c,u,h,d,p=t[1].name+"",f=[],m=new ba,g=t[4];const _=t=>t[34].id;for(let e=0;e<g.length;e+=1){let n=Pa(t,g,e),i=_(n);m.set(i,f[e]=La(i,n))}return c=new ns({props:{options:{zoom:3,center:[0,0]},$$slots:{default:[Wa]},$$scope:{ctx:t}}}),t[16](c),{c(){e=N("h1"),n=j(p),i=B(),o=N("label"),s=j("Agent:\n  "),r=N("select");for(let t=0;t<f.length;t+=1)f[t].c();a=B(),l=N("div"),Kt(c.$$.fragment),F(e,"id","opName"),void 0===t[2]&&$t((()=>t[15].call(r))),F(l,"id","map"),F(l,"class","svelte-1iwg3ka")},m(p,m){A(p,e,m),E(e,n),A(p,i,m),A(p,o,m),E(o,s),E(o,r);for(let t=0;t<f.length;t+=1)f[t].m(r,null);G(r,t[2]),A(p,a,m),A(p,l,m),Gt(c,l,null),u=!0,h||(d=U(r,"change",t[15]),h=!0)},p(t,e){(!u||2&e[0])&&p!==(p=t[1].name+"")&&V(n,p),16&e[0]&&(g=t[4],f=Wt(f,e,_,1,t,g,m,r,Zt,La,null,Pa)),20&e[0]&&G(r,t[2]);const i={};98&e[0]|64&e[1]&&(i.$$scope={dirty:e,ctx:t}),c.$set(i)},i(t){u||(Dt(c.$$.fragment,t),u=!0)},o(t){Rt(c.$$.fragment,t),u=!1},d(n){n&&D(e),n&&D(i),n&&D(o);for(let t=0;t<f.length;t+=1)f[t].d();n&&D(a),n&&D(l),t[16](null),Jt(c),h=!1,d()}}}const qa="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";function Ka(t,e,i){let o,s,r,a=n,l=()=>(a(),a=d(c,(t=>i(14,r=t))),c);t.$$.on_destroy.push((()=>a()));let{opStore:c}=e;l();let u=null;const h=Yn.get();let p,f,m,g=h.id,_=[];let v;return t.$$set=t=>{"opStore"in t&&l(i(0,c=t.opStore))},t.$$.update=()=>{if(16384&t.$$.dirty[0]&&i(1,u=r),2&t.$$.dirty[0]&&i(6,o={polygons:u.zones.filter((t=>t.points&&t.points.length>2))}),2&t.$$.dirty[0]){const t=new Map;for(const e of u.teamlist){const n=ui.get(e.teamid);if(n)for(const e of n.agents)t.set(e.id,e)}t.size?i(4,_=Array.from(t.values())):i(4,_=[{id:h.id,name:h.name}])}if(14342&t.$$.dirty[0]){i(11,p={markers:[],links:[],anchors:[]}),i(12,f={markers:[],links:[],anchors:[]}),i(13,m={markers:[],links:[],anchors:[]});for(const t of u.markers){(t.assignedTo?t.assignedTo===g?p:m:f).markers.push(t)}for(const t of u.links){const e=t.assignedTo?t.assignedTo===g?p:m:f;e.links.push(t),e.anchors.includes(t.fromPortalId)||e.anchors.push(t.fromPortalId),e.anchors.includes(t.toPortalId)||e.anchors.push(t.toPortalId)}}if(14336&t.$$.dirty[0]&&i(5,s={Assignments:p,Others:m,Unassigned:f}),10&t.$$.dirty[0]&&v){const t=v.getMap(),e=u.mbr;t&&e&&t.fitBounds(e)}},[c,u,g,v,_,s,o,function(t){const e=Jn.get(t);return e?e.name:t},function(t){return function(t){switch(t){case"groupa":return"orange";case"groupb":return"yellow";case"groupc":return"lime";case"groupd":return"purple";case"groupe":return"teal";case"groupf":return"fuchsia";case"main":return"red";default:return t}}("main"==t.color?u.color:t.color)},{minZoom:0,maxZoom:20,maxNativeZoom:19,attribution:" OpenStreetMap contributors"},{iconSize:[24,41],iconAnchor:[12,41],popupAnchor:[-1,-48]},p,f,m,r,function(){g=J(this),i(2,g),i(4,_),i(1,u),i(14,r)},function(t){gt[t?"unshift":"push"]((()=>{v=t,i(3,v)}))}]}class Ga extends Xt{constructor(t){super(),Yt(this,t,Ka,Va,c,{opStore:0},null,[-1,-1])}}function Ja(t,e,n){const i=t.slice();return i[19]=e[n],i}function Ya(t,e,n){const i=t.slice();return i[22]=e[n],i}function Xa(t,e,n){const i=t.slice();return i[22]=e[n],i}function Qa(t){let e;return{c(){e=N("th"),e.textContent=""},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function tl(t){let e,n,i,o;function s(){return t[11](t[22])}return{c(){e=N("td"),n=N("button"),n.textContent="Remove",F(n,"class","btn btn-secondary btn-sm")},m(t,r){A(t,e,r),E(e,n),i||(o=U(n,"click",s),i=!0)},p(e,n){t=e},d(t){t&&D(e),i=!1,o()}}}function el(t){let e,n,i,o,s,r,a,l,c,u,h,d=t[22].name+"",p=t[22].role+"",f=t[22].zoneName+"",m=t[6]&&tl(t);return{c(){e=N("tr"),n=N("td"),i=j(d),o=B(),s=N("td"),r=j(p),a=B(),l=N("td"),c=j(f),u=B(),m&&m.c(),h=B()},m(t,d){A(t,e,d),E(e,n),E(n,i),E(e,o),E(e,s),E(s,r),E(e,a),E(e,l),E(l,c),E(e,u),m&&m.m(e,null),E(e,h)},p(t,n){32&n&&d!==(d=t[22].name+"")&&V(i,d),32&n&&p!==(p=t[22].role+"")&&V(r,p),32&n&&f!==(f=t[22].zoneName+"")&&V(c,f),t[6]?m?m.p(t,n):(m=tl(t),m.c(),m.m(e,h)):m&&(m.d(1),m=null)},d(t){t&&D(e),m&&m.d()}}}function nl(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w=[],b=new Map,x=[],$=new Map,k=t[7].Teams;const T=t=>t[22].ID;for(let e=0;e<k.length;e+=1){let n=Ya(t,k,e),i=T(n);b.set(i,w[e]=il(i,n))}let I=t[1].zones;const P=t=>t[19].id;for(let e=0;e<I.length;e+=1){let n=Ja(t,I,e),i=P(n);$.set(i,x[e]=ol(i,n))}return{c(){e=N("div"),n=N("label"),i=j("Add Team:\n      "),o=N("select"),s=N("option"),s.textContent="Team name:";for(let t=0;t<w.length;t+=1)w[t].c();r=B(),l=N("select"),c=N("option"),c.textContent="Role:",u=N("option"),u.textContent="Read",h=N("option"),h.textContent="Write",d=N("option"),d.textContent="Assigned only",p=B(),f=N("select"),m=N("option"),m.textContent="All zones";for(let t=0;t<x.length;t+=1)x[t].c();g=B(),_=N("button"),_.textContent="Add",s.disabled=!0,s.__value="Team name:",s.value=s.__value,void 0===t[2]&&$t((()=>t[12].call(o))),c.disabled=!0,c.__value="Role:",c.value=c.__value,u.__value="read",u.value=u.__value,h.__value="write",h.value=h.__value,d.__value="assignedonly",d.value=d.__value,void 0===t[3]&&$t((()=>t[13].call(l))),m.__value="0",m.value=m.__value,void 0===t[4]&&$t((()=>t[14].call(f))),F(_,"class","btn btn-info")},m(a,b){A(a,e,b),E(e,n),E(n,i),E(n,o),E(o,s);for(let t=0;t<w.length;t+=1)w[t].m(o,null);G(o,t[2]),E(n,r),E(n,l),E(l,c),E(l,u),E(l,h),E(l,d),G(l,t[3]),E(n,p),E(n,f),E(f,m);for(let t=0;t<x.length;t+=1)x[t].m(f,null);G(f,t[4]),E(e,g),E(e,_),v||(y=[U(o,"change",t[12]),U(l,"change",t[13]),U(f,"change",t[14]),U(_,"click",t[9])],v=!0)},p(t,e){128&e&&(k=t[7].Teams,w=Wt(w,e,T,1,t,k,b,o,Zt,il,null,Ya)),132&e&&G(o,t[2]),8&e&&G(l,t[3]),2&e&&(I=t[1].zones,x=Wt(x,e,P,1,t,I,$,f,Zt,ol,null,Ja)),18&e&&G(f,t[4])},d(t){t&&D(e);for(let t=0;t<w.length;t+=1)w[t].d();for(let t=0;t<x.length;t+=1)x[t].d();v=!1,a(y)}}}function il(t,e){let n,i,o,s,r=e[22].Name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[22].ID,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,n){e=t},d(t){t&&D(n)}}}function ol(t,e){let n,i,o,s,r=e[19].name+"";return{key:t,first:null,c(){n=N("option"),i=j(r),o=B(),n.__value=s=e[19].id,n.value=n.__value,this.first=n},m(t,e){A(t,n,e),E(n,i),E(n,o)},p(t,o){e=t,2&o&&r!==(r=e[19].name+"")&&V(i,r),2&o&&s!==(s=e[19].id)&&(n.__value=s,n.value=n.__value)},d(t){t&&D(n)}}}function sl(t){let e,i,o,s,r,a,l,c,u,h,d,p,f,m,g,_,v=t[1].name+"",y=t[6]&&Qa(),w=t[5],b=[];for(let e=0;e<w.length;e+=1)b[e]=el(Xa(t,w,e));let x=t[6]&&nl(t);return{c(){e=N("h1"),i=j(v),o=B(),s=N("table"),r=N("thead"),a=N("tr"),l=N("th"),l.textContent="Team",c=B(),u=N("th"),u.textContent="Permission",h=B(),d=N("th"),d.textContent="Zone",p=B(),y&&y.c(),f=B(),m=N("tbody");for(let t=0;t<b.length;t+=1)b[t].c();g=B(),x&&x.c(),_=Z(),F(e,"id","opName"),F(s,"class","table table-striped")},m(t,n){A(t,e,n),E(e,i),A(t,o,n),A(t,s,n),E(s,r),E(r,a),E(a,l),E(a,c),E(a,u),E(a,h),E(a,d),E(a,p),y&&y.m(a,null),E(s,f),E(s,m);for(let t=0;t<b.length;t+=1)b[t].m(m,null);A(t,g,n),x&&x.m(t,n),A(t,_,n)},p(t,[e]){if(2&e&&v!==(v=t[1].name+"")&&V(i,v),t[6]?y||(y=Qa(),y.c(),y.m(a,null)):y&&(y.d(1),y=null),352&e){let n;for(w=t[5],n=0;n<w.length;n+=1){const i=Xa(t,w,n);b[n]?b[n].p(i,e):(b[n]=el(i),b[n].c(),b[n].m(m,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=w.length}t[6]?x?x.p(t,e):(x=nl(t),x.c(),x.m(_.parentNode,_)):x&&(x.d(1),x=null)},i:n,o:n,d(t){t&&D(e),t&&D(o),t&&D(s),y&&y.d(),R(b,t),t&&D(g),x&&x.d(t),t&&D(_)}}}function rl(t,e,i){let o,s,r,a=n,l=()=>(a(),a=d(p,(t=>i(10,r=t))),p);t.$$.on_destroy.push((()=>a()));var c=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};const u=ht();function h(){u("routeEvent",{refresh:!0})}let{opStore:p}=e;l();let f=null;const m=Yn.get();let g=null,_=null,v=0;function y(t){for(const e of f.zones)if(e.id==t)return e.name;return"*"}function w(t){return c(this,void 0,void 0,(function*(){try{yield hi(function(t,e,n,i){const o=new FormData;return o.append("team",e),o.append("role",n),o.append("zone",`${i}`),Ci(`/api/v1/draw/${t}/perms`,o)}(f.ID,t.id,t.role,t.zone)),h()}catch(t){console.log(t)}}))}return t.$$set=t=>{"opStore"in t&&l(i(0,p=t.opStore))},t.$$.update=()=>{1024&t.$$.dirty&&i(1,f=r),2&t.$$.dirty&&i(6,o=m.id==f.creator),2&t.$$.dirty&&i(5,s=f.teamlist.map((t=>{const e=m.getTeam(t.teamid),n=e?e.Name:t.teamid;return{key:t.teamid+"/"+t.role+"/"+t.zone,id:t.teamid,name:n,role:t.role,zone:t.zone,zoneName:y(t.zone)}})))},[p,f,g,_,v,s,o,m,w,function(){return c(this,void 0,void 0,(function*(){if(g&&_){for(const t of f.teamlist)if(t.teamid==g&&t.role==_&&t.zone==v)return;try{yield hi(function(t,e,n,i){const o=new FormData;return o.append("team",e),o.append("role",n),o.append("zone",`${i}`),Li(`/api/v1/draw/${t}/perms`,o)}(f.ID,g,_,v)),h()}catch(t){console.log(t)}}}))},r,t=>w(t),function(){g=J(this),i(2,g),i(7,m)},function(){_=J(this),i(3,_)},function(){v=J(this),i(4,v),i(1,f),i(10,r)}]}class al extends Xt{constructor(t){super(),Yt(this,t,rl,sl,c,{opStore:0})}}const{Map:ll}=Bt;function cl(t,e,n){const i=t.slice();return i[31]=e[n],i}function ul(t,e,n){const i=t.slice();return i[31]=e[n],i}function hl(t,e,n){const i=t.slice();return i[31]=e[n],i}function dl(t){let e,n,i,o,s,r;return n=new kr({props:{portalId:t[31].fromPortalId,operation:t[1]}}),s=new kr({props:{portalId:t[31].toPortalId,operation:t[1]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),Kt(s.$$.fragment),F(e,"class","svelte-t6pads"),F(o,"class","svelte-t6pads")},m(t,a){A(t,e,a),Gt(n,e,null),A(t,i,a),A(t,o,a),Gt(s,o,null),r=!0},p(t,e){const i={};256&e[0]&&(i.portalId=t[31].fromPortalId),2&e[0]&&(i.operation=t[1]),n.$set(i);const o={};256&e[0]&&(o.portalId=t[31].toPortalId),2&e[0]&&(o.operation=t[1]),s.$set(o)},i(t){r||(Dt(n.$$.fragment,t),Dt(s.$$.fragment,t),r=!0)},o(t){Rt(n.$$.fragment,t),Rt(s.$$.fragment,t),r=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),Jt(s)}}}function pl(t){let e,n,i,o,s,r,a,l=t[31].friendlyType+"";return n=new kr({props:{portalId:t[31].portalId,operation:t[1]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),s=j(l),F(e,"class","svelte-t6pads"),F(o,"class",r=x(t[31].type)+" svelte-t6pads")},m(t,r){A(t,e,r),Gt(n,e,null),A(t,i,r),A(t,o,r),E(o,s),a=!0},p(t,e){const i={};256&e[0]&&(i.portalId=t[31].portalId),2&e[0]&&(i.operation=t[1]),n.$set(i),(!a||256&e[0])&&l!==(l=t[31].friendlyType+"")&&V(s,l),(!a||256&e[0]&&r!==(r=x(t[31].type)+" svelte-t6pads"))&&F(o,"class",r)},i(t){a||(Dt(n.$$.fragment,t),a=!0)},o(t){Rt(n.$$.fragment,t),a=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o)}}}function fl(t,e){let i,o,s,r,a,l,c,u,h,d,p,f,m,g,_=e[31].order+"",v=e[15](e[31].zone)+"",y=n;const w=[pl,dl],b=[];function x(t,e){return t[31]instanceof oi?0:t[31]instanceof Qn?1:-1}function $(){return e[25](e[31])}return~(a=x(e))&&(l=b[a]=w[a](e)),{key:t,first:null,c(){i=N("tr"),o=N("td"),s=j(_),r=B(),l&&l.c(),c=B(),u=N("td"),h=j(v),d=B(),F(o,"class","order svelte-t6pads"),F(u,"class","svelte-t6pads"),Y(i,"table-success",e[4]&&e[4].ID==e[31].ID),this.first=i},m(t,e){A(t,i,e),E(i,o),E(o,s),E(i,r),~a&&b[a].m(i,null),E(i,c),E(i,u),E(u,h),E(i,d),f=!0,m||(g=U(i,"click",$),m=!0)},p(t,n){e=t,(!f||256&n[0])&&_!==(_=e[31].order+"")&&V(s,_);let o=a;a=x(e),a===o?~a&&b[a].p(e,n):(l&&(Ot(),Rt(b[o],1,1,(()=>{b[o]=null})),At()),~a?(l=b[a],l?l.p(e,n):(l=b[a]=w[a](e),l.c()),Dt(l,1),l.m(i,c)):l=null),(!f||256&n[0])&&v!==(v=e[15](e[31].zone)+"")&&V(h,v),272&n[0]&&Y(i,"table-success",e[4]&&e[4].ID==e[31].ID)},r(){p=i.getBoundingClientRect()},f(){st(i),y()},a(){y(),y=ot(i,p,ye,{duration:1e3})},i(t){f||(Dt(l),f=!0)},o(t){Rt(l),f=!1},d(t){t&&D(i),~a&&b[a].d(),m=!1,g()}}}function ml(t){let e,i,o,s,r,a=[],l=new ll,c=t[8];const u=t=>t[31].ID;for(let e=0;e<c.length;e+=1){let n=cl(t,c,e),i=u(n);l.set(i,a[e]=_l(i,n))}return{c(){e=N("div"),i=N("table"),o=N("thead"),o.innerHTML="<tr><th>Header</th></tr>",s=B(),r=N("tbody");for(let t=0;t<a.length;t+=1)a[t].c();K(r,"--graph-size",t[9]),F(i,"class","table table-striped graph svelte-t6pads"),F(e,"class","col-6")},m(t,n){A(t,e,n),E(e,i),E(i,o),E(i,s),E(i,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null)},p(t,e){if(74644&e[0]){c=t[8];for(let t=0;t<a.length;t+=1)a[t].r();a=Wt(a,e,u,1,t,c,l,r,Ft,_l,null,cl);for(let t=0;t<a.length;t+=1)a[t].a()}512&e[0]&&K(r,"--graph-size",t[9])},i:n,o:n,d(t){t&&D(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function gl(t){let e,n,i,o,s,r,a=[],l=new ll,c=t[8];const u=t=>t[31].ID;for(let e=0;e<c.length;e+=1){let n=ul(t,c,e),i=u(n);l.set(i,a[e]=wl(i,n))}return{c(){e=N("div"),n=N("table"),i=N("thead"),i.innerHTML='<tr><th scope="col" class="order svelte-t6pads">Order</th> \n            <th scope="col">Portal</th> \n            <th scope="col">To/Action</th> \n            <th scope="col">Zone</th></tr>',o=B(),s=N("tbody");for(let t=0;t<a.length;t+=1)a[t].c();F(s,"id","opSteps"),F(n,"class","table table-striped steps svelte-t6pads"),F(e,"class","col-6")},m(t,l){A(t,e,l),E(e,n),E(n,i),E(n,o),E(n,s);for(let t=0;t<a.length;t+=1)a[t].m(s,null);r=!0},p(t,e){if(41298&e[0]){c=t[8],Ot();for(let t=0;t<a.length;t+=1)a[t].r();a=Wt(a,e,u,1,t,c,l,s,Ht,wl,null,ul);for(let t=0;t<a.length;t+=1)a[t].a();At()}},i(t){if(!r){for(let t=0;t<c.length;t+=1)Dt(a[t]);r=!0}},o(t){for(let t=0;t<a.length;t+=1)Rt(a[t]);r=!1},d(t){t&&D(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function _l(t,e){let i,o,s,r,a,l,c,u,h=n;function d(){return e[27](e[31])}return{key:t,first:null,c(){i=N("tr"),o=N("td"),s=j(""),a=B(),F(o,"class",r=x(e[16](e[4],e[31]))+" svelte-t6pads"),K(o,"margin-left",e[7].get(e[31].ID)/e[9]*100+"%"),K(o,"width",(e[2].get(e[31].ID)-e[7].get(e[31].ID))/e[9]*100+"%"),this.first=i},m(t,e){A(t,i,e),E(i,o),E(o,s),E(i,a),c||(u=U(i,"click",d),c=!0)},p(t,n){e=t,272&n[0]&&r!==(r=x(e[16](e[4],e[31]))+" svelte-t6pads")&&F(o,"class",r),896&n[0]&&K(o,"margin-left",e[7].get(e[31].ID)/e[9]*100+"%"),900&n[0]&&K(o,"width",(e[2].get(e[31].ID)-e[7].get(e[31].ID))/e[9]*100+"%")},r(){l=i.getBoundingClientRect()},f(){st(i),h()},a(){h(),h=ot(i,l,ye,{duration:1e3})},d(t){t&&D(i),c=!1,u()}}}function vl(t){let e,n,i,o,s,r;return n=new kr({props:{portalId:t[31].fromPortalId,operation:t[1]}}),s=new kr({props:{portalId:t[31].toPortalId,operation:t[1]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),Kt(s.$$.fragment),F(e,"class","svelte-t6pads"),F(o,"class","svelte-t6pads")},m(t,a){A(t,e,a),Gt(n,e,null),A(t,i,a),A(t,o,a),Gt(s,o,null),r=!0},p(t,e){const i={};256&e[0]&&(i.portalId=t[31].fromPortalId),2&e[0]&&(i.operation=t[1]),n.$set(i);const o={};256&e[0]&&(o.portalId=t[31].toPortalId),2&e[0]&&(o.operation=t[1]),s.$set(o)},i(t){r||(Dt(n.$$.fragment,t),Dt(s.$$.fragment,t),r=!0)},o(t){Rt(n.$$.fragment,t),Rt(s.$$.fragment,t),r=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),Jt(s)}}}function yl(t){let e,n,i,o,s,r,a,l=t[31].friendlyType+"";return n=new kr({props:{portalId:t[31].portalId,operation:t[1]}}),{c(){e=N("td"),Kt(n.$$.fragment),i=B(),o=N("td"),s=j(l),F(e,"class","svelte-t6pads"),F(o,"class",r=x(t[31].type)+" svelte-t6pads")},m(t,r){A(t,e,r),Gt(n,e,null),A(t,i,r),A(t,o,r),E(o,s),a=!0},p(t,e){const i={};256&e[0]&&(i.portalId=t[31].portalId),2&e[0]&&(i.operation=t[1]),n.$set(i),(!a||256&e[0])&&l!==(l=t[31].friendlyType+"")&&V(s,l),(!a||256&e[0]&&r!==(r=x(t[31].type)+" svelte-t6pads"))&&F(o,"class",r)},i(t){a||(Dt(n.$$.fragment,t),a=!0)},o(t){Rt(n.$$.fragment,t),a=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o)}}}function wl(t,e){let i,o,s,r,a,l,c,u,h,d,p,f,m,g,_=e[31].order+"",v=e[15](e[31].zone)+"",y=n;const w=[yl,vl],b=[];function x(t,e){return t[31]instanceof oi?0:t[31]instanceof Qn?1:-1}function $(){return e[26](e[31])}return~(a=x(e))&&(l=b[a]=w[a](e)),{key:t,first:null,c(){i=N("tr"),o=N("td"),s=j(_),r=B(),l&&l.c(),c=B(),u=N("td"),h=j(v),d=B(),F(o,"class","order svelte-t6pads"),F(u,"class","svelte-t6pads"),Y(i,"table-warning",e[4]&&e[6].has(e[4].ID)&&e[6].get(e[4].ID).includes(e[31].ID)),Y(i,"table-success",e[4]&&e[4].dependsOn.includes(e[31].ID)),Y(i,"table-danger",e[4]&&e[31].dependsOn.includes(e[4].ID)),this.first=i},m(t,e){A(t,i,e),E(i,o),E(o,s),E(i,r),~a&&b[a].m(i,null),E(i,c),E(i,u),E(u,h),E(i,d),f=!0,m||(g=U(i,"click",$),m=!0)},p(t,n){e=t,(!f||256&n[0])&&_!==(_=e[31].order+"")&&V(s,_);let o=a;a=x(e),a===o?~a&&b[a].p(e,n):(l&&(Ot(),Rt(b[o],1,1,(()=>{b[o]=null})),At()),~a?(l=b[a],l?l.p(e,n):(l=b[a]=w[a](e),l.c()),Dt(l,1),l.m(i,c)):l=null),(!f||256&n[0])&&v!==(v=e[15](e[31].zone)+"")&&V(h,v),336&n[0]&&Y(i,"table-warning",e[4]&&e[6].has(e[4].ID)&&e[6].get(e[4].ID).includes(e[31].ID)),272&n[0]&&Y(i,"table-success",e[4]&&e[4].dependsOn.includes(e[31].ID)),272&n[0]&&Y(i,"table-danger",e[4]&&e[31].dependsOn.includes(e[4].ID))},r(){p=i.getBoundingClientRect()},f(){st(i),y()},a(){y(),y=ot(i,p,ye,{duration:1e3})},i(t){f||(Dt(l),f=!0)},o(t){Rt(l),f=!1},d(t){t&&D(i),~a&&b[a].d(),m=!1,g()}}}function bl(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L,S,C,M,O=t[1].name+"",R=[],z=new ll,Z=t[8];const H=t=>t[31].ID;for(let e=0;e<Z.length;e+=1){let n=hl(t,Z,e),i=H(n);z.set(i,R[e]=fl(i,n))}const W=[gl,ml],q=[];function K(t,e){return t[5]?1:0}return P=K(t),L=q[P]=W[P](t),{c(){e=N("div"),n=N("div"),i=j(O),o=B(),s=N("button"),s.textContent="Toggle diagram",r=B(),l=N("button"),l.textContent="Reset depends",c=B(),u=N("button"),u.textContent="Guess from order",h=B(),d=N("button"),d.textContent="Order strict",p=B(),f=N("button"),f.textContent="Order by start",m=B(),g=N("button"),g.textContent="Order by end",_=B(),v=N("button"),v.textContent="Upload order",y=B(),w=N("div"),b=N("div"),x=N("table"),$=N("thead"),$.innerHTML='<tr><th scope="col" class="order svelte-t6pads">Order</th> \n          <th scope="col">Portal</th> \n          <th scope="col">To/Action</th> \n          <th scope="col">Zone</th></tr>',k=B(),T=N("tbody");for(let t=0;t<R.length;t+=1)R[t].c();I=B(),L.c(),F(s,"class","btn btn-primary"),F(l,"class","btn btn-primary"),F(u,"class","btn btn-primary"),F(d,"class","btn btn-primary"),F(f,"class","btn btn-primary"),F(g,"class","btn btn-primary"),F(v,"class","btn btn-primary"),F(n,"class","card-header"),F(n,"id","opName"),F(e,"class","card mb-2"),F(T,"id","opSteps"),F(x,"class","table table-striped steps svelte-t6pads"),F(b,"class","col-6"),F(w,"class","row")},m(a,L){A(a,e,L),E(e,n),E(n,i),E(n,o),E(n,s),E(n,r),E(n,l),E(n,c),E(n,u),E(n,h),E(n,d),E(n,p),E(n,f),E(n,m),E(n,g),E(n,_),E(n,v),A(a,y,L),A(a,w,L),E(w,b),E(b,x),E(x,$),E(x,k),E(x,T);for(let t=0;t<R.length;t+=1)R[t].m(T,null);E(w,I),q[P].m(w,null),S=!0,C||(M=[U(s,"click",t[18]),U(l,"click",t[19]),U(u,"click",t[20]),U(d,"click",t[21]),U(f,"click",t[22]),U(g,"click",t[23]),U(v,"click",t[24])],C=!0)},p(t,e){if((!S||2&e[0])&&O!==(O=t[1].name+"")&&V(i,O),33042&e[0]){Z=t[8],Ot();for(let t=0;t<R.length;t+=1)R[t].r();R=Wt(R,e,H,1,t,Z,z,T,Ht,fl,null,hl);for(let t=0;t<R.length;t+=1)R[t].a();At()}let n=P;P=K(t),P===n?q[P].p(t,e):(Ot(),Rt(q[n],1,1,(()=>{q[n]=null})),At(),L=q[P],L?L.p(t,e):(L=q[P]=W[P](t),L.c()),Dt(L,1),L.m(w,null))},i(t){if(!S){for(let t=0;t<Z.length;t+=1)Dt(R[t]);Dt(L),S=!0}},o(t){for(let t=0;t<R.length;t+=1)Rt(R[t]);Rt(L),S=!1},d(t){t&&D(e),t&&D(y),t&&D(w);for(let t=0;t<R.length;t+=1)R[t].d();q[P].d(),C=!1,a(M)}}}function xl(t,e,i){let o,s,r,a,l,c,u,h,p=n,f=()=>(p(),p=d(_,(t=>i(17,h=t))),_);t.$$.on_destroy.push((()=>p()));var m=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let g,{opStore:_}=e;function v(){for(const t of o.markers)t.dependsOn=[];for(const t of o.links)t.dependsOn=[];o.store(),i(3,[s,r,a,l]=$(o),s,(i(7,r),i(1,o),i(17,h)),(i(2,a),i(1,o),i(17,h)),(i(6,l),i(1,o),i(17,h)))}function y(){const t=o.markers.concat(o.links);if(t.every((t=>0==t.dependsOn.length))){t.sort(((t,e)=>t.order-e.order));for(let e=0;e<t.length-1;e++){let n=t[e].order,i=e+1;for(;i<t.length&&t[i].order==n;i++);if(i==t.length)break;for(n=t[i].order;i<t.length&&t[i].order==n;i++)t[i].dependsOn.includes(t[e].ID)||t[i].dependsOn.push(t[e].ID)}}o.store(),i(3,[s,r,a,l]=$(o),s,(i(7,r),i(1,o),i(17,h)),(i(2,a),i(1,o),i(17,h)),(i(6,l),i(1,o),i(17,h)))}function w(t){for(const e of o.markers)e.order=t.get(e.ID);for(const e of o.links)e.order=t.get(e.ID);o.store(),i(8,u),i(1,o),i(3,t),i(17,h)}function b(t){if(!g)return;let e=g.dependsOn;var n,c;e.includes(t)?(e=e.filter((e=>e!==t)),hi((n=o.ID,c=t,Ci(`/api/v1/draw/${n}/task/${g.ID}/depend/${c}`)))):(e.push(t),hi(function(t,e,n){return Si(`/api/v1/draw/${t}/task/${e.ID}/depend/${n}`)}(o.ID,g,t))),i(4,g.dependsOn=e,g),i(3,[s,r,a,l]=$(o),s,(i(7,r),i(1,o),i(17,h)),(i(2,a),i(1,o),i(17,h)),(i(6,l),i(1,o),i(17,h))),o.store()}function x(){return m(this,void 0,void 0,(function*(){const t=yield wi(o.ID);if(t!==o){const e=new Map;for(const t of o.markers)e.set(t.ID,t);for(const t of o.links)e.set(t.ID,t);const n=[];for(const e of t.markers)n.push(e);for(const e of t.links)n.push(e);for(const t of n){const n=e.get(t.ID);n&&(t.order=n.order,t.dependsOn=n.dependsOn)}}var e;yield hi(bi(t)),t.store(),h=t,e=h,_.set(e)}))}function $(t){const e=new Map,n=new Map,i=new Map,o=new Map;if(t&&(t.links.length||t.markers.length)){const s=new Map;for(const e of t.markers)s.set(e.ID,e.dependsOn);for(const e of t.links)s.set(e.ID,e.dependsOn);let r=0;function a(t,n){if(!e.has(n)&&t.has(n)){e.set(n,r);for(const e of t.get(n))a(t,e);e.set(n,r),r+=1}}for(const t of s.keys())a(s,t);const l=Array.from(e).sort(((t,e)=>e[1]-t[1])).map((t=>t[0])),c=new Map(l.map((t=>[t,[]])));for(const[t,e]of s)for(const n of e)c.has(n)&&c.get(n).push(t);e.clear(),r=0;let u=0;const h=[];for(const t of l){if(e.has(t))continue;a(c,t);const n=Array.from(e).filter((t=>t[1]>=u)).map((t=>t[0]));for(const t of n)o.set(t,n);u=r,h.push(n)}for(const[t,n]of e)e.set(t,r-n);let d=0;for(const t of h.reverse()){let e=0;for(const i of t)for(const o of s.get(i))if(!t.includes(o)){const t=n.get(o);e<t+1&&(e=t+1)}for(const i of t)n.set(i,e);e>d&&(d=e)}for(const t of h){let e=d+1;for(const i of t)for(const o of c.get(i))if(!t.includes(o)){const t=n.get(o);e>t&&(e=t)}for(const n of t)i.set(n,e)}}return[e,n,i,o]}f();let k=!1;return t.$$set=t=>{"opStore"in t&&f(i(0,_=t.opStore))},t.$$.update=()=>{131072&t.$$.dirty[0]&&i(1,o=h),2&t.$$.dirty[0]&&i(3,[s,r,a,l]=$(o),s,(i(7,r),i(1,o),i(17,h)),(i(2,a),i(1,o),i(17,h)),(i(6,l),i(1,o),i(17,h))),4&t.$$.dirty[0]&&i(9,c=Math.max(...a.values())),10&t.$$.dirty[0]&&i(8,u=function(t,e){if(t){const n=t.markers.concat(t.links);return n.sort(((t,n)=>e.get(t.ID)-e.get(n.ID))),n}return[]}(o,s))},[_,o,a,s,g,k,l,r,u,c,v,y,w,b,x,function(t){for(const e of o.zones)if(e.id==t)return e.name;return"*"},function(t,e){return t?t.ID===e.ID?"table-warning":t.dependsOn.includes(e.ID)?"table-success":e.dependsOn.includes(t.ID)?"table-danger":l.get(t.ID).includes(e.ID)?"table-warning":"table-dark":"table-dark"},h,()=>i(5,k=!k),()=>v(),()=>y(),()=>w(s),()=>w(r),()=>w(a),()=>x(),t=>{i(4,g=t)},t=>b(t.ID),t=>b(t.ID)]}class $l extends Xt{constructor(t){super(),Yt(this,t,xl,bl,c,{opStore:0},null,[-1,-1])}}function kl(t){let e,i,o,s,r,l,c,u,h,d,p,f,m;return{c(){e=N("li"),i=N("a"),o=j("Manage"),l=B(),c=N("li"),u=N("a"),h=j("Graph"),F(i,"class","nav-link"),F(i,"href",s="#/operation/"+t[2]+"/manage"),F(e,"class","nav-item"),F(u,"class","nav-link"),F(u,"href",d="#/operation/"+t[2]+"/graph"),F(c,"class","nav-item")},m(t,n){A(t,e,n),E(e,i),E(i,o),A(t,l,n),A(t,c,n),E(c,u),E(u,h),f||(m=[$(r=Vo.call(null,i)),$(p=Vo.call(null,u))],f=!0)},p:n,d(t){t&&D(e),t&&D(l),t&&D(c),f=!1,a(m)}}}function Tl(t){let e,i;return e=new pe({props:{prefix:t[3],routes:t[5]}}),e.$on("routeEvent",t[6]),{c(){Kt(e.$$.fragment)},m(t,n){Gt(e,t,n),i=!0},p:n,i(t){i||(Dt(e.$$.fragment,t),i=!0)},o(t){Rt(e.$$.fragment,t),i=!1},d(t){Jt(e,t)}}}function Il(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,k,T,I,P,L,S,C,M=t[1]&&kl(t),O=t[0]&&Tl(t);return{c(){e=N("ul"),n=N("li"),i=N("a"),o=j("Checklist"),s=B(),r=N("li"),l=N("a"),c=j("Assignments"),u=B(),h=N("li"),d=N("a"),p=j("Map"),f=B(),m=N("li"),g=N("a"),_=j("Keys"),v=B(),M&&M.c(),y=B(),w=N("li"),b=N("a"),x=j("Permissions"),k=B(),T=N("button"),T.textContent="",I=B(),P=N("div"),O&&O.c(),F(i,"class","nav-link"),F(i,"href","#/operation/"+t[2]+"/list"),F(n,"class","nav-item"),F(l,"class","nav-link"),F(l,"href","#/operation/"+t[2]+"/assignments"),F(r,"class","nav-item"),F(d,"class","nav-link"),F(d,"href","#/operation/"+t[2]+"/map"),F(h,"class","nav-item"),F(g,"class","nav-link"),F(g,"href","#/operation/"+t[2]+"/keys"),F(m,"class","nav-item"),F(b,"class","nav-link"),F(b,"href","#/operation/"+t[2]+"/permissions"),F(w,"class","nav-item"),F(T,"class","btn btn-primary"),F(e,"class","nav nav-tabs"),F(P,"class","container-fluid")},m(a,D){A(a,e,D),E(e,n),E(n,i),E(i,o),E(e,s),E(e,r),E(r,l),E(l,c),E(e,u),E(e,h),E(h,d),E(d,p),E(e,f),E(e,m),E(m,g),E(g,_),E(e,v),M&&M.m(e,null),E(e,y),E(e,w),E(w,b),E(b,x),E(e,k),E(e,T),A(a,I,D),A(a,P,D),O&&O.m(P,null),L=!0,S||(C=[$(Vo.call(null,i)),$(Vo.call(null,l)),$(Vo.call(null,d)),$(Vo.call(null,g)),$(Vo.call(null,b)),U(T,"click",t[8])],S=!0)},p(t,[n]){t[1]?M?M.p(t,n):(M=kl(t),M.c(),M.m(e,y)):M&&(M.d(1),M=null),t[0]?O?(O.p(t,n),1&n&&Dt(O,1)):(O=Tl(t),O.c(),Dt(O,1),O.m(P,null)):O&&(Ot(),Rt(O,1,1,(()=>{O=null})),At())},i(t){L||(Dt(O),L=!0)},o(t){Rt(O),L=!1},d(t){t&&D(e),M&&M.d(),t&&D(I),t&&D(P),O&&O.d(),S=!1,a(C)}}}function Pl(t,e,n){let i,{params:o={}}=e,s=o.opid,r="/operation/"+s,a=Yn.get(),l=ne(null),c=ai.load(s);function u(){wi(s).then((t=>{n(0,c=t)}))}u();const h={"/list":Qt({component:Nr,props:{opStore:l,assignmentsOnly:!1}}),"/assignments":Qt({component:Nr,props:{opStore:l,assignmentsOnly:!0}}),"/permissions":Qt({component:al,props:{opStore:l}}),"/map":Qt({component:Ga,props:{opStore:l}}),"/keys":Qt({component:ia,props:{opStore:l}}),"/manage":Qt({component:ma,props:{opStore:l},conditions:[()=>i]}),"/graph":Qt({component:$l,props:{opStore:l},conditions:[()=>i]})};return t.$$set=t=>{"params"in t&&n(7,o=t.params)},t.$$.update=()=>{1&t.$$.dirty&&l.set(c),1&t.$$.dirty&&n(1,i=!!c&&c.mayWrite(a))},[c,i,s,r,u,h,function(t){t.detail&&"refresh"in t.detail&&u()},o,()=>u()]}class Ll extends Xt{constructor(t){super(),Yt(this,t,Pl,Il,c,{params:7})}}function Sl(t,e,n){let{params:i={}}=e,{teamid:o}=e,s=i.token;const r=ht();return s&&hi(function(t,e){return Pi(`/api/v1/team/${t}/join/${e}`)}(o,s)).then((()=>{r("refresh"),he(`/team/${o}/list`),di("Welcome aboard")})),t.$$set=t=>{"params"in t&&n(0,i=t.params),"teamid"in t&&n(1,o=t.teamid)},[i,o]}class Cl extends Xt{constructor(t){super(),Yt(this,t,Sl,null,c,{params:0,teamid:1})}}function El(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ml(t){let e,n,i,o,s,r,a,l=t[1].name+"",c=[],u=new Map,h=t[2];const d=t=>t[4].id;for(let e=0;e<h.length;e+=1){let n=El(t,h,e),i=d(n);u.set(i,c[e]=Dl(i,n))}return{c(){e=N("h1"),n=j(l),i=B(),o=N("table"),s=N("thead"),s.innerHTML='<tr><th scope="col"></th> \n        <th scope="col">Agent</th> \n        <th scope="col">Identity</th> \n        <th scope="col">Sharing Location</th> \n        <th scope="col">Sharing WD Keys</th> \n        <th scope="col">Comment</th></tr>',r=B(),a=N("tbody");for(let t=0;t<c.length;t+=1)c[t].c();F(e,"id","teamName"),F(a,"id","teamTable"),F(o,"class","table table-striped")},m(t,l){A(t,e,l),E(e,n),A(t,i,l),A(t,o,l),E(o,s),E(o,r),E(o,a);for(let t=0;t<c.length;t+=1)c[t].m(a,null)},p(t,e){2&e&&l!==(l=t[1].name+"")&&V(n,l),4&e&&(h=t[2],c=Wt(c,e,d,1,t,h,u,a,Zt,Dl,null,El))},d(t){t&&D(e),t&&D(i),t&&D(o);for(let t=0;t<c.length;t+=1)c[t].d()}}}function Ol(t){let e,i;return{c(){e=N("img"),h(e.src,i=Nl)||F(e,"src",i),F(e,"alt","sharing location")},m(t,n){A(t,e,n)},p:n,d(t){t&&D(e)}}}function Al(t){let e,i;return{c(){e=N("img"),h(e.src,i=Nl)||F(e,"src",i),F(e,"alt","sharing wd keys")},m(t,n){A(t,e,n)},p:n,d(t){t&&D(e)}}}function Dl(t,e){let n,i,o,s,r,a,l,c,u,d,p,f,m,g,_,v,y,w,b=e[4].name+"",x=[[e[4].Vverified,"V"],[e[4].rocks,"Rocks"],[e[4].communityname,"Community"],[e[4].intelname,"Intel"]].filter(zl).map(jl).join(" ")+"",$=(e[4].comment||"")+"",k=e[4].shareLocation&&Ol(),T=e[4].shareWDKeys&&Al();return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=N("img"),r=B(),a=N("td"),l=j(b),c=B(),u=N("td"),d=j(x),p=B(),f=N("td"),k&&k.c(),m=B(),g=N("td"),T&&T.c(),_=B(),v=N("td"),y=j($),w=B(),h(o.src,s=e[4].pic)||F(o,"src",s),F(o,"height","50"),F(o,"width","50"),F(o,"alt","agent pic"),this.first=n},m(t,e){A(t,n,e),E(n,i),E(i,o),E(n,r),E(n,a),E(a,l),E(n,c),E(n,u),E(u,d),E(n,p),E(n,f),k&&k.m(f,null),E(n,m),E(n,g),T&&T.m(g,null),E(n,_),E(n,v),E(v,y),E(n,w)},p(t,n){e=t,4&n&&!h(o.src,s=e[4].pic)&&F(o,"src",s),4&n&&b!==(b=e[4].name+"")&&V(l,b),4&n&&x!==(x=[[e[4].Vverified,"V"],[e[4].rocks,"Rocks"],[e[4].communityname,"Community"],[e[4].intelname,"Intel"]].filter(zl).map(jl).join(" ")+"")&&V(d,x),e[4].shareLocation?k?k.p(e,n):(k=Ol(),k.c(),k.m(f,null)):k&&(k.d(1),k=null),e[4].shareWDKeys?T?T.p(e,n):(T=Al(),T.c(),T.m(g,null)):T&&(T.d(1),T=null),4&n&&$!==($=(e[4].comment||"")+"")&&V(y,$)},d(t){t&&D(n),k&&k.d(),T&&T.d()}}}function Rl(t){let e,i=t[1]&&Ml(t);return{c(){i&&i.c(),e=Z()},m(t,n){i&&i.m(t,n),A(t,e,n)},p(t,[n]){t[1]?i?i.p(t,n):(i=Ml(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:n,o:n,d(t){i&&i.d(t),t&&D(e)}}}let Nl="https://cdn2.wasabee.rocks/img/checkmark.png";const zl=t=>t[0],jl=t=>t[1];function Bl(t,e,i){let o,s,r=n,a=()=>(r(),r=d(l,(t=>i(3,s=t))),l);t.$$.on_destroy.push((()=>r()));let{teamStore:l}=e;a();let c=null;return t.$$set=t=>{"teamStore"in t&&a(i(0,l=t.teamStore))},t.$$.update=()=>{8&t.$$.dirty&&i(1,c=s),2&t.$$.dirty&&i(2,o=c?c.agents:[])},[l,c,o,s]}class Zl extends Xt{constructor(t){super(),Yt(this,t,Bl,Rl,c,{teamStore:0})}}function Ul(t,e,n){const i=t.slice();return i[14]=e[n],i[15]=e,i[16]=n,i}function Fl(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L=t[1].name+"",S=[],C=new Map,M=!t[1].rc&&Hl(),O=t[1].agents;const R=t=>t[14].id;for(let e=0;e<O.length;e+=1){let n=Ul(t,O,e),i=R(n);C.set(i,S[e]=ql(i,n))}return{c(){e=N("h1"),n=j(L),i=B(),o=N("label"),s=j("Add Agent:\n    "),r=N("input"),l=B(),c=N("button"),c.textContent="Add",u=B(),h=N("table"),d=N("thead"),p=N("tr"),f=N("th"),f.textContent="",m=B(),g=N("th"),g.textContent="Agent",_=B(),v=N("th"),v.textContent="Identity",y=B(),w=N("th"),w.textContent="Sharing Location",b=B(),x=N("th"),x.textContent="Comment",$=B(),M&&M.c(),k=B(),T=N("tbody");for(let t=0;t<S.length;t+=1)S[t].c();F(e,"id","teamName"),F(r,"type","text"),F(r,"placeholder","GoogleID or Agent Name"),F(f,"scope","col"),F(g,"scope","col"),F(v,"scope","col"),F(w,"scope","col"),F(x,"scope","col"),F(T,"id","teamTable"),F(h,"class","table table-striped")},m(a,L){A(a,e,L),E(e,n),A(a,i,L),A(a,o,L),E(o,s),E(o,r),q(r,t[2]),A(a,l,L),A(a,c,L),A(a,u,L),A(a,h,L),E(h,d),E(d,p),E(p,f),E(p,m),E(p,g),E(p,_),E(p,v),E(p,y),E(p,w),E(p,b),E(p,x),E(p,$),M&&M.m(p,null),E(h,k),E(h,T);for(let t=0;t<S.length;t+=1)S[t].m(T,null);I||(P=[U(r,"input",t[8]),U(c,"click",t[4])],I=!0)},p(t,e){2&e&&L!==(L=t[1].name+"")&&V(n,L),4&e&&r.value!==t[2]&&q(r,t[2]),t[1].rc?M&&(M.d(1),M=null):M||(M=Hl(),M.c(),M.m(p,null)),106&e&&(O=t[1].agents,S=Wt(S,e,R,1,t,O,C,T,Zt,ql,null,Ul))},d(t){t&&D(e),t&&D(i),t&&D(o),t&&D(l),t&&D(c),t&&D(u),t&&D(h),M&&M.d();for(let t=0;t<S.length;t+=1)S[t].d();I=!1,a(P)}}}function Hl(t){let e;return{c(){e=N("th"),e.textContent="",F(e,"scope","col")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Wl(t){let e,i;return{c(){e=N("img"),h(e.src,i=Gl)||F(e,"src",i),F(e,"alt","sharing location")},m(t,n){A(t,e,n)},p:n,d(t){t&&D(e)}}}function Vl(t){let e,n,i;function o(){return t[11](t[14])}return{c(){e=N("button"),e.textContent="Remove",F(e,"class","btn btn-danger btn-sm")},m(t,s){A(t,e,s),n||(i=U(e,"click",o),n=!0)},p(e,n){t=e},d(t){t&&D(e),n=!1,i()}}}function ql(t,e){let n,i,o,s,r,l,c,u,d,p,f,m,g,_,v,y,w,b,x,$,k=e[14].name+"",T=[[e[14].Vverified,"V"],[e[14].rocks,"Rocks"],[e[14].communityname,"Community"],[e[14].intelname,"Intel"]].filter(Jl).map(Yl).join(" ")+"",I=e[14].shareLocation&&Wl();function P(){e[9].call(v,e[15],e[16])}function L(){return e[10](e[14])}let S=e[14].id!=e[3].id&&Vl(e);return{key:t,first:null,c(){n=N("tr"),i=N("td"),o=N("img"),r=B(),l=N("td"),c=j(k),u=B(),d=N("td"),p=j(T),f=B(),m=N("td"),I&&I.c(),g=B(),_=N("td"),v=N("input"),y=B(),w=N("td"),S&&S.c(),b=B(),h(o.src,s=e[14].pic)||F(o,"src",s),F(o,"height","50"),F(o,"width","50"),F(o,"alt","agent pic"),this.first=n},m(t,s){A(t,n,s),E(n,i),E(i,o),E(n,r),E(n,l),E(l,c),E(n,u),E(n,d),E(d,p),E(n,f),E(n,m),I&&I.m(m,null),E(n,g),E(n,_),E(_,v),q(v,e[14].comment),E(n,y),E(n,w),S&&S.m(w,null),E(n,b),x||($=[U(v,"input",P),U(v,"change",L)],x=!0)},p(t,n){e=t,2&n&&!h(o.src,s=e[14].pic)&&F(o,"src",s),2&n&&k!==(k=e[14].name+"")&&V(c,k),2&n&&T!==(T=[[e[14].Vverified,"V"],[e[14].rocks,"Rocks"],[e[14].communityname,"Community"],[e[14].intelname,"Intel"]].filter(Jl).map(Yl).join(" ")+"")&&V(p,T),e[14].shareLocation?I?I.p(e,n):(I=Wl(),I.c(),I.m(m,null)):I&&(I.d(1),I=null),2&n&&v.value!==e[14].comment&&q(v,e[14].comment),e[14].id!=e[3].id?S?S.p(e,n):(S=Vl(e),S.c(),S.m(w,null)):S&&(S.d(1),S=null)},d(t){t&&D(n),I&&I.d(),S&&S.d(),x=!1,a($)}}}function Kl(t){let e,i=t[1]&&Fl(t);return{c(){i&&i.c(),e=Z()},m(t,n){i&&i.m(t,n),A(t,e,n)},p(t,[n]){t[1]?i?i.p(t,n):(i=Fl(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:n,o:n,d(t){i&&i.d(t),t&&D(e)}}}let Gl="https://cdn2.wasabee.rocks/img/checkmark.png";const Jl=t=>t[0],Yl=t=>t[1];function Xl(t,e,i){let o,s=n,r=()=>(s(),s=d(l,(t=>i(7,o=t))),l);t.$$.on_destroy.push((()=>s()));const a=ht();let{teamStore:l}=e;r();let c=null,u=Yn.get();function h(t=!0){a("routeEvent",{refresh:t})}let p="";function f(t){var e,n;(e=t.id,n=c.id,Ci(`/api/v1/team/${n}/${e}`)).then((()=>{h()}),(t=>{console.log(t)}))}function m(t){(function(t,e,n){const i=new FormData;return i.append("squad",n),Li(`/api/v1/team/${e}/${t}/squad`,i)})(t.id,c.id,t.comment).then((()=>{}),(t=>{console.log(t)}))}return t.$$set=t=>{"teamStore"in t&&r(i(0,l=t.teamStore))},t.$$.update=()=>{128&t.$$.dirty&&i(1,c=o)},[l,c,p,u,function(){var t,e;(t=p,e=c.id,Li(`/api/v1/team/${e}/${t}`,new FormData)).then((()=>{h()}),(t=>{console.log(t)}))},f,m,o,function(){p=this.value,i(2,p)},function(t,e){t[e].comment=this.value,i(1,c),i(7,o)},t=>m(t),t=>f(t)]}class Ql extends Xt{constructor(t){super(),Yt(this,t,Xl,Kl,c,{teamStore:0})}}function tc(t,e,n){const i=t.slice();return i[8]=e[n],i}function ec(t){let e,n,i,o,s,r,a=t[1].name+"",l={options:t[3],$$slots:{default:[rc]},$$scope:{ctx:t}};return s=new ns({props:l}),t[7](s),{c(){e=N("h1"),n=j(a),i=B(),o=N("div"),Kt(s.$$.fragment),F(e,"id","teamName"),F(o,"id","map"),F(o,"class","svelte-1iwg3ka")},m(t,a){A(t,e,a),E(e,n),A(t,i,a),A(t,o,a),Gt(s,o,null),r=!0},p(t,e){(!r||2&e)&&a!==(a=t[1].name+"")&&V(n,a);const i={};2050&e&&(i.$$scope={dirty:e,ctx:t}),s.$set(i)},i(t){r||(Dt(s.$$.fragment,t),r=!0)},o(t){Rt(s.$$.fragment,t),r=!1},d(n){n&&D(e),n&&D(i),n&&D(o),t[7](null),Jt(s)}}}function nc(t){let n,i;return n=new Xs({props:{latLng:[t[8].lat,t[8].lng],icon:new e.Icon({...t[5],iconUrl:t[8].pic}),options:{title:t[8].name},$$slots:{default:[oc]},$$scope:{ctx:t}}}),{c(){Kt(n.$$.fragment)},m(t,e){Gt(n,t,e),i=!0},p(t,i){const o={};2&i&&(o.latLng=[t[8].lat,t[8].lng]),2&i&&(o.icon=new e.Icon({...t[5],iconUrl:t[8].pic})),2&i&&(o.options={title:t[8].name}),2050&i&&(o.$$scope={dirty:i,ctx:t}),n.$set(o)},i(t){i||(Dt(n.$$.fragment,t),i=!0)},o(t){Rt(n.$$.fragment,t),i=!1},d(t){Jt(n,t)}}}function ic(t){let e,n=t[8].name+"";return{c(){e=j(n)},m(t,n){A(t,e,n)},p(t,i){2&i&&n!==(n=t[8].name+"")&&V(e,n)},d(t){t&&D(e)}}}function oc(t){let e,n,i;return e=new cr({props:{$$slots:{default:[ic]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment),n=B()},m(t,o){Gt(e,t,o),A(t,n,o),i=!0},p(t,n){const i={};2050&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){i||(Dt(e.$$.fragment,t),i=!0)},o(t){Rt(e.$$.fragment,t),i=!1},d(t){Jt(e,t),t&&D(n)}}}function sc(t,e){let n,i,o,s=(e[8].lat||e[8].lng)&&nc(e);return{key:t,first:null,c(){n=Z(),s&&s.c(),i=Z(),this.first=n},m(t,e){A(t,n,e),s&&s.m(t,e),A(t,i,e),o=!0},p(t,n){(e=t)[8].lat||e[8].lng?s?(s.p(e,n),2&n&&Dt(s,1)):(s=nc(e),s.c(),Dt(s,1),s.m(i.parentNode,i)):s&&(Ot(),Rt(s,1,1,(()=>{s=null})),At())},i(t){o||(Dt(s),o=!0)},o(t){Rt(s),o=!1},d(t){t&&D(n),s&&s.d(t),t&&D(i)}}}function rc(t){let e,n,i,o,s=[],r=new Map;e=new hr({props:{url:lc,options:t[4]}});let a=t[1].agents;const l=t=>t[8].id;for(let e=0;e<a.length;e+=1){let n=tc(t,a,e),i=l(n);r.set(i,s[e]=sc(i,n))}return{c(){Kt(e.$$.fragment),n=B();for(let t=0;t<s.length;t+=1)s[t].c();i=Z()},m(t,r){Gt(e,t,r),A(t,n,r);for(let e=0;e<s.length;e+=1)s[e].m(t,r);A(t,i,r),o=!0},p(t,e){34&e&&(a=t[1].agents,Ot(),s=Wt(s,e,l,1,t,a,r,i.parentNode,Ut,sc,i,tc),At())},i(t){if(!o){Dt(e.$$.fragment,t);for(let t=0;t<a.length;t+=1)Dt(s[t]);o=!0}},o(t){Rt(e.$$.fragment,t);for(let t=0;t<s.length;t+=1)Rt(s[t]);o=!1},d(t){Jt(e,t),t&&D(n);for(let e=0;e<s.length;e+=1)s[e].d(t);t&&D(i)}}}function ac(t){let e,n,i=t[1]&&ec(t);return{c(){i&&i.c(),e=Z()},m(t,o){i&&i.m(t,o),A(t,e,o),n=!0},p(t,[n]){t[1]?i?(i.p(t,n),2&n&&Dt(i,1)):(i=ec(t),i.c(),Dt(i,1),i.m(e.parentNode,e)):i&&(Ot(),Rt(i,1,1,(()=>{i=null})),At())},i(t){n||(Dt(i),n=!0)},o(t){Rt(i),n=!1},d(t){i&&i.d(t),t&&D(e)}}}const lc="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";function cc(t,e,i){let o,s=n,r=()=>(s(),s=d(a,(t=>i(6,o=t))),a);t.$$.on_destroy.push((()=>s()));let{teamStore:a}=e;r();let l,c=null;return t.$$set=t=>{"teamStore"in t&&r(i(0,a=t.teamStore))},t.$$.update=()=>{if(64&t.$$.dirty&&i(1,c=o),6&t.$$.dirty&&c&&l){const t=c.agents.filter((t=>0!=t.lat||0!=t.lng)).map((t=>[t.lat,t.lng]));t.length>0&&l.getMap().fitBounds(t)}},[a,c,l,{center:[0,0],zoom:3},{minZoom:0,maxZoom:20,maxNativeZoom:19,attribution:" OpenStreetMap contributors"},{iconSize:[41,41],iconAnchor:[25,41],popupAnchor:[-1,-48]},o,function(t){gt[t?"unshift":"push"]((()=>{l=t,i(2,l)}))}]}class uc extends Xt{constructor(t){super(),Yt(this,t,cc,ac,c,{teamStore:0})}}function hc(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y,w,b,x,$,k,T,I,P,L,S,C,M,O,R,z,Z,H,W,K,J,Y,X,Q,tt,et,nt,it,ot,st,rt,at,lt,ct,ut,ht,dt,pt,ft,mt,gt,_t,vt,yt,wt,bt,xt,kt,Tt,It,Pt,Lt,St,Ct,Et,Mt,Ot,At,Dt,Rt,Nt,zt,jt,Bt,Zt,Ut,Ft,Ht,Wt,Vt,qt,Kt,Gt,Jt,Yt,Xt,Qt,te,ee,ne,ie,oe,se,re,ae,le,ce,ue,he,de,pe,fe,me,ge,_e,ve,ye,we,be,xe,$e,ke=t[1].name+"",Te=t[1].id+"";function Ie(t,e){return t[1].jlt?pc:dc}let Pe=Ie(t),Le=Pe(t);return{c(){e=N("h1"),n=j(ke),i=B(),o=N("div"),s=N("div"),s.textContent="Join Link",r=B(),Le.c(),l=B(),c=N("div"),u=N("div"),u.textContent="Admin Functions",h=B(),d=N("div"),p=N("div"),f=N("label"),m=j("Rename Team "),g=N("input"),_=B(),v=N("div"),y=N("hr"),w=B(),b=N("label"),x=j("Delete this team "),$=N("button"),$.textContent="Delete",k=B(),T=N("div"),I=N("div"),I.textContent="enlightened.rocks Integration",P=B(),L=N("div"),S=N("div"),C=j("Rocks Community Identifier:\n        "),M=N("input"),O=B(),R=N("span"),R.textContent='Typically looks like "randomstring.com"',z=B(),Z=N("div"),H=j("Rocks Community API Key:\n        "),W=N("input"),K=B(),J=N("span"),J.textContent="24 letter string",Y=B(),X=N("div"),X.textContent="If you want this team to have its membership populated from an .rocks\n        community, you will need to get the community ID and API key from the\n        community's settings and add them here. Do not do this unless you trust\n        the enl.rocks community.",Q=B(),tt=N("button"),tt.textContent="Pull associated enl.rocks community members onto this team",et=B(),nt=N("div"),it=N("div"),it.textContent="V integration",ot=B(),st=N("div"),rt=N("div"),at=j("V Team ID #:\n        "),lt=N("input"),ct=B(),ut=N("div"),ht=j("V Team Role:\n        "),dt=N("select"),pt=N("option"),pt.textContent="All",ft=N("option"),ft.textContent="Planner",mt=N("option"),mt.textContent="Operator",gt=N("option"),gt.textContent="Linker",_t=N("option"),_t.textContent="Keyfarming",vt=N("option"),vt.textContent="Cleaner",yt=N("option"),yt.textContent="Field Agent",wt=N("option"),wt.textContent="Item Sponsor",bt=N("option"),bt.textContent="Key Transport",xt=N("option"),xt.textContent="Recharging",kt=N("option"),kt.textContent="Software Support",Tt=N("option"),Tt.textContent="Anomaly TL",It=N("option"),It.textContent="Team Lead",Pt=N("option"),Pt.textContent="Other",Lt=N("option"),Lt.textContent="Team-0",St=N("option"),St.textContent="Team-1",Ct=N("option"),Ct.textContent="Team-2",Et=N("option"),Et.textContent="Team-3",Mt=N("option"),Mt.textContent="Team-4",Ot=N("option"),Ot.textContent="Team-5",At=N("option"),At.textContent="Team-6",Dt=N("option"),Dt.textContent="Team-7",Rt=N("option"),Rt.textContent="Team-8",Nt=N("option"),Nt.textContent="Team-9",zt=N("option"),zt.textContent="Team-10",jt=N("option"),jt.textContent="Team-11",Bt=N("option"),Bt.textContent="Team-12",Zt=N("option"),Zt.textContent="Team-13",Ut=N("option"),Ut.textContent="Team-14",Ft=N("option"),Ft.textContent="Team-15",Ht=N("option"),Ht.textContent="Team-16",Wt=N("option"),Wt.textContent="Team-17",Vt=N("option"),Vt.textContent="Team-18",qt=N("option"),qt.textContent="Team-19",Kt=B(),Gt=N("div"),Gt.textContent="You must set a valid V API token in your settings tab.",Jt=B(),Yt=N("button"),Yt.textContent="Pull associated V team/role members onto this team",Xt=B(),Qt=N("div"),te=N("div"),te.textContent="Send Announcement",ee=B(),ne=N("div"),ie=N("textarea"),oe=B(),se=N("button"),se.textContent="Send",re=B(),ae=N("div"),le=N("div"),le.textContent="Change Ownership",ce=B(),ue=N("div"),he=N("input"),de=B(),pe=N("div"),pe.textContent="agent name or googleID -- once you change ownership, you can no longer\n        manage this team",fe=B(),me=N("div"),ge=N("div"),ge.textContent="Team Info",_e=B(),ve=N("div"),ye=j("Wasabee Team ID: "),we=N("span"),be=j(Te),F(e,"id","teamName"),F(s,"class","card-header"),F(o,"class","card mb-2"),F(u,"class","card-header"),F(d,"class","card-body"),F(c,"class","card mb-2"),F(I,"class","card-header"),F(M,"type","text"),F(M,"placeholder","afdviaren.com"),F(R,"class","dim small"),F(W,"type","text"),F(W,"placeholder","VnNfDerpL1nKsppMerZvwaXX"),F(J,"class","dim small"),F(X,"class","dim small"),F(L,"class","card-body"),F(T,"class","card mb-2"),F(it,"class","card-header"),F(lt,"type","text"),F(lt,"placeholder","1234"),pt.__value="0",pt.value=pt.__value,ft.__value="1",ft.value=ft.__value,mt.__value="2",mt.value=mt.__value,gt.__value="3",gt.value=gt.__value,_t.__value="4",_t.value=_t.__value,vt.__value="5",vt.value=vt.__value,yt.__value="6",yt.value=yt.__value,wt.__value="7",wt.value=wt.__value,bt.__value="8",bt.value=bt.__value,xt.__value="9",xt.value=xt.__value,kt.__value="10",kt.value=kt.__value,Tt.__value="11",Tt.value=Tt.__value,It.__value="12",It.value=It.__value,Pt.__value="13",Pt.value=Pt.__value,Lt.__value="100",Lt.value=Lt.__value,St.__value="101",St.value=St.__value,Ct.__value="102",Ct.value=Ct.__value,Et.__value="103",Et.value=Et.__value,Mt.__value="104",Mt.value=Mt.__value,Ot.__value="105",Ot.value=Ot.__value,At.__value="106",At.value=At.__value,Dt.__value="107",Dt.value=Dt.__value,Rt.__value="108",Rt.value=Rt.__value,Nt.__value="109",Nt.value=Nt.__value,zt.__value="110",zt.value=zt.__value,jt.__value="111",jt.value=jt.__value,Bt.__value="112",Bt.value=Bt.__value,Zt.__value="113",Zt.value=Zt.__value,Ut.__value="114",Ut.value=Ut.__value,Ft.__value="115",Ft.value=Ft.__value,Ht.__value="116",Ht.value=Ht.__value,Wt.__value="117",Wt.value=Wt.__value,Vt.__value="118",Vt.value=Vt.__value,qt.__value="119",qt.value=qt.__value,F(dt,"id","vrole"),void 0===t[1].vr&&$t((()=>t[20].call(dt))),F(Gt,"class","dim small"),F(st,"class","card-body"),F(nt,"class","card mb-2"),F(te,"class","card-header"),F(ne,"class","card-body"),F(Qt,"class","card mb-2"),F(le,"class","card-header"),F(he,"type","text"),F(he,"placeholder","new owner"),F(pe,"class","dim small"),F(ue,"class","card-body"),F(ae,"class","card mb-2"),F(ge,"class","card-header"),F(we,"id","teamid"),F(ve,"class","card-body"),F(me,"class","card mb-2")},m(a,D){A(a,e,D),E(e,n),A(a,i,D),A(a,o,D),E(o,s),E(o,r),Le.m(o,null),A(a,l,D),A(a,c,D),E(c,u),E(c,h),E(c,d),E(d,p),E(p,f),E(f,m),E(f,g),q(g,t[2]),E(d,_),E(d,v),E(v,y),E(v,w),E(v,b),E(b,x),E(b,$),A(a,k,D),A(a,T,D),E(T,I),E(T,P),E(T,L),E(L,S),E(S,C),E(S,M),q(M,t[1].rc),E(S,O),E(S,R),E(L,z),E(L,Z),E(Z,H),E(Z,W),q(W,t[1].rk),E(Z,K),E(Z,J),E(L,Y),E(L,X),E(L,Q),E(L,tt),A(a,et,D),A(a,nt,D),E(nt,it),E(nt,ot),E(nt,st),E(st,rt),E(rt,at),E(rt,lt),q(lt,t[1].vt),E(st,ct),E(st,ut),E(ut,ht),E(ut,dt),E(dt,pt),E(dt,ft),E(dt,mt),E(dt,gt),E(dt,_t),E(dt,vt),E(dt,yt),E(dt,wt),E(dt,bt),E(dt,xt),E(dt,kt),E(dt,Tt),E(dt,It),E(dt,Pt),E(dt,Lt),E(dt,St),E(dt,Ct),E(dt,Et),E(dt,Mt),E(dt,Ot),E(dt,At),E(dt,Dt),E(dt,Rt),E(dt,Nt),E(dt,zt),E(dt,jt),E(dt,Bt),E(dt,Zt),E(dt,Ut),E(dt,Ft),E(dt,Ht),E(dt,Wt),E(dt,Vt),E(dt,qt),G(dt,t[1].vr),E(st,Kt),E(st,Gt),E(st,Jt),E(st,Yt),A(a,Xt,D),A(a,Qt,D),E(Qt,te),E(Qt,ee),E(Qt,ne),E(ne,ie),q(ie,t[3]),E(ne,oe),E(ne,se),A(a,re,D),A(a,ae,D),E(ae,le),E(ae,ce),E(ae,ue),E(ue,he),q(he,t[4]),E(ue,de),E(ue,pe),A(a,fe,D),A(a,me,D),E(me,ge),E(me,_e),E(me,ve),E(ve,ye),E(ve,we),E(we,be),xe||($e=[U(g,"change",t[5]),U(g,"input",t[16]),U($,"click",t[6]),U(M,"input",t[17]),U(M,"change",t[9]),U(W,"input",t[18]),U(W,"change",t[9]),U(tt,"click",t[10]),U(lt,"input",t[19]),U(lt,"change",t[11]),U(dt,"change",t[20]),U(dt,"change",t[11]),U(Yt,"click",t[12]),U(ie,"input",t[21]),U(se,"click",t[13]),U(he,"input",t[22]),U(he,"change",t[14])],xe=!0)},p(t,e){2&e&&ke!==(ke=t[1].name+"")&&V(n,ke),Pe===(Pe=Ie(t))&&Le?Le.p(t,e):(Le.d(1),Le=Pe(t),Le&&(Le.c(),Le.m(o,null))),4&e&&g.value!==t[2]&&q(g,t[2]),2&e&&M.value!==t[1].rc&&q(M,t[1].rc),2&e&&W.value!==t[1].rk&&q(W,t[1].rk),2&e&&lt.value!==t[1].vt&&q(lt,t[1].vt),2&e&&G(dt,t[1].vr),8&e&&q(ie,t[3]),16&e&&he.value!==t[4]&&q(he,t[4]),2&e&&Te!==(Te=t[1].id+"")&&V(be,Te)},d(t){t&&D(e),t&&D(i),t&&D(o),Le.d(),t&&D(l),t&&D(c),t&&D(k),t&&D(T),t&&D(et),t&&D(nt),t&&D(Xt),t&&D(Qt),t&&D(re),t&&D(ae),t&&D(fe),t&&D(me),xe=!1,a($e)}}}function dc(t){let e,i,o,s;return{c(){e=N("div"),i=N("button"),i.textContent="Generate Join Link",F(i,"class","btn btn-info"),F(e,"class","card-body")},m(n,r){A(n,e,r),E(e,i),o||(s=U(i,"click",t[7]),o=!0)},p:n,d(t){t&&D(e),o=!1,s()}}}function pc(t){let e,n,i,o,s,r,a,l;return{c(){e=N("div"),n=N("a"),i=j("Copy this link"),s=j("\n        to share with agents\n        "),r=N("button"),r.textContent="remove",F(n,"href",o="?server="+Kn()+"#/team/"+t[1].id+"/join/"+t[1].jlt),F(r,"class","btn btn-sm btn-danger"),F(e,"class","card-body")},m(o,c){A(o,e,c),E(e,n),E(n,i),E(e,s),E(e,r),a||(l=U(r,"click",t[8]),a=!0)},p(t,e){2&e&&o!==(o="?server="+Kn()+"#/team/"+t[1].id+"/join/"+t[1].jlt)&&F(n,"href",o)},d(t){t&&D(e),a=!1,l()}}}function fc(t){let e,i=t[1]&&hc(t);return{c(){i&&i.c(),e=Z()},m(t,n){i&&i.m(t,n),A(t,e,n)},p(t,[n]){t[1]?i?i.p(t,n):(i=hc(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:n,o:n,d(t){i&&i.d(t),t&&D(e)}}}function mc(t,e,i){let o,s=n,r=()=>(s(),s=d(c,(t=>i(15,o=t))),c);t.$$.on_destroy.push((()=>s()));var a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};const l=ht();let{teamStore:c}=e;r();let u=null;function h(t=!0){l("routeEvent",{refresh:t})}h(!1);let p="",f="",m="";return t.$$set=t=>{"teamStore"in t&&r(i(0,c=t.teamStore))},t.$$.update=()=>{32768&t.$$.dirty&&i(1,u=o)},[c,u,p,f,m,function(){(function(t,e){const n=new FormData;return n.append("teamname",e),Si(`/api/v1/team/${t}/rename`,n)})(u.id,p).then((()=>{i(1,u.name=p,u)}),(t=>{console.log(t)}))},function(){yi(u.id).then((()=>{he("/")}),(t=>{console.log(t)}))},function(){var t;(t=u.id,Pi(`/api/v1/team/${t}/genJoinKey`)).then((t=>{i(1,u.jlt=t.Key,u)}),(t=>{console.log(t)}))},function(){var t;(t=u.id,Pi(`/api/v1/team/${t}/delJoinKey`)).then((()=>{i(1,u.jlt="",u)}),(t=>{console.log(t)}))},function(){var t,e,n;(t=u.id,e=u.rc,n=u.rk,Pi(`/api/v1/team/${t}/rockscfg?rockscomm=${e}&rockskey=${n}`)).then((()=>{}),(t=>{console.log(t)}))},function(){var t;(t=u.id,Pi(`/api/v1/team/${t}/rocks`)).then((()=>{h()}),(t=>{console.log(t)}))},function(){return a(this,void 0,void 0,(function*(){try{yield function(t,e,n){e=Number(e),((n=Number(n))<0||n>200)&&(n=0),console.log(t,e,n);const i=new FormData;return i.append("vteam",`${e}`),i.append("role",`${n}`),Li(`/api/v1/team/${t}/v`,i)}(u.id,u.vt,u.vr)}catch(t){console.log(t)}}))},function(){var t;(t=u.id,Pi(`/api/v1/team/${t}/v`)).then((()=>{h()}),(t=>{console.log(t)}))},function(){!function(t,e){const n=new FormData;n.append("m",e),Li(`/api/v1/team/${t}/announce`,n)}(u.id,f),i(3,f="")},function(){(function(t,e){return Pi(`/api/v1/team/${t}/chown?to=${e}`)})(u.id,m).then((()=>{h()}),(t=>{i(4,m=""),console.log(t)}))},o,function(){p=this.value,i(2,p)},function(){u.rc=this.value,i(1,u),i(15,o)},function(){u.rk=this.value,i(1,u),i(15,o)},function(){u.vt=this.value,i(1,u),i(15,o)},function(){u.vr=J(this),i(1,u),i(15,o)},function(){f=this.value,i(3,f)},function(){m=this.value,i(4,m)}]}class gc extends Xt{constructor(t){super(),Yt(this,t,mc,fc,c,{teamStore:0})}}function _c(t){let e,i,o,s,r,l,c,u,h,d,p,f,m;return{c(){e=N("li"),i=N("a"),o=j("Manage"),l=B(),c=N("li"),u=N("a"),h=j("Settings"),F(i,"class","nav-link"),F(i,"href",s="#/team/"+t[1]+"/manage"),F(e,"class","nav-item"),F(u,"class","nav-link"),F(u,"href",d="#/team/"+t[1]+"/settings"),F(c,"class","nav-item")},m(t,n){A(t,e,n),E(e,i),E(i,o),A(t,l,n),A(t,c,n),E(c,u),E(u,h),f||(m=[$(r=Vo.call(null,i)),$(p=Vo.call(null,u))],f=!0)},p:n,d(t){t&&D(e),t&&D(l),t&&D(c),f=!1,a(m)}}}function vc(t){let e,n,i,o,s,r,l,c,u,h,d,p,f,m,g,_,v,y=t[0]&&_c(t);return m=new pe({props:{prefix:t[2],routes:t[3]}}),m.$on("routeEvent",t[4]),{c(){e=N("ul"),n=N("li"),i=N("a"),o=j("List"),s=B(),r=N("li"),l=N("a"),c=j("Map"),u=B(),y&&y.c(),h=B(),d=N("button"),d.textContent="",p=B(),f=N("div"),Kt(m.$$.fragment),F(i,"class","nav-link"),F(i,"href","#/team/"+t[1]+"/list"),F(n,"class","nav-item"),F(l,"class","nav-link"),F(l,"href","#/team/"+t[1]+"/map"),F(r,"class","nav-item"),F(d,"class","btn btn-primary"),F(e,"class","nav nav-tabs"),F(f,"class","container")},m(a,w){A(a,e,w),E(e,n),E(n,i),E(i,o),E(e,s),E(e,r),E(r,l),E(l,c),E(e,u),y&&y.m(e,null),E(e,h),E(e,d),A(a,p,w),A(a,f,w),Gt(m,f,null),g=!0,_||(v=[$(Vo.call(null,i)),$(Vo.call(null,l)),U(d,"click",t[8])],_=!0)},p(t,[n]){t[0]?y?y.p(t,n):(y=_c(t),y.c(),y.m(e,h)):y&&(y.d(1),y=null)},i(t){g||(Dt(m.$$.fragment,t),g=!0)},o(t){Rt(m.$$.fragment,t),g=!1},d(t){t&&D(e),y&&y.d(),t&&D(p),t&&D(f),Jt(m),_=!1,a(v)}}}function yc(t,e,n){let i,{params:o={}}=e,s=o.teamid,r="/team/"+s,a=Yn.get(),l=ne(null),c=null;Gi(s).then((t=>n(7,c=t)));const u={"/list":Qt({component:Zl,props:{teamStore:l}}),"/map":Qt({component:uc,props:{teamStore:l}}),"/settings":Qt({component:gc,props:{teamStore:l}}),"/manage":Qt({component:Ql,props:{teamStore:l}}),"/join/:token":Qt({component:Cl,props:{teamid:s}})};function h(t=!0){Gi(s,t?0:10).then((t=>{n(7,c=t)}))}return t.$$set=t=>{"params"in t&&n(6,o=t.params)},t.$$.update=()=>{128&t.$$.dirty&&l.set(c),128&t.$$.dirty&&n(0,i=!!c&&a.Teams.some((t=>t.ID==s&&t.Owner==a.id)))},[i,s,r,u,function(t){t.detail&&"refresh"in t.detail&&h(t.detail.refresh)},h,o,c,()=>h()]}class wc extends Xt{constructor(t){super(),Yt(this,t,yc,vc,c,{params:6})}}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const bc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const o=t[e],s=e+1<t.length,r=s?t[e+1]:0,a=e+2<t.length,l=a?t[e+2]:0,c=o>>2,u=(3&o)<<4|r>>4;let h=(15&r)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296==(64512&o)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e}(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=t[n++];e[i++]=String.fromCharCode((31&o)<<6|63&s)}else if(o>239&&o<365){const s=((7&o)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],r=t[n++];e[i++]=String.fromCharCode((15&o)<<12|(63&s)<<6|63&r)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const o=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const r=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==o||null==s||null==r||null==a)throw Error();const l=o<<2|s>>4;if(i.push(l),64!==r){const t=s<<4&240|r>>2;if(i.push(t),64!==a){const t=r<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class xc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function $c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class kc extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,kc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?function(t,e){return t.replace(Ic,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(o,n):"Error",r=`${this.serviceName}: ${s} (${i}).`;return new kc(i,r,n)}}const Ic=/\{\$([^}]+)}/g;function Pc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const n=t[o],s=e[o];if(Lc(n)&&Lc(s)){if(!Pc(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function Lc(t){return null!==t&&"object"==typeof t}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Sc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}class Cc{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=Ec),void 0===i.error&&(i.error=Ec),void 0===i.complete&&(i.complete=Ec);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),o}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ec(){}
/**
	 * @license
	 * Copyright 2021 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Mc(t){return t&&t._delegate?t._delegate:t}class Oc{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const Ac="[DEFAULT]";
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Dc{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new xc;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t))try{this.getOrInitializeService({instanceIdentifier:Ac})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(t)&&e.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),o=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Ac?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:Ac:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rc{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Dc(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var Nc;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Nc||(Nc={}));const zc={debug:Nc.DEBUG,verbose:Nc.VERBOSE,info:Nc.INFO,warn:Nc.WARN,error:Nc.ERROR,silent:Nc.SILENT},jc=Nc.INFO,Bc={[Nc.DEBUG]:"log",[Nc.VERBOSE]:"log",[Nc.INFO]:"info",[Nc.WARN]:"warn",[Nc.ERROR]:"error"},Zc=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),o=Bc[e];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[o](`[${i}]  ${t.name}:`,...n)};class Uc{constructor(t){this.name=t,this._logLevel=jc,this._logHandler=Zc,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nc))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?zc[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nc.DEBUG,...t),this._logHandler(this,Nc.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nc.VERBOSE,...t),this._logHandler(this,Nc.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nc.INFO,...t),this._logHandler(this,Nc.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nc.WARN,...t),this._logHandler(this,Nc.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nc.ERROR,...t),this._logHandler(this,Nc.ERROR,...t)}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Fc{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Hc="@firebase/app",Wc="0.7.11",Vc=new Uc("@firebase/app"),qc="[DEFAULT]",Kc={[Hc]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gc=new Map,Jc=new Map;function Yc(t,e){try{t.container.addComponent(e)}catch(n){Vc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xc(t){const e=t.name;if(Jc.has(e))return Vc.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,t);for(const e of Gc.values())Yc(e,t);return!0}function Qc(t,e){return t.container.getProvider(e)}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const tu=new Tc("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class eu{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Oc("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tu.create("app-deleted",{appName:this._name})}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const nu="9.6.1";function iu(t="[DEFAULT]"){const e=Gc.get(t);if(!e)throw tu.create("no-app",{appName:t});return e}function ou(t,e,n){var i;let o=null!==(i=Kc[t])&&void 0!==i?i:t;n&&(o+=`-${n}`);const s=o.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const t=[`Unable to register library "${o}" with version "${e}":`];return s&&t.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&r&&t.push("and"),r&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Vc.warn(t.join(" "))}Xc(new Oc(`${o}-version`,(()=>({library:o,version:e})),"VERSION"))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */var su;su="",Xc(new Oc("platform-logger",(t=>new Fc(t)),"PRIVATE")),ou(Hc,Wc,su),ou(Hc,Wc,"esm2017"),ou("fire-js","");
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
ou("firebase","9.6.1","app");var ru=t((function(t,e){!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function i(t,e,i){var o,s=new Promise((function(s,r){n(o=t[e].apply(t,i)).then(s,r)}));return s.request=o,s}function o(t,e,n){var o=i(t,e,n);return o.then((function(t){if(t)return new u(t,o.request)}))}function s(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function r(t,e,n,o){o.forEach((function(o){o in n.prototype&&(t.prototype[o]=function(){return i(this[e],o,arguments)})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})}))}function l(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return o(this[e],i,arguments)})}))}function c(t){this._index=t}function u(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function f(t){this._db=t}function m(t,e,n){var o=i(indexedDB,"open",[t,e]),s=o.request;return s&&(s.onupgradeneeded=function(t){n&&n(new p(s.result,t.oldVersion,s.transaction))}),o.then((function(t){return new f(t)}))}function g(t){return i(indexedDB,"deleteDatabase",[t])}s(c,"_index",["name","keyPath","multiEntry","unique"]),r(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),r(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(u.prototype[t]=function(){var e=this,i=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,i),n(e._request).then((function(t){if(t)return new u(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),r(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),i=n[n.length-1],o=this._store||this._index,s=o[t].apply(o,n.slice(0,-1));s.onsuccess=function(){i(s.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,i=[];return new Promise((function(o){n.iterateCursor(t,(function(t){t?(i.push(t.value),void 0===e||i.length!=e?t.continue():o(i)):o(i)}))}))})})),t.openDb=m,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));const au="@firebase/installations",lu="0.5.4",cu=1e4,uu="w:0.5.4",hu="FIS_v2",du=36e5,pu=new Tc("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fu(t){return t instanceof kc&&t.code.includes("request-failed")}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function mu({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function gu(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function _u(t,e){const n=(await e.json()).error;return pu.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function vu({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yu(t,{refreshToken:e}){const n=vu(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(e)),n}async function wu(t){const e=await t();return e.status>=500&&e.status<600?t():e}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function bu(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const xu=/^[cdef][\w-]{21}$/;function $u(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t);return xu.test(e)?e:""}catch(t){return""}}function ku(t){return`${t.appName}!${t.appId}`}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const Tu=new Map;function Iu(t,e){const n=ku(t);Pu(n,e),function(t,e){const n=function(){!Lu&&"BroadcastChannel"in self&&(Lu=new BroadcastChannel("[Firebase] FID Change"),Lu.onmessage=t=>{Pu(t.data.key,t.data.fid)});return Lu}();n&&n.postMessage({key:t,fid:e});0===Tu.size&&Lu&&(Lu.close(),Lu=null)}(n,e)}function Pu(t,e){const n=Tu.get(t);if(n)for(const t of n)t(e)}let Lu=null;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const Su="firebase-installations-store";let Cu=null;function Eu(){return Cu||(Cu=ru.openDb("firebase-installations-database",1,(t=>{if(0===t.oldVersion)t.createObjectStore(Su)}))),Cu}async function Mu(t,e){const n=ku(t),i=(await Eu()).transaction(Su,"readwrite"),o=i.objectStore(Su),s=await o.get(n);return await o.put(e,n),await i.complete,s&&s.fid===e.fid||Iu(t,e.fid),e}async function Ou(t){const e=ku(t),n=(await Eu()).transaction(Su,"readwrite");await n.objectStore(Su).delete(e),await n.complete}async function Au(t,e){const n=ku(t),i=(await Eu()).transaction(Su,"readwrite"),o=i.objectStore(Su),s=await o.get(n),r=e(s);return void 0===r?await o.delete(n):await o.put(r,n),await i.complete,!r||s&&s.fid===r.fid||Iu(t,r.fid),r}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */async function Du(t){let e;const n=await Au(t,(n=>{const i=function(t){return zu(t||{fid:$u(),registrationStatus:0})}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(pu.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function(t,{fid:e}){const n=mu(t),i=vu(t),o={fid:e,authVersion:hu,appId:t.appId,sdkVersion:uu},s={method:"POST",headers:i,body:JSON.stringify(o)},r=await wu((()=>fetch(n,s)));if(r.ok){const t=await r.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:gu(t.authToken)}}throw await _u("Create Installation",r)}(t,e);return Mu(t,n)}catch(n){throw fu(n)&&409===n.customData.serverCode?await Ou(t):await Mu(t,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ru(t)}:{installationEntry:e}}(t,i);return e=o.registrationPromise,o.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Ru(t){let e=await Nu(t);for(;1===e.registrationStatus;)await bu(100),e=await Nu(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Du(t);return n||e}return e}function Nu(t){return Au(t,(t=>{if(!t)throw pu.create("installation-not-found");return zu(t)}))}function zu(t){return 1===(e=t).registrationStatus&&e.registrationTime+cu<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */}async function ju({appConfig:t,platformLoggerProvider:e},n){const i=function(t,{fid:e}){return`${mu(t)}/${e}/authTokens:generate`}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t,n),o=yu(t,n),s=e.getImmediate({optional:!0});s&&o.append("x-firebase-client",s.getPlatformInfoString());const r={installation:{sdkVersion:uu}},a={method:"POST",headers:o,body:JSON.stringify(r)},l=await wu((()=>fetch(i,a)));if(l.ok){return gu(await l.json())}throw await _u("Generate Auth Token",l)}async function Bu(t,e=!1){let n;const i=await Au(t.appConfig,(i=>{if(!Uu(i))throw pu.create("not-registered");const o=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+du}(t)}(o))return i;if(1===o.requestStatus)return n=async function(t,e){let n=await Zu(t.appConfig);for(;1===n.authToken.requestStatus;)await bu(100),n=await Zu(t.appConfig);const i=n.authToken;return 0===i.requestStatus?Bu(t,e):i}(t,e),i;{if(!navigator.onLine)throw pu.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await ju(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Mu(t.appConfig,i),n}catch(n){if(!fu(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mu(t.appConfig,n)}else await Ou(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function Zu(t){return Au(t,(t=>{if(!Uu(t))throw pu.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+cu<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */}))}function Uu(t){return void 0!==t&&2===t.registrationStatus}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function Fu(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await Du(t);e&&await e}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(n.appConfig);return(await Bu(n,e)).token}function Hu(t){return pu.create("missing-app-config-values",{valueName:t})}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const Wu="installations",Vu=t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Hu("App Configuration");if(!t.name)throw Hu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Hu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,platformLoggerProvider:Qc(e,"platform-logger"),_delete:()=>Promise.resolve()}},qu=t=>{const e=Qc(t.getProvider("app").getImmediate(),Wu).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await Du(e.appConfig);return i?i.catch(console.error):Bu(e).catch(console.error),n.fid}(e),getToken:t=>Fu(e,t)}};Xc(new Oc(Wu,Vu,"PUBLIC")),Xc(new Oc("installations-internal",qu,"PRIVATE")),ou(au,lu),ou(au,lu,"esm2017");
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const Ku="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gu="google.c.a.c_id";var Ju,Yu;
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function Xu(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qu(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Ju||(Ju={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Yu||(Yu={}));const th="fcm_token_details_db",eh="fcm_token_object_Store";
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const nh="firebase-messaging-store";let ih=null;function oh(){return ih||(ih=ru.openDb("firebase-messaging-database",1,(t=>{if(0===t.oldVersion)t.createObjectStore(nh)}))),ih}async function sh(t){const e=ah(t),n=await oh(),i=await n.transaction(nh).objectStore(nh).get(e);if(i)return i;{const e=await async function(t){if("databases"in indexedDB){const t=(await indexedDB.databases()).map((t=>t.name));if(!t.includes(th))return null}let e=null;return(await ru.openDb(th,5,(async n=>{var i;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(eh))return;const o=n.transaction.objectStore(eh),s=await o.index("fcmSenderId").get(t);if(await o.clear(),s)if(2===n.oldVersion){const t=s;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(i=t.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:Xu(t.vapidKey)}}}else if(3===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Xu(t.auth),p256dh:Xu(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Xu(t.vapidKey)}}}else if(4===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Xu(t.auth),p256dh:Xu(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Xu(t.vapidKey)}}}}))).close(),await ru.deleteDb(th),await ru.deleteDb("fcm_vapid_details_db"),await ru.deleteDb("undefined"),function(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null}(t.appConfig.senderId);if(e)return await rh(t,e),e}}async function rh(t,e){const n=ah(t),i=(await oh()).transaction(nh,"readwrite");return await i.objectStore(nh).put(e,n),await i.complete,e}function ah({appConfig:t}){return t.appId}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const lh=new Tc("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function ch(t,e){const n={method:"DELETE",headers:await hh(t)};try{const i=await fetch(`${uh(t.appConfig)}/${e}`,n),o=await i.json();if(o.error){const t=o.error.message;throw lh.create("token-unsubscribe-failed",{errorInfo:t})}}catch(t){throw lh.create("token-unsubscribe-failed",{errorInfo:t})}}function uh({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}async function hh({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function dh({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const o={web:{endpoint:n,auth:e,p256dh:t}};return i!==Ku&&(o.web.applicationPubKey=i),o}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */async function ph(t){const e=await async function(t,e){const n=await t.pushManager.getSubscription();if(n)return n;return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qu(e)})}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Xu(e.getKey("auth")),p256dh:Xu(e.getKey("p256dh"))},i=await sh(t.firebaseDependencies);if(i){if(function(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,o=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&o&&s}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(i.subscriptionOptions,n))return Date.now()>=i.createTime+6048e5?async function(t,e){try{const n=await async function(t,e){const n=await hh(t),i=dh(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{const n=await fetch(`${uh(t.appConfig)}/${e.token}`,o);s=await n.json()}catch(t){throw lh.create("token-update-failed",{errorInfo:t})}if(s.error){const t=s.error.message;throw lh.create("token-update-failed",{errorInfo:t})}if(!s.token)throw lh.create("token-update-no-token");return s.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await rh(t.firebaseDependencies,i),n}catch(e){throw await async function(t){const e=await sh(t.firebaseDependencies);e&&(await ch(t.firebaseDependencies,e.token),await async function(t){const e=ah(t),n=(await oh()).transaction(nh,"readwrite");await n.objectStore(nh).delete(e),await n.complete}(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();if(n)return n.unsubscribe();return!0}(t),e}}(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await ch(t.firebaseDependencies,i.token)}catch(t){console.warn(t)}return fh(t.firebaseDependencies,n)}return fh(t.firebaseDependencies,n)}async function fh(t,e){const n=await
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function(t,e){const n=await hh(t),i=dh(e),o={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{const e=await fetch(uh(t.appConfig),o);s=await e.json()}catch(t){throw lh.create("token-subscribe-failed",{errorInfo:t})}if(s.error){const t=s.error.message;throw lh.create("token-subscribe-failed",{errorInfo:t})}if(!s.token)throw lh.create("token-subscribe-no-token");return s.token}(t,e),i={token:n,createTime:Date.now(),subscriptionOptions:e};return await rh(t,i),i.token}function mh(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const o=e.notification.image;o&&(t.notification.image=o)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const i=e.fcmOptions.analytics_label;i&&(t.fcmOptions.analyticsLabel=i)}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(e,t),e}function gh(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function _h(t){return lh.create("missing-app-config-values",{valueName:t})}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
gh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vh{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(t){if(!t||!t.options)throw _h("App Configuration Object");if(!t.name)throw _h("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const t of e)if(!n[t])throw _h(t);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function yh(t,e){if(e||t.swRegistration||await async function(t){try{t.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),t.swRegistration.update().catch((()=>{}))}catch(t){throw lh.create("failed-service-worker-registration",{browserErrorMessage:t.message})}}(t),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw lh.create("invalid-sw-registration");t.swRegistration=e}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function wh(t,e){if(!navigator)throw lh.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw lh.create("permission-blocked");return await async function(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Ku)}(t,null==e?void 0:e.vapidKey),await yh(t,null==e?void 0:e.serviceWorkerRegistration),ph(t)}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */async function bh(t,e,n){const i=function(t){switch(t){case Yu.NOTIFICATION_CLICKED:return"notification_open";case Yu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function xh(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Yu.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(mh(n)):t.onMessageHandler.next(mh(n)));const i=n.data;var o;"object"==typeof(o=i)&&o&&Gu in o&&"1"===i["google.c.a.e"]&&await bh(t,n.messageType,i)}const $h="@firebase/messaging",kh="0.9.4",Th=t=>{const e=new vh(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(t=>xh(e,t))),e},Ih=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>wh(e,t)}};
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function Ph(){return"undefined"!=typeof window&&"object"==typeof indexedDB&&await new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var t;e((null===(t=o.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
function Lh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}function Sh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}Xc(new Oc("messaging",Th,"PUBLIC")),Xc(new Oc("messaging-internal",Ih,"PRIVATE")),ou($h,kh),ou($h,kh,"esm2017");const Ch=Sh,Eh=new Tc("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mh=new Uc("@firebase/auth");function Oh(t,...e){Mh.logLevel<=Nc.ERROR&&Mh.error(`Auth (9.6.1): ${t}`,...e)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Ah(t,...e){throw Rh(t,...e)}function Dh(t,...e){return Rh(t,...e)}function Rh(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Eh.create(t,...e)}function Nh(t,e,...n){if(!t)throw Rh(e,...n)}function zh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Oh(e),new Error(e)}function jh(t,e){t||zh(e)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const Bh=new Map;function Zh(t){jh(t instanceof Function,"Expected a class definition");let e=Bh.get(t);return e?(jh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bh.set(t,e),e)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function Uh(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Fh(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Hh(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Fh()&&"https:"!==Fh()&&!function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&!("connection"in navigator)||navigator.onLine}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class Wh{constructor(t,e){this.shortDelay=t,this.longDelay=e,jh(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($c())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Hh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Vh(t,e){jh(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class qh{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void zh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void zh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void zh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const Kh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gh=new Wh(3e4,6e4);
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */async function Jh(t,e,n,i,o={}){return Yh(t,o,(async()=>{let o={},s={};i&&("GET"===e?s=i:o={body:JSON.stringify(i)});const r=Sc(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),qh.fetch()(Xh(t,t.config.apiHost,n,r),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},o))}))}async function Yh(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Kh),e);try{const e=new Qh(t),o=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw td(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const e=o.ok?s.errorMessage:s.error.message,[n,r]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw td(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw td(t,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(r)throw function(t,e,n){const i=Object.assign(Object.assign({},Ch()),{[e]:n});return new Tc("auth","Firebase",i).create(e,{appName:t.name})}(t,a,r);Ah(t,a)}}catch(e){if(e instanceof kc)throw e;Ah(t,"network-request-failed")}}function Xh(t,e,n,i){const o=`${e}${n}?${i}`;return t.config.emulator?Vh(t.config,o):`${t.config.apiScheme}://${o}`}class Qh{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Dh(this.auth,"timeout"))),Gh.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function td(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Dh(t,e,i);return o.customData._tokenResponse=n,o}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function ed(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function nd(t){return 1e3*Number(t)}function id(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const t=function(t){try{return bc.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(n);return t?JSON.parse(t):(Oh("Failed to decode base64 JWT payload"),null)}catch(t){return Oh("Caught error parsing JWT payload as JSON",t),null}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function od(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof kc&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class sd{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class rd{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=ed(this.lastLoginAt),this.creationTime=ed(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */async function ad(t){var e;const n=t.auth,i=await t.getIdToken(),o=await od(t,async function(t,e){return Jh(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Nh(null==o?void 0:o.users.length,n,"internal-error");const s=o.users[0];t._notifyReloadListener(s);const r=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=Lh(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=t.providerData,c=r,[...l.filter((t=>!c.some((e=>e.providerId===t.providerId)))),...c]);var l,c;const u=t.isAnonymous,h=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rd(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class ld{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nh(t.idToken,"internal-error"),Nh(void 0!==t.idToken,"internal-error"),Nh(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=id(t);return Nh(e,"internal-error"),Nh(void 0!==e.exp,"internal-error"),Nh(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Nh(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:o}=await
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function(t,e){const n=await Yh(t,{},(async()=>{const n=Sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=Xh(t,i,"/v1/token",`key=${o}`),r=await t._getAdditionalHeaders();return r["Content-Type"]="application/x-www-form-urlencoded",qh.fetch()(s,{method:"POST",headers:r,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:o}=e,s=new ld;return n&&(Nh("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Nh("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),o&&(Nh("number"==typeof o,"internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ld,this.toJSON())}_performRefresh(){return zh("not implemented")}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function cd(t,e){Nh("string"==typeof t||void 0===t,"internal-error",{appName:e})}class ud{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,o=Lh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new sd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.metadata=new rd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await od(this,this.stsTokenManager.getToken(this.auth,t));return Nh(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=Mc(t),i=await n.getIdToken(e),o=id(i);Nh(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const s="object"==typeof o.firebase?o.firebase:void 0,r=null==s?void 0:s.sign_in_provider;return{claims:o,token:i,authTime:ed(nd(o.auth_time)),issuedAtTime:ed(nd(o.iat)),expirationTime:ed(nd(o.exp)),signInProvider:r||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=Mc(t);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Nh(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new ud(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){Nh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await ad(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await od(this,async function(t,e){return Jh(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,o,s,r,a,l,c;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(o=e.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(r=e.tenantId)&&void 0!==r?r:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=e.createdAt)&&void 0!==l?l:void 0,_=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:y,isAnonymous:w,providerData:b,stsTokenManager:x}=e;Nh(v&&x,t,"internal-error");const $=ld.fromJSON(this.name,x);Nh("string"==typeof v,t,"internal-error"),cd(u,t.name),cd(h,t.name),Nh("boolean"==typeof y,t,"internal-error"),Nh("boolean"==typeof w,t,"internal-error"),cd(d,t.name),cd(p,t.name),cd(f,t.name),cd(m,t.name),cd(g,t.name),cd(_,t.name);const k=new ud({uid:v,auth:t,email:h,emailVerified:y,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:$,createdAt:g,lastLoginAt:_});return b&&Array.isArray(b)&&(k.providerData=b.map((t=>Object.assign({},t)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(t,e,n=!1){const i=new ld;i.updateFromServerResponse(e);const o=new ud({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await ad(o),o}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class hd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}hd.type="NONE";const dd=hd;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function pd(t,e,n){return`firebase:${t}:${e}:${n}`}class fd{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=pd(this.userKey,i.apiKey,o),this.fullPersistenceKey=pd("persistence",i.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ud._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new fd(Zh(dd),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let o=i[0]||Zh(dd);const s=pd(n,t.config.apiKey,t.name);let r=null;for(const n of e)try{const e=await n._get(s);if(e){const i=ud._fromJSON(t,e);n!==o&&(r=i),o=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return o._shouldAllowMigration&&a.length?(o=a[0],r&&await o._set(s,r.toJSON()),await Promise.all(e.map((async t=>{if(t!==o)try{await t._remove(s)}catch(t){}}))),new fd(o,t,n)):new fd(o,t,n)}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function md(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bd(e))return"Blackberry";if(xd(e))return"Webos";if(_d(e))return"Safari";if((e.includes("chrome/")||vd(e))&&!e.includes("edge/"))return"Chrome";if(wd(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function gd(t=$c()){return/firefox\//i.test(t)}function _d(t=$c()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vd(t=$c()){return/crios\//i.test(t)}function yd(t=$c()){return/iemobile/i.test(t)}function wd(t=$c()){return/android/i.test(t)}function bd(t=$c()){return/blackberry/i.test(t)}function xd(t=$c()){return/webos/i.test(t)}function $d(t=$c()){return/iphone|ipad|ipod/i.test(t)}function kd(){return function(){const t=$c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function Td(t=$c()){return $d(t)||wd(t)||xd(t)||bd(t)||/windows phone/i.test(t)||yd(t)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function Id(t,e=[]){let n;switch(t){case"Browser":n=md($c());break;case"Worker":n=`${md($c())}-${t}`;break;default:n=t}return`${n}/JsCore/9.6.1/${e.length?e.join(","):"FirebaseCore-web"}`}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Pd{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sd(this),this.idTokenSubscription=new Sd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eh,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Zh(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await fd.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,o=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);i&&i!==o||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(Nh(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await ad(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?Mc(t):null;return e&&Nh(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&Nh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Zh(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Tc("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Zh(t)||this._popupRedirectResolver;Nh(e,this,"argument-error"),this.redirectPersistenceManager=await fd.create(this,[Zh(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const o="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Nh(s,this,"internal-error"),s.then((()=>o(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nh(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Id(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t}}function Ld(t){return Mc(t)}class Sd{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new Cc(t,e);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Nh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Cd{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return zh("not implemented")}_getIdTokenResponse(t){return zh("not implemented")}_linkToIdToken(t,e){return zh("not implemented")}_getReauthenticationResolver(t){return zh("not implemented")}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */async function Ed(t,e){return async function(t,e,n,i,o={}){const s=await Jh(t,e,n,i,o);return"mfaPendingCredential"in s&&Ah(t,"multi-factor-auth-required",{_serverResponse:s}),s}(t,"POST","/v1/accounts:signInWithIdp",function(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}(t,e))}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Md extends Cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Md(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ah("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,o=Lh(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Md(n,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){return Ed(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Ed(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ed(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Sc(e)}return t}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Od{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Ad extends Od{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Dd extends Ad{constructor(){super("facebook.com")}static credential(t){return Md._fromParams({providerId:Dd.PROVIDER_ID,signInMethod:Dd.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dd.credentialFromTaggedObject(t)}static credentialFromError(t){return Dd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Dd.credential(t.oauthAccessToken)}catch(t){return null}}}Dd.FACEBOOK_SIGN_IN_METHOD="facebook.com",Dd.PROVIDER_ID="facebook.com";
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class Rd extends Ad{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Md._fromParams({providerId:Rd.PROVIDER_ID,signInMethod:Rd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Rd.credentialFromTaggedObject(t)}static credentialFromError(t){return Rd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Rd.credential(e,n)}catch(t){return null}}}Rd.GOOGLE_SIGN_IN_METHOD="google.com",Rd.PROVIDER_ID="google.com";
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class Nd extends Ad{constructor(){super("github.com")}static credential(t){return Md._fromParams({providerId:Nd.PROVIDER_ID,signInMethod:Nd.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nd.credentialFromTaggedObject(t)}static credentialFromError(t){return Nd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Nd.credential(t.oauthAccessToken)}catch(t){return null}}}Nd.GITHUB_SIGN_IN_METHOD="github.com",Nd.PROVIDER_ID="github.com";
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class zd extends Ad{constructor(){super("twitter.com")}static credential(t,e){return Md._fromParams({providerId:zd.PROVIDER_ID,signInMethod:zd.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return zd.credentialFromTaggedObject(t)}static credentialFromError(t){return zd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return zd.credential(e,n)}catch(t){return null}}}zd.TWITTER_SIGN_IN_METHOD="twitter.com",zd.PROVIDER_ID="twitter.com";
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class jd{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const o=await ud._fromIdTokenResponse(t,n,i),s=Bd(n);return new jd({user:o,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Bd(n);return new jd({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Bd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Zd extends kc{constructor(t,e,n,i){var o;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:t.name,tenantId:null!==(o=t.tenantId)&&void 0!==o?o:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Zd(t,e,n,i)}}function Ud(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Zd._fromErrorAndOperation(t,n,e,i);throw n}))}const Fd="__sak";
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Hd{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class Wd extends Hd{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=$c();return _d(t)||$d(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Td(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},o=this.storage.getItem(n);kd()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Wd.type="LOCAL";const Vd=Wd;
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class qd extends Hd{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}qd.type="SESSION";const Kd=qd;
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class Gd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Gd(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:o}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const r=Array.from(s).map((async t=>t(e.origin,o))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(r);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function Jd(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */Gd.receivers=[];class Yd{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise(((r,a)=>{const l=Jd("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),o=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),r(e.data.response);break;default:clearTimeout(c),clearTimeout(o),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function Xd(){return window}
/**
	 * @license
	 * Copyright 2020 Google LLC.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function Qd(){return void 0!==Xd().WorkerGlobalScope&&"function"==typeof Xd().importScripts}
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const tp="firebaseLocalStorageDb",ep="firebaseLocalStorage",np="fbase_key";class ip{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function op(t,e){return t.transaction([ep],e?"readwrite":"readonly").objectStore(ep)}function sp(){const t=indexedDB.open(tp,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(ep,{keyPath:np})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(ep)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(tp);return new ip(t).toPromise()}(),e(await sp()))}))}))}async function rp(t,e,n){const i=op(t,!0).put({[np]:e,value:n});return new ip(i).toPromise()}function ap(t,e){const n=op(t,!0).delete(e);return new ip(n).toPromise()}class lp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await sp()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gd._getInstance(Qd()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Yd(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await sp();return await rp(t,Fd,"1"),await ap(t,Fd),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>rp(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=op(t,!1).get(e),i=await new ip(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>ap(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=op(t,!1).getAll();return new ip(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:o}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}lp.type="LOCAL";const cp=lp;
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */function up(t){return new Promise(((e,n)=>{const i=document.createElement("script");var o,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Dh("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(o=document.getElementsByTagName("head"))||void 0===o?void 0:o[0])&&void 0!==s?s:document).appendChild(i)}))}new Wh(3e4,6e4);
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class hp extends Cd{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ed(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ed(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ed(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function dp(t){
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
return async function(t,e,n=!1){const i="signIn",o=await Ud(t,i,e),s=await jd._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(s.user),s}(t.auth,new hp(t),t.bypassAuthState)}function pp(t){const{auth:e,user:n}=t;return Nh(n,e,"internal-error"),
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
async function(t,e,n=!1){const{auth:i}=t,o="reauthenticate";try{const s=await od(t,Ud(i,o,e,t),n);Nh(s.idToken,i,"internal-error");const r=id(s.idToken);Nh(r,i,"internal-error");const{sub:a}=r;return Nh(t.uid===a,i,"user-mismatch"),jd._forOperation(t,o,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Ah(i,"user-mismatch"),t}}(n,new hp(t),t.bypassAuthState)}async function fp(t){const{auth:e,user:n}=t;return Nh(n,e,"internal-error"),async function(t,e,n=!1){const i=await od(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jd._forOperation(t,"link",i)}(n,new hp(t),t.bypassAuthState)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class mp{constructor(t,e,n,i,o=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:o,error:s,type:r}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(r)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return dp;case"linkViaPopup":case"linkViaRedirect":return fp;case"reauthViaPopup":case"reauthViaRedirect":return pp;default:Ah(this.auth,"internal-error")}}resolve(t){jh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){jh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const gp=new Wh(2e3,1e4);class _p extends mp{constructor(t,e,n,i,o){super(t,e,i,o),this.provider=n,this.authWindow=null,this.pollId=null,_p.currentPopupAction&&_p.currentPopupAction.cancel(),_p.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nh(t,this.auth,"internal-error"),t}async onExecution(){jh(1===this.filter.length,"Popup operations only handle one event");const t=Jd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Dh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Dh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_p.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Dh(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,gp.get())};t()}}_p.currentPopupAction=null;
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const vp="pendingRedirect",yp=new Map;class wp extends mp{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=yp.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return pd(vp,t.config.apiKey,t.name)}(e),i=function(t){return Zh(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const o="true"===await i._get(n);return await i._remove(n),o}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}yp.set(this.auth._key(),t)}return this.bypassAuthState||yp.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function bp(t,e,n=!1){const i=Ld(t),o=
/**
	 * @license
	 * Copyright 2021 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function(t,e){return e?Zh(e):(Nh(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new wp(i,o,n),r=await s.execute();return r&&!n&&(delete r.user._redirectEventId,await i._persistUserIfCurrent(r.user),await i._setRedirectUser(null,e)),r}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */class xp{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kp(t);default:return!1}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!kp(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Dh(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($p(t))}saveEventToCache(t){this.cachedEventUids.add($p(t)),this.lastProcessedEventTime=Date.now()}}function $p(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function kp({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const Tp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ip=/^https?/;async function Pp(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Jh(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(Lp(t))return}catch(t){}Ah(t,"unauthorized-domain")}function Lp(t){const e=Uh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===i}if(!Ip.test(n))return!1;if(Tp.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}
/**
	 * @license
	 * Copyright 2020 Google LLC.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const Sp=new Wh(3e4,6e4);function Cp(){const t=Xd().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}function Ep(t){return new Promise(((e,n)=>{var i,o,s;function r(){Cp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cp(),n(Dh(t,"network-request-failed"))},timeout:Sp.get()})}if(null===(o=null===(i=Xd().gapi)||void 0===i?void 0:i.iframes)||void 0===o?void 0:o.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Xd().gapi)||void 0===s?void 0:s.load)){const e=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Xd()[e]=()=>{gapi.load?r():n(Dh(t,"network-request-failed"))},up(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}r()}})).catch((t=>{throw Mp=null,t}))}let Mp=null;
/**
	 * @license
	 * Copyright 2020 Google LLC.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
const Op=new Wh(5e3,15e3),Ap={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rp(t){const e=t.config;Nh(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vh(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:nu},o=Dp.get(t.config.apiHost);o&&(i.eid=o);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Sc(i).slice(1)}`}async function Np(t){const e=await function(t){return Mp=Mp||Ep(t),Mp}(t),n=Xd().gapi;return Nh(n,t,"internal-error"),e.open({where:document.body,url:Rp(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ap,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const o=Dh(t,"network-request-failed"),s=Xd().setTimeout((()=>{i(o)}),Op.get());function r(){Xd().clearTimeout(s),n(e)}e.ping(r).then(r,(()=>{i(o)}))}))))}
/**
	 * @license
	 * Copyright 2020 Google LLC.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */const zp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jp{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Bp(t,e,n,i=500,o=600){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),r=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},zp),{width:i.toString(),height:o.toString(),top:s,left:r}),c=$c().toLowerCase();n&&(a=vd(c)?"_blank":n),gd(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=$c()){var e;return $d(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
	 * @license
	 * Copyright 2021 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(e||"",a),new jp(null);const h=window.open(e||"",a,u);Nh(h,t,"popup-blocked");try{h.focus()}catch(t){}return new jp(h)}const Zp="__/auth/handler",Up="emulator/auth/handler";function Fp(t,e,n,i,o,s){Nh(t.config.authDomain,t,"auth-domain-config-required"),Nh(t.config.apiKey,t,"invalid-api-key");const r={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:nu,eventId:o};if(e instanceof Od){e.setDefaultLanguage(t.languageCode),r.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(r.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))r[t]=e}if(e instanceof Ad){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(r.scopes=t.join(","))}t.tenantId&&(r.tid=t.tenantId);const a=r;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${function({config:t}){if(!t.emulator)return`https://${t.authDomain}/${Zp}`;return Vh(t,Up)}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */(t)}?${Sc(a).slice(1)}`}const Hp="webStorageSupport";const Wp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kd,this._completeRedirectFn=bp}async _openPopup(t,e,n,i){var o;jh(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return Bp(t,Fp(t,e,n,Uh(),i),Jd())}async _openRedirect(t,e,n,i){var o;return await this._originValidation(t),o=Fp(t,e,n,Uh(),i),Xd().location.href=o,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(jh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await Np(t),n=new xp(t);return e.register("authEvent",(e=>{Nh(null==e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Hp,{type:Hp},(n=>{var i;const o=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==o&&e(!!o),Ah(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Pp(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Td()||_d()||$d()}};var Vp,qp="@firebase/auth",Kp="0.19.4";
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
class Gp{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Nh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */Vp="Browser",Xc(new Oc("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:i,authDomain:o}=n.options;return(t=>{Nh(i&&!i.includes(":"),"invalid-api-key",{appName:t.name}),Nh(!(null==o?void 0:o.includes(":")),"argument-error",{appName:t.name});const n={apiKey:i,authDomain:o,clientPlatform:Vp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Id(Vp)},s=new Pd(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Zh);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),Xc(new Oc("auth-internal",(t=>(t=>new Gp(t))(Ld(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ou(qp,Kp,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Vp)),ou(qp,Kp,"esm2017");const Jp=function(t,e={}){if("object"!=typeof e){e={name:e}}const n=Object.assign({name:qc,automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw tu.create("bad-app-name",{appName:String(i)});const o=Gc.get(i);if(o){if(Pc(t,o.options)&&Pc(n,o.config))return o;throw tu.create("duplicate-app",{appName:i})}const s=new Rc(i);for(const t of Jc.values())s.addComponent(t);const r=new eu(t,n,s);return Gc.set(i,r),r}({apiKey:"AIzaSyBGyM0EuPsrNBr2z360OhJ1dVvztGnE5L4",authDomain:"phdevbin.firebaseapp.com",databaseURL:"https://phdevbin.firebaseio.com",projectId:"phdevbin",storageBucket:"phdevbin.appspot.com",messagingSenderId:"269534461245",appId:"1:269534461245:web:51b1e9e51303c6156a5954",measurementId:"G-W9PTC1C6FM"}),Yp=
/**
	 * @license
	 * Copyright 2017 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function(t=iu()){return Ph().then((t=>{if(!t)throw lh.create("unsupported-browser")}),(t=>{throw lh.create("indexed-db-unsupported")})),Qc(Mc(t),"messaging").getImmediate()}(Jp),Xp=
/**
	 * @license
	 * Copyright 2021 Google LLC
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 */
function(t=iu()){const e=Qc(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=Qc(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(Pc(n.getOptions(),null!=e?e:{}))return t;Ah(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Wp,persistence:[cp,Vd,Kd]})}(Jp),Qp=location.pathname+("/"===location.pathname.slice(-1)?"":"/")+"build/",tf=navigator.serviceWorker.register(Qp+"sw.js",{scope:Qp});let ef=null;function nf(){if(ef)return Li("/api/v1/me/firebase",ef)}tf.then((t=>{const e=Vn();(async function(t,e){return wh(t=Mc(t),e)})(Yp,{serviceWorkerRegistration:t,vapidKey:e&&e.publicVapidKey}).then((t=>{ef=t})).catch(console.error)})).catch(console.error),function(t,e,n,i){Mc(t).onAuthStateChanged(e,n,i)}(Xp,(t=>{t&&console.log("Firebase auth login: ",t.uid)})),function(t,e){(function(t,e){if(!navigator)throw lh.create("only-available-in-window");t.onMessageHandler=e})(t=Mc(t),e)}(Yp,(t=>{const e=t.data;switch(e.cmd){case"Agent Location Change":console.log("firebase update of whole team location: ",e);break;case"Delete":console.warn("server requested op delete: ",e),ai.delete(e.opID),pi("Delete: "+e.opID);break;case"Generic Message":console.log(e),di("Message: "+e.msg);break;case"Login":console.debug("server reported teammate login: ",e),Ki(e.gid).then((t=>di("Teamate Login: "+t.name))).catch((()=>di("Teamate Login: "+e.gid)));break;case"Link Assignment Change":case"Link Status Change":case"Marker Assignment Change":case"Marker Status Change":case"Task Assignment Change":case"Task Status Change":case"Marker Status Change":case"Map Change":!async function(t){if(_i().has(t.updateID))return;if(of.has(t.updateID+t.cmd))return void console.debug("skipping firebase requested update of op since it was our change",t.cmd,t.updateID);of.set(t.updateID+t.cmd,Date.now());const e=ai.load(t.opID);if(!e)return void console.warn("Got operation change for an unknown op",t.opID);switch(t.cmd){case"Link Assignment Change":!async function(t,e){const n=new Qn(await xi(e.opID,e.linkID)),i=t.getPortal(n.fromPortalId),o=t.getPortal(n.toPortalId),s=await Ki(n.assignedTo);i&&o&&s&&gi(di(`Link from ${i.name} to ${o.name} is assigned to ${s.name}`),e.updateID)}(e,t),console.log(t);break;case"Link Status Change":!async function(t,e){const n=new Qn(await xi(e.opID,e.linkID)),i=t.getPortal(n.fromPortalId),o=t.getPortal(n.toPortalId);i&&o&&gi(di(`Link from ${i.name} to ${o.name} is ${n.state}`),e.updateID)}(e,t),console.log(t);break;case"Marker Assignment Change":!async function(t,e){const n=new oi(await $i(e.opID,e.markerID)),i=t.getPortal(n.portalId),o=await Ki(n.assignedTo);i&&o&&gi(di(`Marker ${n.type} on ${i.name} is assigned ${o.name}`),e.updateID)}(e,t),console.log(t);break;case"Marker Status Change":!async function(t,e){const n=new oi(await $i(e.opID,e.markerID)),i=t.getPortal(n.portalId);i&&gi(di(`Marker ${n.type} on ${i.name} is ${n.state}`),e.updateID)}(e,t),console.log(t);break;default:gi(di(t.cmd+": "+JSON.stringify(t)),t.updateID),console.log(t)}}(e);break;case"Target":console.log(e),di("Target: "+e.msg);break;default:console.warn("unknown firebase command: ",e),pi("Unknown: "+JSON.stringify(e))}}));const of=new Map;function sf(t){let e,n,i,o,s,r,a,l,c;return n=new Tn({props:{container:!1,color:"dark",dark:!0,expand:"lg",$$slots:{default:[xf]},$$scope:{ctx:t}}}),s=new Ce({props:{$$slots:{default:[$f,({data:t})=>({8:t}),({data:t})=>t?256:0]},$$scope:{ctx:t}}}),a=new pe({props:{routes:t[3]}}),{c(){e=N("header"),Kt(n.$$.fragment),i=B(),o=N("main"),Kt(s.$$.fragment),r=B(),Kt(a.$$.fragment)},m(t,l){A(t,e,l),Gt(n,e,null),A(t,i,l),A(t,o,l),Gt(s,o,null),E(o,r),Gt(a,o,null),c=!0},p(t,e){const i={};512&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i);const o={};768&e&&(o.$$scope={dirty:e,ctx:t}),s.$set(o)},i(t){c||(Dt(n.$$.fragment,t),Dt(s.$$.fragment,t),Dt(a.$$.fragment,t),l||$t((()=>{l=zt(o,me,{duration:500}),l.start()})),c=!0)},o(t){Rt(n.$$.fragment,t),Rt(s.$$.fragment,t),Rt(a.$$.fragment,t),c=!1},d(t){t&&D(e),Jt(n),t&&D(i),t&&D(o),Jt(s),Jt(a)}}}function rf(t){let e,n;return e=new Vi({props:{disabled:t[2]}}),e.$on("login",t[6]),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};4&n&&(i.disabled=t[2]),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function af(t){let e;return{c(){e=j("Teams")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function lf(t){let e,n;return e=new En({props:{href:"#/teams",$$slots:{default:[af]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function cf(t){let e;return{c(){e=j("Operations")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function uf(t){let e,n;return e=new En({props:{href:"#/operations",$$slots:{default:[cf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function hf(t){let e;return{c(){e=j("Defensive keys")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function df(t){let e,n;return e=new En({props:{href:"#/defensivekeys/",$$slots:{default:[hf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function pf(t){let e;return{c(){e=j("Settings")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function ff(t){let e,n;return e=new En({props:{href:"#/settings",$$slots:{default:[pf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function mf(t){let e;return{c(){e=j("Help")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function gf(t){let e,n;return e=new En({props:{href:"#/help",$$slots:{default:[mf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function _f(t){let e;return{c(){e=j("Log out")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function vf(t){let e,n;return e=new En({props:{href:"#/",$$slots:{default:[_f]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function yf(t){let e,n,i,o,s,r,a,l,c,u,h,d;return e=new Ln({props:{$$slots:{default:[lf]},$$scope:{ctx:t}}}),i=new Ln({props:{$$slots:{default:[uf]},$$scope:{ctx:t}}}),s=new Ln({props:{$$slots:{default:[df]},$$scope:{ctx:t}}}),a=new Ln({props:{$$slots:{default:[ff]},$$scope:{ctx:t}}}),c=new Ln({props:{$$slots:{default:[gf]},$$scope:{ctx:t}}}),h=new Ln({props:{$$slots:{default:[vf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment),n=B(),Kt(i.$$.fragment),o=B(),Kt(s.$$.fragment),r=B(),Kt(a.$$.fragment),l=B(),Kt(c.$$.fragment),u=B(),Kt(h.$$.fragment)},m(t,p){Gt(e,t,p),A(t,n,p),Gt(i,t,p),A(t,o,p),Gt(s,t,p),A(t,r,p),Gt(a,t,p),A(t,l,p),Gt(c,t,p),A(t,u,p),Gt(h,t,p),d=!0},p(t,n){const o={};512&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const r={};512&n&&(r.$$scope={dirty:n,ctx:t}),i.$set(r);const l={};512&n&&(l.$$scope={dirty:n,ctx:t}),s.$set(l);const u={};512&n&&(u.$$scope={dirty:n,ctx:t}),a.$set(u);const d={};512&n&&(d.$$scope={dirty:n,ctx:t}),c.$set(d);const p={};512&n&&(p.$$scope={dirty:n,ctx:t}),h.$set(p)},i(t){d||(Dt(e.$$.fragment,t),Dt(i.$$.fragment,t),Dt(s.$$.fragment,t),Dt(a.$$.fragment,t),Dt(c.$$.fragment,t),Dt(h.$$.fragment,t),d=!0)},o(t){Rt(e.$$.fragment,t),Rt(i.$$.fragment,t),Rt(s.$$.fragment,t),Rt(a.$$.fragment,t),Rt(c.$$.fragment,t),Rt(h.$$.fragment,t),d=!1},d(t){Jt(e,t),t&&D(n),Jt(i,t),t&&D(o),Jt(s,t),t&&D(r),Jt(a,t),t&&D(l),Jt(c,t),t&&D(u),Jt(h,t)}}}function wf(t){let e,n;return e=new yn({props:{navbar:!0,$$slots:{default:[yf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};512&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function bf(t){let e,i=Kn().replace("https://","")+"";return{c(){e=j(i)},m(t,n){A(t,e,n)},p:n,d(t){t&&D(e)}}}function xf(t){let e,n,i,o,s,r;return e=new Dn({props:{id:"main-toggler"}}),i=new on({props:{toggler:"#main-toggler",navbar:!0,expand:"lg",$$slots:{default:[wf]},$$scope:{ctx:t}}}),s=new En({props:{disabled:!0,href:"#",$$slots:{default:[bf]},$$scope:{ctx:t}}}),{c(){Kt(e.$$.fragment),n=B(),Kt(i.$$.fragment),o=B(),Kt(s.$$.fragment)},m(t,a){Gt(e,t,a),A(t,n,a),Gt(i,t,a),A(t,o,a),Gt(s,t,a),r=!0},p(t,e){const n={};512&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const o={};512&e&&(o.$$scope={dirty:e,ctx:t}),s.$set(o)},i(t){r||(Dt(e.$$.fragment,t),Dt(i.$$.fragment,t),Dt(s.$$.fragment,t),r=!0)},o(t){Rt(e.$$.fragment,t),Rt(i.$$.fragment,t),Rt(s.$$.fragment,t),r=!1},d(t){Jt(e,t),t&&D(n),Jt(i,t),t&&D(o),Jt(s,t)}}}function $f(t){let e,n;return e=new qe({props:{data:t[8]}}),{c(){Kt(e.$$.fragment)},m(t,i){Gt(e,t,i),n=!0},p(t,n){const i={};256&n&&(i.data=t[8]),e.$set(i)},i(t){n||(Dt(e.$$.fragment,t),n=!0)},o(t){Rt(e.$$.fragment,t),n=!1},d(t){Jt(e,t)}}}function kf(t){let e;return{c(){e=N("div"),F(e,"id","loading-animation"),F(e,"class","svelte-1bcajx9")},m(t,n){A(t,e,n)},d(t){t&&D(e)}}}function Tf(t){let e,n,i,o,s,r,a,l,c,u,d;const p=[rf,sf],f=[];function m(t,e){return t[0]?1:0}o=m(t),s=f[o]=p[o](t);let g=t[1]&&kf();return{c(){e=N("script"),i=B(),s.c(),r=B(),g&&g.c(),a=B(),l=N("footer"),l.innerHTML='<div class="p-5"><p class="text-muted small">This site uses cookies for authentication purposes. You may opt into\n      location tracking; your location and other information will be shared <strong>only</strong>\n      with members of your teams. Your ENL information is verified with\n      <a href="https://v.enl.one/">V</a> and\n      <a href="https://enl.rocks">.rocks</a>. Please see the\n      <a href="/privacy">Privacy Policy</a> for more information.</p> \n    <p class="text-muted text-right small">Copyright  The Wasabee Team 2021. All Rights Reserved</p></div>',h(e.src,n="https://apis.google.com/js/api.js")||F(e,"src","https://apis.google.com/js/api.js"),e.async=!0,e.defer=!0,F(l,"class","mastfoot mx-5 mt-auto")},m(n,s){E(document.head,e),A(n,i,s),f[o].m(n,s),A(n,r,s),g&&g.m(n,s),A(n,a,s),A(n,l,s),c=!0,u||(d=U(e,"load",t[5]),u=!0)},p(t,[e]){let n=o;o=m(t),o===n?f[o].p(t,e):(Ot(),Rt(f[n],1,1,(()=>{f[n]=null})),At(),s=f[o],s?s.p(t,e):(s=f[o]=p[o](t),s.c()),Dt(s,1),s.m(r.parentNode,r)),t[1]?g||(g=kf(),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(t){c||(Dt(s),c=!0)},o(t){Rt(s),c=!1},d(t){D(e),t&&D(i),f[o].d(t),t&&D(r),g&&g.d(t),t&&D(a),t&&D(l),u=!1,d()}}}function If(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};let o,s=!1;Ai()&&(s=!0,vi().then((t=>{Wn(t),Ji().then((()=>i(void 0,void 0,void 0,(function*(){n(0,o=Yn.get()),nf(),n(1,s=!1)})))).catch((()=>{Di(),n(1,s=!1)}))})).catch((()=>{n(1,s=!1)})));const r={"/":Zo,"/teams":Zo,"/operations":ho,"/settings":ko,"/help":Nn,"/defensivekeys/*":br,"/team/:teamid/*":wc,"/operation/:opid/*":Ll};let a=!0;return t.$$.update=()=>{1&t.$$.dirty&&o&&n(1,s=!1)},[o,s,a,r,function(){return i(this,void 0,void 0,(function*(){!function(){for(const t of Yi())delete localStorage[t]}();try{yield Pi("/api/v1/me/logout")}catch(t){console.log(t)}Yn.purge(),Di(),delete localStorage.sentToServer,n(0,o=null)}))},function(){window.gapi.load("auth2",(()=>{n(2,a=!1)}))},function(t){return i(this,void 0,void 0,(function*(){n(0,o=new Yn(t.detail)),o.store(),Wn(yield vi()),yield Xi(o),yield Qi(o),nf()}))}]}new class extends Xt{constructor(t){super(),Yt(this,t,If,Tf,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
